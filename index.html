<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Slang Language Specification</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
			border-bottom: 3px solid transparent;
			margin-bottom: -3px;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom-color: #054572;
			border-bottom-color: var(--toclink-underline);
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 742f3d674, updated Mon Nov 4 14:56:54 2024 -0800" name="generator">
  <link href="https://github.com/shader-slang/spec/" rel="canonical">
  <meta content="923769d658b5a4622ea9d10ca61e552e6a0ef9ce" name="revision">
  <meta content="dark light" name="color-scheme">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Slang Language Specification</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Living Standard, <time class="dt-updated" datetime="2025-03-03">3 March 2025</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://github.com/shader-slang/spec/">https://github.com/shader-slang/spec/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/shader-slang/spec/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://tess-factor.com/">Theresa Foley</a> (<a class="p-org org" href="https://www.nvidia.com">NVIDIA</a>) <a class="u-email email" href="mailto:tfoley@nvidia.com">tfoley@nvidia.com</a>
    </dl>
   </div>
   <div data-fill-with="warning">
    <details class="annoying-warning" open>
     <summary>Not Ready For Implementation</summary>
     <p> This spec is not yet ready for implementation.
		It exists in this repository to record the ideas and promote discussion. </p>
     <p> Before attempting to implement this spec,
		please contact the editors. </p>
    </details>
   </div>
   <p class="copyright" data-fill-with="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" height="15" src="https://licensebuttons.net/p/zero/1.0/80x15.png" width="80"></a> To the extent possible under law, the editors have waived all copyright
and related or neighboring rights to this work.
In addition, as of 3 March 2025,
the editors have made this specification available under the <a href="https://www.openwebfoundation.org/the-agreements/the-owf-1-0-agreements-granted-claims/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at https://www.openwebfoundation.org/the-agreements/the-owf-1-0-agreements-granted-claims/owfa-1-0.
Parts of this work may be from another specification document.  If so, those parts are instead covered by the license of that specification document. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Slang is a programming language primarily intended for use in <em>shader programming</em>--that is, real-time graphics programming on GPUs.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#intro.scope"><span class="secno">1.1</span> <span class="content">Scope</span></a>
      <li><a href="#intro.conformance"><span class="secno">1.2</span> <span class="content">Conformance</span></a>
      <li><a href="#intro.stdlib"><span class="secno">1.3</span> <span class="content">The Slang Standard Library</span></a>
      <li>
       <a href="#intro.conventions"><span class="secno">1.4</span> <span class="content">Document Conventions</span></a>
       <ol class="toc">
        <li><a href="#intro.conventions.terminology"><span class="secno">1.4.1</span> <span class="content">Terminology</span></a>
        <li><a href="#intro.conventions.typographical"><span class="secno">1.4.2</span> <span class="content">Typographical Conventions</span></a>
        <li><a href="#intro.conventions.meta"><span class="secno">1.4.3</span> <span class="content">Meta-Values and Meta-Types</span></a>
        <li><a href="#intro.conventions.meta.var"><span class="secno">1.4.4</span> <span class="content">Meta-Variables</span></a>
        <li><a href="#intro.conventions.meta.pattern"><span class="secno">1.4.5</span> <span class="content">Patterns</span></a>
        <li><a href="#intro.conventions.meta.characteristic"><span class="secno">1.4.6</span> <span class="content">Characteristics of Meta-Values</span></a>
        <li><a href="#intro.conventions.callouts"><span class="secno">1.4.7</span> <span class="content">Callouts</span></a>
        <li><a href="#intro.conventions.traditional"><span class="secno">1.4.8</span> <span class="content">Traditional and Legacy Features</span></a>
       </ol>
      <li>
       <a href="#intro.grammar"><span class="secno">1.5</span> <span class="content">Context-Free Grammars</span></a>
       <ol class="toc">
        <li>
         <a href="#intro.grammar.notation"><span class="secno">1.5.1</span> <span class="content">Notation</span></a>
         <ol class="toc">
          <li><a href="#intro.grammar.notation.production"><span class="secno">1.5.1.1</span> <span class="content">Productions</span></a>
          <li><a href="#intro.grammar.notation.terminal"><span class="secno">1.5.1.2</span> <span class="content">Terminals</span></a>
          <li><a href="#intro.grammar.notation.nonterminal"><span class="secno">1.5.1.3</span> <span class="content">Nonterminals</span></a>
          <li><a href="#intro.grammar.notation.alternative"><span class="secno">1.5.1.4</span> <span class="content">Terminals</span></a>
          <li><a href="#intro.grammar.notation.optional"><span class="secno">1.5.1.5</span> <span class="content">Optionals</span></a>
          <li><a href="#intro.grammar.notation.sequence"><span class="secno">1.5.1.6</span> <span class="content">Sequences</span></a>
          <li><a href="#intro.grammar.notation.grouping"><span class="secno">1.5.1.7</span> <span class="content">Grouping</span></a>
          <li><a href="#intro.grammar.notation.exclusion"><span class="secno">1.5.1.8</span> <span class="content">Exclusion</span></a>
          <li><a href="#intro.grammar.notation.characteristics"><span class="secno">1.5.1.9</span> <span class="content">Characteristics</span></a>
         </ol>
       </ol>
     </ol>
    <li>
     <a href="#CHAPTER.lex"><span class="secno">2</span> <span class="content">Lexical Structure</span></a>
     <ol class="toc">
      <li><a href="#lex.source-unit"><span class="secno">2.1</span> <span class="content">Source Units</span></a>
      <li><a href="#lex.encoding"><span class="secno">2.2</span> <span class="content">Encoding</span></a>
      <li><a href="#lex.phase"><span class="secno">2.3</span> <span class="content">Phases</span></a>
      <li>
       <a href="#lex.lexeme"><span class="secno">2.4</span> <span class="content">Lexemes</span></a>
       <ol class="toc">
        <li>
         <a href="#lex.trivia"><span class="secno">2.4.1</span> <span class="content">Trivia</span></a>
         <ol class="toc">
          <li>
           <a href="#lex.trivia.space"><span class="secno">2.4.1.1</span> <span class="content">Whitespace</span></a>
           <ol class="toc">
            <li><a href="#lex.trivia.space.line-break"><span class="secno">2.4.1.1.1</span> <span class="content">Line Breaks</span></a>
           </ol>
          <li><a href="#lex.trivia.comment"><span class="secno">2.4.1.2</span> <span class="content">Comments</span></a>
         </ol>
        <li>
         <a href="#lex.token"><span class="secno">2.4.2</span> <span class="content">Tokens</span></a>
         <ol class="toc">
          <li><a href="#lex.token.ident"><span class="secno">2.4.2.1</span> <span class="content">Identifiers</span></a>
          <li>
           <a href="#lex.token.lit"><span class="secno">2.4.2.2</span> <span class="content">Literals</span></a>
           <ol class="toc">
            <li><a href="#lex.token.num"><span class="secno">2.4.2.2.1</span> <span class="content">Numeric Literals</span></a>
           </ol>
          <li><a href="#lex.token.int"><span class="secno">2.4.2.3</span> <span class="content">Integer Literals</span></a>
          <li><a href="#lex.token.float"><span class="secno">2.4.2.4</span> <span class="content">Floating-Point Literals</span></a>
         </ol>
        <li>
         <a href="#lex.token.text"><span class="secno">2.4.3</span> <span class="content">Text Literals</span></a>
         <ol class="toc">
          <li><a href="#lex.token.string"><span class="secno">2.4.3.1</span> <span class="content">String Literals</span></a>
          <li><a href="#lex.token.char"><span class="secno">2.4.3.2</span> <span class="content">Character Literals</span></a>
         </ol>
       </ol>
      <li><a href="#lex.token.punctuation"><span class="secno">2.5</span> <span class="content">Operators and Punctuation</span></a>
      <li><a href="#lex.token.trivia"><span class="secno">2.6</span> <span class="content">Associating Trivia With Tokens</span></a>
     </ol>
    <li>
     <a href="#prepro"><span class="secno">3</span> <span class="content">Preprocessor</span></a>
     <ol class="toc">
      <li><a href="#prepro.changes"><span class="secno">3.1</span> <span class="content">Changes</span></a>
      <li><a href="#prepro.extensions"><span class="secno">3.2</span> <span class="content">Extensions</span></a>
     </ol>
    <li>
     <a href="#parse"><span class="secno">4</span> <span class="content">Parsing</span></a>
     <ol class="toc">
      <li><a href="#parse.context"><span class="secno">4.1</span> <span class="content">Contexts</span></a>
      <li>
       <a href="#parse.strat"><span class="secno">4.2</span> <span class="content">Strategies</span></a>
       <ol class="toc">
        <li><a href="#parse.strat.ordered"><span class="secno">4.2.1</span> <span class="content">Ordered</span></a>
        <li><a href="#parse.strat.unordered"><span class="secno">4.2.2</span> <span class="content">Unordered</span></a>
       </ol>
      <li>
       <a href="#parse.angle"><span class="secno">4.3</span> <span class="content">Angle Brackets</span></a>
       <ol class="toc">
        <li>
         <a href="#parse.angle.open"><span class="secno">4.3.1</span> <span class="content">Opening Angle Brackets</span></a>
         <ol class="toc">
          <li><a href="#parse.angle.open.ordered"><span class="secno">4.3.1.1</span> <span class="content">Ordered Mode</span></a>
          <li><a href="#parse.angle.open.unordered"><span class="secno">4.3.1.2</span> <span class="content">Unordered Mode</span></a>
         </ol>
        <li><a href="#parse.angle.close"><span class="secno">4.3.2</span> <span class="content">Closing Angle Brackets</span></a>
       </ol>
     </ol>
    <li>
     <a href="#section.type"><span class="secno">5</span> <span class="content">Types and Values</span></a>
     <ol class="toc">
      <li><a href="#value.level"><span class="secno">5.1</span> <span class="content">Level</span></a>
      <li><a href="#type.type"><span class="secno">5.2</span> <span class="content">Types of Types</span></a>
      <li>
       <a href="#type.scalar"><span class="secno">5.3</span> <span class="content">Scalars</span></a>
       <ol class="toc">
        <li><a href="#type.unit"><span class="secno">5.3.1</span> <span class="content">Unit</span></a>
        <li><a href="#type.bool"><span class="secno">5.3.2</span> <span class="content">Booleans</span></a>
        <li>
         <a href="#type.scalar.numeric"><span class="secno">5.3.3</span> <span class="content">Numeric Scalars</span></a>
         <ol class="toc">
          <li><a href="#type.scalar.numeric.int"><span class="secno">5.3.3.1</span> <span class="content">Integers</span></a>
          <li><a href="#type.scalar.numeric.float"><span class="secno">5.3.3.2</span> <span class="content">Floating-Point Numbers</span></a>
         </ol>
        <li>
         <a href="#type.text"><span class="secno">5.3.4</span> <span class="content">Text</span></a>
         <ol class="toc">
          <li><a href="#type.text.unicode-scalar-value"><span class="secno">5.3.4.1</span> <span class="content">Unicode Scalar Values</span></a>
          <li><a href="#type.text.char"><span class="secno">5.3.4.2</span> <span class="content">Characters</span></a>
          <li><a href="#type.text.string"><span class="secno">5.3.4.3</span> <span class="content">Strings</span></a>
         </ol>
       </ol>
      <li><a href="#type.sequence.finite"><span class="secno">5.4</span> <span class="content">Finite Sequences</span></a>
      <li><a href="#type.array"><span class="secno">5.5</span> <span class="content">Array Types</span></a>
      <li><a href="#type.vector"><span class="secno">5.6</span> <span class="content">Vectors</span></a>
      <li><a href="#type.matrix"><span class="secno">5.7</span> <span class="content">Matrices</span></a>
      <li><a href="#type.never"><span class="secno">5.8</span> <span class="content">The <code>Never</code> Type</span></a>
      <li>
       <a href="#decl.ref"><span class="secno">5.9</span> <span class="content">Declaration References</span></a>
       <ol class="toc">
        <li><a href="#decl.ref.direct"><span class="secno">5.9.1</span> <span class="content">Direct Declaration References</span></a>
        <li><a href="#decl.ref.member"><span class="secno">5.9.2</span> <span class="content">Member Declaration Reference</span></a>
        <li><a href="#decl.ref.specialize"><span class="secno">5.9.3</span> <span class="content">Specialized Declaration Reference</span></a>
        <li><a href="#decl.ref.specialized.fully"><span class="secno">5.9.4</span> <span class="content">Fully-Specialized Declaration References</span></a>
       </ol>
      <li><a href="#type.nominal"><span class="secno">5.10</span> <span class="content">Nominal Types</span></a>
      <li><a href="#type.struct"><span class="secno">5.11</span> <span class="content"><code>struct</code> Types</span></a>
      <li><a href="#type.class"><span class="secno">5.12</span> <span class="content"><code>class</code> Types</span></a>
      <li><a href="#type.enum"><span class="secno">5.13</span> <span class="content"><code>enum</code> Types</span></a>
      <li><a href="#type.alias"><span class="secno">5.14</span> <span class="content">Type Aliases</span></a>
      <li><a href="#type.assoc"><span class="secno">5.15</span> <span class="content">Associated Types</span></a>
      <li><a href="#type.interface"><span class="secno">5.16</span> <span class="content">Interfaces</span></a>
      <li><a href="#type.any"><span class="secno">5.17</span> <span class="content"><code>any</code> Types</span></a>
      <li><a href="#type.function"><span class="secno">5.18</span> <span class="content">Functions</span></a>
      <li><a href="#type.generic"><span class="secno">5.19</span> <span class="content">Generics</span></a>
      <li><a href="#type.witness"><span class="secno">5.20</span> <span class="content">Witnesses</span></a>
      <li><a href="#value.module"><span class="secno">5.21</span> <span class="content">Module Values</span></a>
     </ol>
    <li>
     <a href="#check"><span class="secno">6</span> <span class="content">Semantic Checking</span></a>
     <ol class="toc">
      <li><a href="#check.context"><span class="secno">6.1</span> <span class="content">Contexts</span></a>
      <li>
       <a href="#check.expr"><span class="secno">6.2</span> <span class="content">Expressions</span></a>
       <ol class="toc">
        <li><a href="#check.expr.resolve"><span class="secno">6.2.1</span> <span class="content">Resolving</span></a>
        <li><a href="#check.check"><span class="secno">6.2.2</span> <span class="content">Checking</span></a>
       </ol>
      <li><a href="#check.stmt"><span class="secno">6.3</span> <span class="content">Statements</span></a>
      <li><a href="#check.decl"><span class="secno">6.4</span> <span class="content">Declarations</span></a>
     </ol>
    <li>
     <a href="#memory"><span class="secno">7</span> <span class="content">Memory</span></a>
     <ol class="toc">
      <li><a href="#memory.location"><span class="secno">7.1</span> <span class="content">Memory Locations</span></a>
      <li>
       <a href="#memory.access"><span class="secno">7.2</span> <span class="content">Memory Accesses</span></a>
       <ol class="toc">
        <li><a href="#memory.access.mode"><span class="secno">7.2.1</span> <span class="content">Memory Access Modes</span></a>
       </ol>
      <li><a href="#memory.model"><span class="secno">7.3</span> <span class="content">Memory Model</span></a>
     </ol>
    <li><a href="#SECTION.layout"><span class="secno">8</span> <span class="content">Layout</span></a>
    <li>
     <a href="#storage"><span class="secno">9</span> <span class="content">Storage</span></a>
     <ol class="toc">
      <li>
       <a href="#storage.concrete"><span class="secno">9.1</span> <span class="content">Concrete Storage Locations</span></a>
       <ol class="toc">
        <li>
         <a href="#storage.concrete.type"><span class="secno">9.1.1</span> <span class="content">Reference Types</span></a>
         <ol class="toc">
          <li><a href="#storage.concrete.type.conversion"><span class="secno">9.1.1.1</span> <span class="content">Type Conversion</span></a>
         </ol>
       </ol>
      <li><a href="#storage.abstract.location"><span class="secno">9.2</span> <span class="content">Abstract Storage Locations</span></a>
      <li><a href="#storage.abstract.access"><span class="secno">9.3</span> <span class="content">Abstract Storage Access</span></a>
      <li><a href="#storage.abstract.access.mode"><span class="secno">9.4</span> <span class="content">Access Mode</span></a>
      <li>
       <a href="#storage.abstract.reference.type"><span class="secno">9.5</span> <span class="content">Abstract Storage References</span></a>
       <ol class="toc">
        <li><a href="#storage.abstract.reference.type.conversion"><span class="secno">9.5.1</span> <span class="content">Type Conversion</span></a>
       </ol>
      <li>
       <a href="#storage.location.contain"><span class="secno">9.6</span> <span class="content">Containment</span></a>
       <ol class="toc">
        <li><a href="#storage.access.conflict"><span class="secno">9.6.1</span> <span class="content">Conflicts</span></a>
       </ol>
      <li><a href="#storage.expr"><span class="secno">9.7</span> <span class="content">Expressions That Reference Storage</span></a>
     </ol>
    <li>
     <a href="#lifecycle"><span class="secno">10</span> <span class="content">Program Lifecycle</span></a>
     <ol class="toc">
      <li><a href="#lifecyle.compilation"><span class="secno">10.1</span> <span class="content">Compilation</span></a>
      <li><a href="#lifecycle.linking"><span class="secno">10.2</span> <span class="content">Linking</span></a>
      <li><a href="#lifecycle.loading"><span class="secno">10.3</span> <span class="content">Loading</span></a>
      <li><a href="#lifecyle.reflection"><span class="secno">10.4</span> <span class="content">Runtime Reflection</span></a>
      <li><a href="#lifecycle.bundling"><span class="secno">10.5</span> <span class="content">Bundling</span></a>
     </ol>
    <li>
     <a href="#exec"><span class="secno">11</span> <span class="content">Execution</span></a>
     <ol class="toc">
      <li><a href="#exec.strand"><span class="secno">11.1</span> <span class="content">Strands</span></a>
      <li><a href="#exec.activation"><span class="secno">11.2</span> <span class="content">Activation Records</span></a>
      <li><a href="#exec.wave"><span class="secno">11.3</span> <span class="content">Waves</span></a>
      <li>
       <a href="#exec.uniformity"><span class="secno">11.4</span> <span class="content">Uniformity</span></a>
       <ol class="toc">
        <li><a href="#exec.uniformity.tangle"><span class="secno">11.4.1</span> <span class="content">Tangle</span></a>
        <li><a href="#exec.uniformity.dynamic"><span class="secno">11.4.2</span> <span class="content">Dynamic Uniformity</span></a>
        <li><a href="#exec.uniformity.static"><span class="secno">11.4.3</span> <span class="content">Static Uniformity</span></a>
       </ol>
     </ol>
    <li>
     <a href="#gpu"><span class="secno">12</span> <span class="content">GPUs</span></a>
     <ol class="toc">
      <li>
       <a href="#gpu.dispatch"><span class="secno">12.1</span> <span class="content">Dispatches</span></a>
       <ol class="toc">
        <li>
         <a href="#exec.gpu.pipeline"><span class="secno">12.1.1</span> <span class="content">Pipeline Instance</span></a>
         <ol class="toc">
          <li><a href="#exec.gpu.pipeline.type"><span class="secno">12.1.1.1</span> <span class="content">Pipeline Types</span></a>
         </ol>
        <li>
         <a href="#exec.gpu.pipeline.stage"><span class="secno">12.1.2</span> <span class="content">Stage Instances</span></a>
         <ol class="toc">
          <li><a href="#exec.gpu.pipeline.stage.type"><span class="secno">12.1.2.1</span> <span class="content">Stage Types</span></a>
          <li><a href="#exec.gpu.pipeline.stage.signature"><span class="secno">12.1.2.2</span> <span class="content">Signatures</span></a>
         </ol>
        <li>
         <a href="#exec.gpu.pipeline.record"><span class="secno">12.1.3</span> <span class="content">Records</span></a>
         <ol class="toc">
          <li><a href="#exec.gpu.pipeline.compute"><span class="secno">12.1.3.1</span> <span class="content">Compute</span></a>
          <li>
           <a href="#exec.gpu.pipeline.raster"><span class="secno">12.1.3.2</span> <span class="content">Rasterization</span></a>
           <ol class="toc">
            <li><a href="#exec.gpu.pipeline.raster.stage.fetch.index"><span class="secno">12.1.3.2.1</span> <span class="content">Index Fetch</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.fetch.vertex"><span class="secno">12.1.3.2.2</span> <span class="content">Vertex Fetch</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.vertex"><span class="secno">12.1.3.2.3</span> <span class="content">Vertex Shader</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.primitive-assembly"><span class="secno">12.1.3.2.4</span> <span class="content">Primitive Assembly</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.tess"><span class="secno">12.1.3.2.5</span> <span class="content">Tessellation</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.geometry"><span class="secno">12.1.3.2.6</span> <span class="content">Geometry Shader</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.mesh"><span class="secno">12.1.3.2.7</span> <span class="content">Mesh Shading</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.rasterizer"><span class="secno">12.1.3.2.8</span> <span class="content">Rasterizer</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.depth-stencil-test"><span class="secno">12.1.3.2.9</span> <span class="content">Depth/Stencil Test</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.fragment"><span class="secno">12.1.3.2.10</span> <span class="content">Fragment Shader</span></a>
            <li><a href="#exec.gpu.pipeline.raster.stage.blend"><span class="secno">12.1.3.2.11</span> <span class="content">Blend</span></a>
           </ol>
          <li><a href="#exec.gpu.pipeline.ray-tracing"><span class="secno">12.1.3.3</span> <span class="content">Ray Tracing</span></a>
         </ol>
       </ol>
     </ol>
    <li><a href="#stability"><span class="secno">13</span> <span class="content">Source and Binary Stability</span></a>
    <li>
     <a href="#sec.module"><span class="secno">14</span> <span class="content">Modules</span></a>
     <ol class="toc">
      <li><a href="#module.source.primary"><span class="secno">14.1</span> <span class="content">Primary Source Unit</span></a>
      <li>
       <a href="#module.source.secondary"><span class="secno">14.2</span> <span class="content">Seconary Source Units</span></a>
       <ol class="toc">
        <li><a href="#module.include"><span class="secno">14.2.1</span> <span class="content">Include Declarations</span></a>
        <li><a href="#module.implementing"><span class="secno">14.2.2</span> <span class="content">Implementing Declarations</span></a>
       </ol>
      <li><a href="#module.import"><span class="secno">14.3</span> <span class="content">Import Declarations</span></a>
     </ol>
    <li>
     <a href="#decl"><span class="secno">15</span> <span class="content">Declarations</span></a>
     <ol class="toc">
      <li>
       <a href="#decl.shared"><span class="secno">15.1</span> <span class="content">Shared Concepts</span></a>
       <ol class="toc">
        <li><a href="#TODO.decl.body"><span class="secno">15.1.1</span> <span class="content">Bodies</span></a>
        <li><a href="#TODO.decl.base"><span class="secno">15.1.2</span> <span class="content">Bases</span></a>
        <li>
         <a href="#decl.param"><span class="secno">15.1.3</span> <span class="content">Parameters</span></a>
         <ol class="toc">
          <li>
           <a href="#dir"><span class="secno">15.1.3.1</span> <span class="content">Directions</span></a>
           <ol class="toc">
            <li><a href="#dir.in"><span class="secno">15.1.3.1.1</span> <span class="content"><code>in</code></span></a>
            <li><a href="#out"><span class="secno">15.1.3.1.2</span> <span class="content"><code>out</code></span></a>
            <li><a href="#take"><span class="secno">15.1.3.1.3</span> <span class="content"><code>take</code></span></a>
            <li><a href="#borrow"><span class="secno">15.1.3.1.4</span> <span class="content"><code>borrow</code></span></a>
            <li><a href="#inout"><span class="secno">15.1.3.1.5</span> <span class="content"><code>inout</code></span></a>
            <li><a href="#ref"><span class="secno">15.1.3.1.6</span> <span class="content"><code>ref</code></span></a>
           </ol>
         </ol>
        <li><a href="#TODO.decl.accessor"><span class="secno">15.1.4</span> <span class="content">Accessors</span></a>
        <li><a href="#decl.invocable"><span class="secno">15.1.5</span> <span class="content">Invocable Declarations</span></a>
       </ol>
      <li><a href="#pattern"><span class="secno">15.2</span> <span class="content">Patterns</span></a>
      <li><a href="#TODO.decl.generic"><span class="secno">15.3</span> <span class="content">Generics</span></a>
      <li>
       <a href="#decl.type"><span class="secno">15.4</span> <span class="content">Type Declarations</span></a>
       <ol class="toc">
        <li>
         <a href="#decl.agg"><span class="secno">15.4.1</span> <span class="content">Aggregate Types</span></a>
         <ol class="toc">
          <li><a href="#decl.agg.member.static"><span class="secno">15.4.1.1</span> <span class="content">Instance and Static Members</span></a>
          <li><a href="#field"><span class="secno">15.4.1.2</span> <span class="content">Fields</span></a>
          <li><a href="#method"><span class="secno">15.4.1.3</span> <span class="content">Methods</span></a>
         </ol>
        <li>
         <a href="#decl.agg.bases"><span class="secno">15.4.2</span> <span class="content">Bases</span></a>
         <ol class="toc">
          <li>
           <a href="#decl.agg.syntax"><span class="secno">15.4.2.1</span> <span class="content">Traditional Syntax</span></a>
           <ol class="toc">
            <li><a href="#decl.agg.syntax.trailing-semicolon"><span class="secno">15.4.2.1.1</span> <span class="content">Trailing Semicolon</span></a>
            <li><a href="#decl.agg.type-specifier"><span class="secno">15.4.2.1.2</span> <span class="content">Aggregate Type Specifiers</span></a>
           </ol>
         </ol>
        <li>
         <a href="#decl.enum"><span class="secno">15.4.3</span> <span class="content"><code>enum</code> Declarations</span></a>
         <ol class="toc">
          <li><a href="#case"><span class="secno">15.4.3.1</span> <span class="content">Cases</span></a>
         </ol>
        <li>
         <a href="#decl.type.alias"><span class="secno">15.4.4</span> <span class="content">Type Aliases</span></a>
         <ol class="toc">
          <li><a href="#decl.type.alias.syntax.traditional"><span class="secno">15.4.4.1</span> <span class="content">Traditional Syntax</span></a>
         </ol>
        <li><a href="#decl.type.associated"><span class="secno">15.4.5</span> <span class="content">Associated Types</span></a>
       </ol>
      <li><a href="#decl.traditional"><span class="secno">15.5</span> <span class="content">Traditional Declarations</span></a>
      <li>
       <a href="#decl.var"><span class="secno">15.6</span> <span class="content">Variables</span></a>
       <ol class="toc">
        <li><a href="#decl.var.traditional"><span class="secno">15.6.1</span> <span class="content">Traditional Variable Declarations</span></a>
        <li>
         <a href="#decl.var.global"><span class="secno">15.6.2</span> <span class="content">Variables at Global Scope</span></a>
         <ol class="toc">
          <li><a href="#decl.var.global.const"><span class="secno">15.6.2.1</span> <span class="content">Global Constants</span></a>
          <li><a href="#decl.var.global.static"><span class="secno">15.6.2.2</span> <span class="content">Static Global Variables</span></a>
          <li><a href="#global.param"><span class="secno">15.6.2.3</span> <span class="content">Global Shader Parameters</span></a>
         </ol>
        <li>
         <a href="#decl.var.func"><span class="secno">15.6.3</span> <span class="content">Variables at Function Scope</span></a>
         <ol class="toc">
          <li><a href="#const"><span class="secno">15.6.3.1</span> <span class="content">Function-Scope Constants</span></a>
          <li><a href="#static"><span class="secno">15.6.3.2</span> <span class="content">Function-Scope Static Variables</span></a>
          <li><a href="#local"><span class="secno">15.6.3.3</span> <span class="content">Local Variables</span></a>
         </ol>
       </ol>
      <li>
       <a href="#decl.func"><span class="secno">15.7</span> <span class="content">Functions</span></a>
       <ol class="toc">
        <li><a href="#decl.func.result"><span class="secno">15.7.1</span> <span class="content">Result Type</span></a>
        <li><a href="#decl.func.body"><span class="secno">15.7.2</span> <span class="content">Body</span></a>
        <li><a href="#decl.func.traditional"><span class="secno">15.7.3</span> <span class="content">Traditional Function Declarations</span></a>
        <li><a href="#decl.func.entry"><span class="secno">15.7.4</span> <span class="content">Entry Points</span></a>
       </ol>
      <li><a href="#decl.init"><span class="secno">15.8</span> <span class="content">Constructors</span></a>
      <li>
       <a href="#decl.prop"><span class="secno">15.9</span> <span class="content">Properties</span></a>
       <ol class="toc">
        <li><a href="#decl.accessor"><span class="secno">15.9.1</span> <span class="content">Accessors</span></a>
       </ol>
      <li><a href="#decl.subscript"><span class="secno">15.10</span> <span class="content">Subscripts</span></a>
      <li><a href="#decl.extension"><span class="secno">15.11</span> <span class="content">Extensions</span></a>
      <li>
       <a href="#decl.generic"><span class="secno">15.12</span> <span class="content">Generics</span></a>
       <ol class="toc">
        <li><a href="#decl.generic.param"><span class="secno">15.12.1</span> <span class="content">Generic Parameters</span></a>
        <li><a href="#decl.generic.specialize.explicit"><span class="secno">15.12.2</span> <span class="content">Explicit Specialization</span></a>
        <li><a href="#decl.generic.specialize.implicit"><span class="secno">15.12.3</span> <span class="content">Implicit Specialization</span></a>
        <li><a href="#decl.generic.syntax"><span class="secno">15.12.4</span> <span class="content">Syntax Details</span></a>
       </ol>
      <li><a href="#decl.buffer"><span class="secno">15.13</span> <span class="content">Traditional Buffer Declarations</span></a>
     </ol>
    <li>
     <a href="#stmt"><span class="secno">16</span> <span class="content">Statements</span></a>
     <ol class="toc">
      <li><a href="#stmt.expr"><span class="secno">16.1</span> <span class="content">Expression Statement</span></a>
      <li><a href="#expr.decl"><span class="secno">16.2</span> <span class="content">Declaration Statement</span></a>
      <li><a href="#stmt.block"><span class="secno">16.3</span> <span class="content">Block Statement</span></a>
      <li><a href="#stmt.empty"><span class="secno">16.4</span> <span class="content">Empty Statement</span></a>
      <li>
       <a href="#stmt.cond"><span class="secno">16.5</span> <span class="content">Conditional Statements</span></a>
       <ol class="toc">
        <li><a href="#stmt.if"><span class="secno">16.5.1</span> <span class="content">If Statement</span></a>
        <li><a href="#stmt.switch"><span class="secno">16.5.2</span> <span class="content">Switch Statement</span></a>
       </ol>
      <li>
       <a href="#stmt.loop"><span class="secno">16.6</span> <span class="content">Loop Statements</span></a>
       <ol class="toc">
        <li><a href="#stmt.for"><span class="secno">16.6.1</span> <span class="content">For Statement</span></a>
        <li><a href="#stmt.while"><span class="secno">16.6.2</span> <span class="content">While Statement</span></a>
        <li><a href="#stmt.do-while"><span class="secno">16.6.3</span> <span class="content">Do-While Statement</span></a>
       </ol>
      <li>
       <a href="#stmt.control"><span class="secno">16.7</span> <span class="content">Control Transfer Statements</span></a>
       <ol class="toc">
        <li><a href="#stmt.break"><span class="secno">16.7.1</span> <span class="content"><code>break</code> Statement</span></a>
        <li><a href="#stmt.continue"><span class="secno">16.7.2</span> <span class="content">Continue Statement</span></a>
        <li><a href="#stmt.return"><span class="secno">16.7.3</span> <span class="content">Return Statement</span></a>
        <li><a href="#stmt.discard"><span class="secno">16.7.4</span> <span class="content">Discard Statement</span></a>
       </ol>
     </ol>
    <li>
     <a href="#expr"><span class="secno">17</span> <span class="content">Expressions</span></a>
     <ol class="toc">
      <li>
       <a href="#expr.lit"><span class="secno">17.1</span> <span class="content">Literal Expressions</span></a>
       <ol class="toc">
        <li><a href="#expr.lit.int"><span class="secno">17.1.1</span> <span class="content">Integer Literal Expressions</span></a>
        <li><a href="#expr.lit.float"><span class="secno">17.1.2</span> <span class="content">Floating-Point Literal Expressions</span></a>
        <li><a href="#expr.lit.bool"><span class="secno">17.1.3</span> <span class="content">Boolean Literal Expressions</span></a>
        <li><a href="#expr.lit.string"><span class="secno">17.1.4</span> <span class="content">String Literal Expressions</span></a>
       </ol>
      <li><a href="#expr.ident"><span class="secno">17.2</span> <span class="content">Identifier Expressions</span></a>
      <li><a href="#expr.member"><span class="secno">17.3</span> <span class="content">Member Expression</span></a>
      <li><a href="#expr.this"><span class="secno">17.4</span> <span class="content">This Expression</span></a>
      <li><a href="#expr.paren"><span class="secno">17.5</span> <span class="content">Parenthesized Expression</span></a>
      <li><a href="#expr.call"><span class="secno">17.6</span> <span class="content">Call Expression</span></a>
      <li><a href="#expr.subscript"><span class="secno">17.7</span> <span class="content">Subscript Expression</span></a>
      <li><a href="#expr.init-list"><span class="secno">17.8</span> <span class="content">Initializer List Expression</span></a>
      <li>
       <a href="#expr.cast"><span class="secno">17.9</span> <span class="content">Cast Expression</span></a>
       <ol class="toc">
        <li><a href="#expr.cast.compatiblity"><span class="secno">17.9.1</span> <span class="content">Legacy: Compatibility Feature</span></a>
       </ol>
      <li><a href="#expr.assign"><span class="secno">17.10</span> <span class="content">Assignment Expression</span></a>
      <li>
       <a href="#expr.op"><span class="secno">17.11</span> <span class="content">Operator Expressions</span></a>
       <ol class="toc">
        <li><a href="#expr.op.prefix"><span class="secno">17.11.1</span> <span class="content">Prefix Operator Expressions</span></a>
       </ol>
      <li>
       <a href="#expr.op.postfix"><span class="secno">17.12</span> <span class="content">Postfix Operator Expressions</span></a>
       <ol class="toc">
        <li><a href="#expr.op.infix"><span class="secno">17.12.1</span> <span class="content">Infix Operator Expressions</span></a>
        <li><a href="#expr.op.cond"><span class="secno">17.12.2</span> <span class="content">Conditional Expression</span></a>
       </ol>
     </ol>
    <li><a href="#attribute"><span class="secno">18</span> <span class="content">Attributes</span></a>
    <li><a href="#vis"><span class="secno">19</span> <span class="content">Visibility Control</span></a>
    <li><a href="#linearization"><span class="secno">20</span> <span class="content">Type Linearization</span></a>
    <li><a href="#SECTION.interface"><span class="secno">21</span> <span class="content">Interfaces</span></a>
    <li><a href="#section.generic"><span class="secno">22</span> <span class="content">Generics</span></a>
    <li><a href="#lookup"><span class="secno">23</span> <span class="content">Lookup</span></a>
    <li><a href="#overload"><span class="secno">24</span> <span class="content">Overload Resolution</span></a>
    <li><a href="#subtype"><span class="secno">25</span> <span class="content">Subtyping</span></a>
    <li><a href="#conv"><span class="secno">26</span> <span class="content">Type Conversions</span></a>
    <li><a href="#autodiff"><span class="secno">27</span> <span class="content">Automatic Differentiation</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="intro.scope"><span class="secno">1.1. </span><span class="content">Scope</span><a class="self-link" href="#intro.scope"></a></h3>
   <p>This document is a specification for the Slang programming language.</p>
   <p>Slang is language primarily designed for use in <em>shader programming</em>: performance oriented GPU programming for real-time graphics.</p>
   <h3 class="heading settled" data-level="1.2" id="intro.conformance"><span class="secno">1.2. </span><span class="content">Conformance</span><a class="self-link" href="#intro.conformance"></a></h3>
   <p>This document aspires to specify the Slang language, and the behaviors expected of conforming implementations, with a high level of rigor.</p>
   <p>The open-source Slang compiler <em>implementation</em> may deviate from the language as specified here, in a few key ways:</p>
   <ul>
    <li data-md>
     <p>The implementation is necessarily imperfect, and can have bugs.</p>
    <li data-md>
     <p>The implementation may not fully support constructs specified here, or their capabilities may not be as complete as what is required by the specification.</p>
    <li data-md>
     <p>The implementation may support certain constructs that are experimental, deprecated, or are otherwise intentionally unspecified (or even undocumented).</p>
   </ul>
   <p>Where practical, this document will call out known deviations between the language as specified, and the current implementation in the open-source Slang compiler.</p>
   <h3 class="heading settled" data-level="1.3" id="intro.stdlib"><span class="secno">1.3. </span><span class="content">The Slang Standard Library</span><a class="self-link" href="#intro.stdlib"></a></h3>
   <p>Many constructs that appear to users of Slang as built-in syntax are instead defined as part of the _standard library_ for Slang.
This document may, of neccessity, refer to constructs from the Slang standard library (e.g., the <code>Texture2D</code> type) that are not defined herein.</p>
   <p>This document does not provide a normative definition of all of the types, functions, attributes, modifiers, capabilities, etc. that are defined in the Slang standard library.
The normative reference for standard-library constructs not defined in this document is the Slang Standard Library Reference.</p>
   <p class="issue" id="issue-cebba3e7"><a class="self-link" href="#issue-cebba3e7"></a> Need to turn that into a link.</p>
   <p>In cases where a language construct is described in <em>both</em> this specification and the Standard Library Reference, the construct has all the capabilities and restrictions defined in either source.
In cases where the two sources disagree, there is a correctness issue in one or the other.</p>
   <h3 class="heading settled" data-level="1.4" id="intro.conventions"><span class="secno">1.4. </span><span class="content">Document Conventions</span><a class="self-link" href="#intro.conventions"></a></h3>
   <h4 class="heading settled" data-level="1.4.1" id="intro.conventions.terminology"><span class="secno">1.4.1. </span><span class="content">Terminology</span><a class="self-link" href="#intro.conventions.terminology"></a></h4>
   <p>The key words <strong>must</strong>, <strong>must not</strong>, <strong>required</strong>, <strong>shall</strong>, <strong>shall not</strong>, <strong>should</strong>, <strong>should not</strong>, <strong>recommended</strong>, <strong>may</strong>, and <strong>optional</strong> in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2199</a>.</p>
   <p>Uses of the words "descriptive" and "information" in this document are to be interpreted as synonymous with "non-normative."</p>
   <h4 class="heading settled" data-level="1.4.2" id="intro.conventions.typographical"><span class="secno">1.4.2. </span><span class="content">Typographical Conventions</span><a class="self-link" href="#intro.conventions.typographical"></a></h4>
   <p>This document makes use of the following conventions to improve readability:</p>
   <ul>
    <li data-md>
     <p>When a term is introduced and defined, it will be in bold and italics. For example: a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="duck">duck</dfn> is something that looks like a <a data-link-type="dfn" href="#duck" id="ref-for-duck">duck</a> and quacks like a <a data-link-type="dfn" href="#duck" id="ref-for-duck①">duck</a>.</p>
    <li data-md>
     <p>Code fragments in Slang or other programming languages use a fixed-width font. For example: <code>a + b</code>.</p>
   </ul>
   <h4 class="heading settled" data-level="1.4.3" id="intro.conventions.meta"><span class="secno">1.4.3. </span><span class="content">Meta-Values and Meta-Types</span><a class="self-link" href="#intro.conventions.meta"></a></h4>
   <p>The specification defines a variety of concepts (e.g., grammar productions, types, and values) that are used to define the static and dynamic semantics of Slang code.
In many cases, these concepts exist only to serve this specification, and cannot be directly named or manipulated in Slang code itself.</p>
   <p>We refer to these abstract concepts as <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="meta-values">meta-values</dfn>. All <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values">meta-values</a> are themselves <a data-link-type="dfn" href="#values" id="ref-for-values">values</a>.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="meta-type">meta-type</dfn> is a <a data-link-type="dfn" href="#type" id="ref-for-type">type</a> with instances that are all <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values①">meta-values</a>.</p>
   <p>This specification may introduce a named <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values②">meta-value</a> in prose, or via grammar rules.
When a <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values③">meta-value</a> is introduced or referenced, it name may be rendered using one of the following conventions:</p>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values④">meta-value</a> name may be rendered in italics and <em>UpperCamelCase</em>. E.g., <a data-link-type="dfn" href="#if-statement" id="ref-for-if-statement"><em>IfStatement</em></a>, <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type"><em>UnitType</em></a></p>
    <li data-md>
     <p>When a <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values⑤">meta-value</a> corresponds to a named declaration, keyword, attribute, or other entity that can be referenced in Slang code, its name may be rendered in a fixed-width font. E.g., the <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type①"><code>Unit</code></a> type.</p>
    <li data-md>
     <p>In prose, a <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values⑥">meta-value</a> name may be rendered as ordinary English, possibly with words that reference Slang language keywords in a fixed-width font. E.g., <a data-link-type="dfn" href="#if-statement" id="ref-for-if-statement①"><code>if</code> statement</a>, <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type②">unit type</a>.</p>
   </ul>
   <p>In each case, the concept being referenced is the same; for example, the references <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type③"><em>UnitType</em></a>, <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type④"><code>Unit</code></a>, and <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type⑤">unit type</a> all refer to the same definition.</p>
   <h4 class="heading settled" data-level="1.4.4" id="intro.conventions.meta.var"><span class="secno">1.4.4. </span><span class="content">Meta-Variables</span><a class="self-link" href="#intro.conventions.meta.var"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="meta-variable">meta-variable</dfn> is a placeholder name that may represents an unknown <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values⑦">meta-value</a> of some <a data-link-type="dfn" href="#meta-type" id="ref-for-meta-type">meta-type</a>.
A <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable">meta-variable</a> is rendered in italics, and must either be in <em>lowerCamelCase</em>, or consist of a single letter (either upper- or lower-case).
For example, text might introduce a <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable①">meta-variable</a> named <var>e</var> that represents an unknown <a data-link-type="dfn" href="#expressions" id="ref-for-expressions">expression</a>.</p>
   <p>The text that introduces a <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable②">meta-variable</a> may explicitly specify the <a data-link-type="dfn" href="#type" id="ref-for-type①">type</a> of that variable.
When the name of a <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable③">meta-variable</a> matches the name of a <a data-link-type="dfn" href="#type" id="ref-for-type②">type</a>, then it is implicitly a variable of the corresponding type.</p>
   <h4 class="heading settled" data-level="1.4.5" id="intro.conventions.meta.pattern"><span class="secno">1.4.5. </span><span class="content">Patterns</span><a class="self-link" href="#intro.conventions.meta.pattern"></a></h4>
   <p>When introducing a <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values⑧">meta-value</a> that is an instance of some nonterminal in a grammar, this specification may express the value as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="meta-pattern">meta-pattern</dfn>: a sequence of terminals and <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable④">meta-variables</a> that match the corresponding nonterminal.
For example, we might refer to "the <a data-link-type="dfn" href="#block-statement" id="ref-for-block-statement">block statement</a> <code>{</code> <var>stmts</var> <code>}</code>", implicitly introducing the <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable⑤">meta-variable</a> <var>stmts</var> of type <em>Statements</em>.</p>
   <p>The type of a <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable⑥">meta-variable</a> in a <a data-link-type="dfn" href="#meta-pattern" id="ref-for-meta-pattern">meta-pattern</a> may be explicitly specified in prose, or it may be implicit from the position of the <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable⑦">meta-variable</a> and the grammar production being matched.</p>
   <p>A pattern may also specify a type for a <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable⑧">meta-variable</a> by immediately suffixing the <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable⑨">meta-variable</a> with a colon and a <a data-link-type="dfn" href="#type" id="ref-for-type③">type</a> in <em>UpperCamelCase</em>.
For example, a reference to "the <a data-link-type="dfn" href="#block-statement" id="ref-for-block-statement①">block statement</a> <code>{</code> <var>stmts</var>:<em>Statements</em> <code>}</code>" makes the type of <var>stmts</var> more explicit.</p>
   <h4 class="heading settled" data-level="1.4.6" id="intro.conventions.meta.characteristic"><span class="secno">1.4.6. </span><span class="content">Characteristics of Meta-Values</span><a class="self-link" href="#intro.conventions.meta.characteristic"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="characteristic">characteristic</dfn> of a <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values⑨">meta-value</a> is a named property, attribute, or quality of that value.</p>
   <h4 class="heading settled" data-level="1.4.7" id="intro.conventions.callouts"><span class="secno">1.4.7. </span><span class="content">Callouts</span><a class="self-link" href="#intro.conventions.callouts"></a></h4>
   <p>This document uses a few kinds of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="callouts">callouts</dfn>, which start bold word indicating the kind of callout. For example, the following is a note:</p>
   <p class="note" role="note"><span class="marker">Note:</span> Notes are rendered like this.</p>
   <p>The kinds of <a data-link-type="dfn" href="#callouts" id="ref-for-callouts">callouts</a> used in this document are:</p>
   <div class="issue" id="issue-9b59a80d"><a class="self-link" href="#issue-9b59a80d"></a>List the cases we end up using here</div>
   <h4 class="heading settled" data-level="1.4.8" id="intro.conventions.traditional"><span class="secno">1.4.8. </span><span class="content">Traditional and Legacy Features</span><a class="self-link" href="#intro.conventions.traditional"></a></h4>
   <p>Some features of the Slang language are considered <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="traditional">traditional</dfn> or <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="legacy">legacy</dfn> features.
The language supports these constructs, syntax, etc. in order to facilitate compatibility with existing code in other GPU languages, such as HLSL.</p>
   <p>Sections that introduce <a data-link-type="dfn" href="#traditional" id="ref-for-traditional">traditional</a> or <a data-link-type="dfn" href="#legacy" id="ref-for-legacy">legacy</a> features begin with a callout indicating the status of those features.</p>
   <p><a data-link-type="dfn" href="#legacy" id="ref-for-legacy①">Legacy</a> features are those that undermine the consistency and simplicity of the language, and complicate its implementation, for little practical benefit.
These features should be considered as candidates for removal in future versions of this specification.
Legacy features are optional, unless otherwise indicated.</p>
   <p><a data-link-type="dfn" href="#traditional" id="ref-for-traditional①">Traditional</a> features are those that may not represent the long-term design trajectory of the language, but that offer significant practical benefit to users of the language.
Traditional features are required, unless otherwise indicated.</p>
   <h3 class="heading settled" data-level="1.5" id="intro.grammar"><span class="secno">1.5. </span><span class="content">Context-Free Grammars</span><a class="self-link" href="#intro.grammar"></a></h3>
   <p>This specification uses <a data-link-type="dfn" href="#context-free-grammar" id="ref-for-context-free-grammar">context-free grammars</a> to define:</p>
   <ul>
    <li data-md>
     <p>The lexical syntax of Slang</p>
    <li data-md>
     <p>The abstract syntax of Slang</p>
    <li data-md>
     <p>Representations for <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values①⓪">meta-values</a> used in this specification</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="context-free-grammar">context-free grammar</dfn> consists of an alphabet of <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="terminal">terminal</dfn> symbols, and zero or more <a data-link-type="dfn" href="#production" id="ref-for-production">productions</a>.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="production">production</dfn> consists of a <a data-link-type="dfn" href="#left-hand-side" id="ref-for-left-hand-side">left-hand side</a> and a <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side">right-hand side</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="left-hand-side">left-hand side</dfn> of a <a data-link-type="dfn" href="#production" id="ref-for-production①">production</a> consists of a single <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal">nonterminal</a> symbol.
A <a data-link-type="dfn" href="#production" id="ref-for-production②">production</a> is <strong>for</strong> the <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal①">nonterminal</a> on its <a data-link-type="dfn" href="#left-hand-side" id="ref-for-left-hand-side①">left-hand side</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="right-hand-side">right-hand side</dfn> of a <a data-link-type="dfn" href="#production" id="ref-for-production③">production</a> consists of an ordered sequence of zero or more <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal②">nonterminal</a> and <a data-link-type="dfn" href="#terminal" id="ref-for-terminal">terminal</a> symbols.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="chain-production">chain production</dfn> is a <a data-link-type="dfn" href="#production" id="ref-for-production④">production</a> that has exactly one <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal③">nonterminal</a> symbol on its <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side①">right-hand side</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> a chain production can have zero or more <a data-link-type="dfn" href="#terminal" id="ref-for-terminal①">terminals</a> on its <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side②">right-hand side</a>, in addition to the single <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal④">nonterminal</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="trivial-production">trivial production</dfn> is a <a data-link-type="dfn" href="#chain-production" id="ref-for-chain-production">chain production</a> that has zero <a data-link-type="dfn" href="#terminal" id="ref-for-terminal②">terminals</a> on its <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side③">right-hand side</a>.
A <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal⑤">nonterminal</a> is abstract if all of the productions for that nonterminal are trivial productions.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="nonterminal">nonterminal</dfn> of a <a data-link-type="dfn" href="#context-free-grammar" id="ref-for-context-free-grammar①">context-free grammar</a> is a <a data-link-type="dfn" href="#meta-type" id="ref-for-meta-type①">meta-type</a>.
An instance of a non-abstract <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal⑥">nonterminal</a> is the result of matching a <a data-link-type="dfn" href="#production" id="ref-for-production⑤">production</a> for that <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal⑦">nonterminal</a>, and consists of a sequence of matches for each of the terms on the <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side④">right-hand side</a> of that <a data-link-type="dfn" href="#production" id="ref-for-production⑥">production</a>.</p>
   <p>An instance of an abstract <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal⑧">nonterminal</a> is an instance of one of the nonterminals on the right-hand side of one of its productions.</p>
   <p class="note" role="note"><span class="marker">Note:</span> If there exists a trivial production for <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal⑨">nonterminal</a> <var>A</var> that has a <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side⑤">right-hand side</a> consisting of <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal①⓪">nonterminal</a> <var>B</var>, then <var>B</var> is a subtype of <var>A</var>.</p>
   <h4 class="heading settled" data-level="1.5.1" id="intro.grammar.notation"><span class="secno">1.5.1. </span><span class="content">Notation</span><a class="self-link" href="#intro.grammar.notation"></a></h4>
   <p>This specification uses a notation inspired by Extended Backus-Naur Form to define <a data-link-type="dfn" href="#context-free-grammar" id="ref-for-context-free-grammar②">context-free grammars</a>.
The notation uses the following notational conventions:</p>
   <h5 class="heading settled" data-level="1.5.1.1" id="intro.grammar.notation.production"><span class="secno">1.5.1.1. </span><span class="content">Productions</span><a class="self-link" href="#intro.grammar.notation.production"></a></h5>
   <p class="issue" id="issue-0aca773b"><a class="self-link" href="#issue-0aca773b"></a> Need to write this up.</p>
   <h5 class="heading settled" data-level="1.5.1.2" id="intro.grammar.notation.terminal"><span class="secno">1.5.1.2. </span><span class="content">Terminals</span><a class="self-link" href="#intro.grammar.notation.terminal"></a></h5>
   <p>Terminals in the lexical and abstract syntax are rendered in a fixed-width font: e.g., <code>func</code>.</p>
   <p>Terminals used in grammar rules for <a data-link-type="dfn" href="#meta-values" id="ref-for-meta-values①①">meta-values</a> are rendered in bold: e.g., <strong>extends</strong>.</p>
   <h5 class="heading settled" data-level="1.5.1.3" id="intro.grammar.notation.nonterminal"><span class="secno">1.5.1.3. </span><span class="content">Nonterminals</span><a class="self-link" href="#intro.grammar.notation.nonterminal"></a></h5>
   <p>Nonterminals in grammar rules are named in upper camel case, and rendered in italics: e.g., <em>CallExpression</em>.
This convention is consistent with the notational conventions for <a data-link-type="dfn" href="#meta-type" id="ref-for-meta-type②">meta-types</a>.</p>
   <ul>
    <li data-md>
     <p>A nonterminal on the right-hand side of a production may introduce a name for that nonterminal in lower camel case, using the same syntax as for <a data-link-type="dfn" href="#meta-variable" id="ref-for-meta-variable①⓪">meta-variables</a> in <a data-link-type="dfn" href="#meta-pattern" id="ref-for-meta-pattern①">meta-patterns</a>. E.g., <em>base</em> : <em>TypeExpression</em>.</p>
   </ul>
   <h5 class="heading settled" data-level="1.5.1.4" id="intro.grammar.notation.alternative"><span class="secno">1.5.1.4. </span><span class="content">Terminals</span><a class="self-link" href="#intro.grammar.notation.alternative"></a></h5>
   <p>A plain-text vertical bar is used to separate alternatives. E.g., <em>IntegerLiteral</em> | <em>FloatingPointLiteral</em></p>
   <h5 class="heading settled" data-level="1.5.1.5" id="intro.grammar.notation.optional"><span class="secno">1.5.1.5. </span><span class="content">Optionals</span><a class="self-link" href="#intro.grammar.notation.optional"></a></h5>
   <p>A plain-text question mark (?) as a suffix indicates that the given element is optional. E.g., <em>Expression</em>?</p>
   <h5 class="heading settled" data-level="1.5.1.6" id="intro.grammar.notation.sequence"><span class="secno">1.5.1.6. </span><span class="content">Sequences</span><a class="self-link" href="#intro.grammar.notation.sequence"></a></h5>
   <p>A plain-text asterisk (*) as a suffix indicates that a given element may be repeated zero or more times. E.g., <em>Modifier</em> *</p>
   <p>A plain-text plus sign (+) as a suffix indicates that a given element may be repeated one or more times. E.g., <em>AccessorDeclaration</em>+</p>
   <p>As an additional convenience, when an asertisk or plus is applied to a grouping where the last item in that grouping is a terminal consisting of a single comma (<code>,</code>), that phrase represents a repetition of <em>comma-separated</em> elements.</p>
   <h5 class="heading settled" data-level="1.5.1.7" id="intro.grammar.notation.grouping"><span class="secno">1.5.1.7. </span><span class="content">Grouping</span><a class="self-link" href="#intro.grammar.notation.grouping"></a></h5>
   <p>Plain-text parentheses are used for grouping. E.g., <em>Expression</em> (<code>,</code> <em>Expression</em>)</p>
   <h5 class="heading settled" data-level="1.5.1.8" id="intro.grammar.notation.exclusion"><span class="secno">1.5.1.8. </span><span class="content">Exclusion</span><a class="self-link" href="#intro.grammar.notation.exclusion"></a></h5>
   <p>A plain-text minus (-) used as an infix operator matches input that matches its left operand but not its right operand.</p>
   <h5 class="heading settled" data-level="1.5.1.9" id="intro.grammar.notation.characteristics"><span class="secno">1.5.1.9. </span><span class="content">Characteristics</span><a class="self-link" href="#intro.grammar.notation.characteristics"></a></h5>
   <p>A match for a <a data-link-type="dfn" href="#production" id="ref-for-production⑦">production</a> will have zero or more characteristics introduced by the <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side⑥">right-hand side</a> of that production.</p>
   <p>If the <a data-link-type="dfn" href="#right-hand-side" id="ref-for-right-hand-side⑦">right-hand side</a> of a non-trivial <a data-link-type="dfn" href="#production" id="ref-for-production⑧">production</a> <var>P</var> includes</p>
   <ul>
    <li data-md>
     <p>exactly one occurence of <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal①①">nonterminal</a> <var>N</var>, or</p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#nonterminal" id="ref-for-nonterminal①②">nonterminal</a> <var>N</var> with a label <var>L</var></p>
   </ul>
   <p>then a match of that production has a characteristic with a name and type derived as follows:</p>
   <ul>
    <li data-md>
     <p>Let <var>label</var> be either <var>L</var>, if it is present, or the name of <var>N</var> otherwise</p>
    <li data-md>
     <p>If <var>N</var> appears under a sequence (marked with * or +), then the type of the characteristic is <strong>List&lt;</strong> <var>N</var> <strong>></strong>, and the name of the characteristic is the plural of <var>label</var></p>
    <li data-md>
     <p>Otherwise, if <var>N</var> appears under a "?", then the type of the characteristic is <strong>Optional&lt;</strong> <var>N</var> <strong>></strong>, and the name of the characteristic is <var>label</var></p>
    <li data-md>
     <p>Otherwise, the type of the characteristic is <var>N</var>, and the name of the characteristic is <var>label</var></p>
   </ul>
   <div class="note" role="note">
     As an example, given a grammar production like: 
<pre class="language-.syntax">Boat := mainMast:Mast Mast* Sail* Hold?
</pre>
    <p>Then a match for this production would be a boat with the following characteristics:</p>
    <ul>
     <li data-md>
      <p>its <strong>main mast</strong>, of type <em>Mast</em></p>
     <li data-md>
      <p>its <strong>sails</strong>, a list of <em>Sail</em>s</p>
     <li data-md>
      <p>its <strong>hold</strong>, an <span class="allow-2119">optional</span> <em>Hold</em></p>
    </ul>
    <p>The term "Mast<em>" in the right-hand side of the production does not introduce a characteristic, because it is not the sole occurence of the non-terminal *Mast</em> on the right-hand side.</p>
   </div>
   <h2 class="heading settled" data-level="2" id="CHAPTER.lex"><span class="secno">2. </span><span class="content">Lexical Structure</span><a class="self-link" href="#CHAPTER.lex"></a></h2>
   <p>This chapter describes how a <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit">source unit</a> is decomposed into a sequence of [<a data-link-type="dfn" href="#lexeme" id="ref-for-lexeme">lexemes</a>].</p>
   <h3 class="heading settled" data-level="2.1" id="lex.source-unit"><span class="secno">2.1. </span><span class="content">Source Units</span><a class="self-link" href="#lex.source-unit"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="source-unit">source unit</dfn> comprises a sequence of zero or more [<a data-link-type="dfn" href="#character" id="ref-for-character">characters</a>].
For the purposes of this document, a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="character">character</dfn> is defined as a <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[Unicode]</a> scalar value.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A Unicode scalar value is a Unicode code point that is not a surrogate code point.</p>
   <p>Implementations may accept <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①">source units</a> stored as files on disk, buffers in memory, or any appropriate implementation-specified means.</p>
   <h3 class="heading settled" data-level="2.2" id="lex.encoding"><span class="secno">2.2. </span><span class="content">Encoding</span><a class="self-link" href="#lex.encoding"></a></h3>
   <p>Implementations must support <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②">source units</a> encoded using UTF-8, if they support any encoding of <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③">source units</a> as byte sequences.</p>
   <p>Implementations should default to the UTF-8 encoding for all text input/output.</p>
   <p>Implementations may support additional implementation-specified encodings.</p>
   <h3 class="heading settled" data-level="2.3" id="lex.phase"><span class="secno">2.3. </span><span class="content">Phases</span><a class="self-link" href="#lex.phase"></a></h3>
   <p>Lexical processing of a [<a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit④">source unit</a>] proceeds <em>as if</em> the following steps are executed in order:</p>
   <ol>
    <li data-md>
     <p>Line numbering (for subsequent diagnostic messages) is noted based on the locations of [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break">line breaks</a>]</p>
    <li data-md>
     <p>[<a data-link-type="dfn" href="#escaped-line-break" id="ref-for-escaped-line-break">Escaped line breaks</a>] are eliminated. No new [<a data-link-type="dfn" href="#character" id="ref-for-character①">characters</a>] are inserted to replace them. Any new [<a data-link-type="dfn" href="#escaped-line-break" id="ref-for-escaped-line-break①">escaped line breaks</a>] introduced by this step are not eliminated.</p>
    <li data-md>
     <p>Each comment is replaced with a single space (U+0020)</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit⑤">source unit</a> is <a data-link-type="dfn" href="#lex" id="ref-for-lex">lexed</a> into a sequence of [<a data-link-type="dfn" href="#tokens" id="ref-for-tokens">tokens</a>] according to the lexical grammar in this chapter</p>
    <li data-md>
     <p>The lexed sequence of tokens is _preprocessed_ to produce a new sequence of tokens</p>
   </ol>
   <p>The final [<a data-link-type="dfn" href="#tokens" id="ref-for-tokens①">token</a>] sequence produced by this process is used as input to subsequent phases of compilation.</p>
   <h3 class="heading settled" data-level="2.4" id="lex.lexeme"><span class="secno">2.4. </span><span class="content">Lexemes</span><a class="self-link" href="#lex.lexeme"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="lexeme">lexeme</dfn> is a contiguous sequence of characters in a single [<a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit⑥">source unit</a>].</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="lex" id="lex">Lexing</dfn> is the process by which an implementation decomposes a [<a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit⑦">source unit</a>] into zero or more non-overlapping [<a data-link-type="dfn" href="#lexeme" id="ref-for-lexeme①">lexemes</a>].</p>
   <p>Every [<a data-link-type="dfn" href="#lexeme" id="ref-for-lexeme②">lexeme</a>] is either a [<a data-link-type="dfn" href="#tokens" id="ref-for-tokens②">token</a>] or it is [<a data-link-type="dfn" href="#trivia" id="ref-for-trivia">trivia</a>].</p>
<pre class="language-.lexical">Lexeme :
  Token
  | Trivia
  ;
</pre>
   <h4 class="heading settled" data-level="2.4.1" id="lex.trivia"><span class="secno">2.4.1. </span><span class="content">Trivia</span><a class="self-link" href="#lex.trivia"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="trivia">Trivia</dfn> are [<a data-link-type="dfn" href="#lexeme" id="ref-for-lexeme③">lexemes</a>] that do not appear in the abstract syntax; they are only part of the lexical grammar.
The presence or absence of [<a data-link-type="dfn" href="#trivia" id="ref-for-trivia①">trivia</a>] in a sequence of [<a data-link-type="dfn" href="#lexeme" id="ref-for-lexeme④">lexemes</a>] has no semantic impact, except where specifically noted in this specification.</p>
<pre class="language-.lexical">Trivia :
  Whitespace
  | Comment
  ;
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> Trivia is either <a data-link-type="dfn" href="#whitespace" id="ref-for-whitespace">whitespace</a> or a <a data-link-type="dfn" href="#comment" id="ref-for-comment">comment</a>.</p>
   <h5 class="heading settled" data-level="2.4.1.1" id="lex.trivia.space"><span class="secno">2.4.1.1. </span><span class="content">Whitespace</span><a class="self-link" href="#lex.trivia.space"></a></h5>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="whitespace">Whitespace</dfn> consists of [<a data-link-type="dfn" href="#horizontal-whitespace" id="ref-for-horizontal-whitespace">horizontal whitespace</a>] and [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break①">line breaks</a>].</p>
<pre class="language-.lexical">Whitespace :
  HorizontalSpace
  | LineBreak
  ;
</pre>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="horizontal-whitespace">Horizontal whitespace</dfn> consists of any sequence of space (U+0020) and horizontal tab (U+0009).</p>
<pre class="language-.lexical">HorizontalSpace : (' ' | '\t')+ ;
</pre>
   <h6 class="heading settled" data-level="2.4.1.1.1" id="lex.trivia.space.line-break"><span class="secno">2.4.1.1.1. </span><span class="content">Line Breaks</span><a class="self-link" href="#lex.trivia.space.line-break"></a></h6>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="line-break">line break</dfn> consists of a line feed (U+000A), carriage return (U+000D) or a carriage return followed by a line feed (U+000D, U+000A).</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="escaped-line-break">escaped line break</dfn> is a backslash (<code>\</code>, U+005C) follow immediately by a [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break②">line break</a>].</p>
   <p>A <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit⑧">source unit</a> is split into <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="lines">lines</dfn>: non-empty sequences of [<a data-link-type="dfn" href="#character" id="ref-for-character②">characters</a>] separated by [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break③">line breaks</a>].</p>
   <p class="note" role="note"><span class="marker">Note:</span> Line breaks are used as <a data-link-type="dfn" href="#lines" id="ref-for-lines">line</a> separators rather than terminators; it is not necessary for a <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit⑨">source unit</a> to end with a line break.</p>
   <h5 class="heading settled" data-level="2.4.1.2" id="lex.trivia.comment"><span class="secno">2.4.1.2. </span><span class="content">Comments</span><a class="self-link" href="#lex.trivia.comment"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="comment">comment</dfn> is either a [<a data-link-type="dfn" href="#line-comment" id="ref-for-line-comment">line comment</a>] or a [<a data-link-type="dfn" href="#block-comment" id="ref-for-block-comment">block comment</a>].</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="line-comment">line comment</dfn> comprises two forward slashes (<code>/</code>, U+002F) followed by zero or more characters that do not contain a [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break④">line break</a>].
A [<a data-link-type="dfn" href="#line-comment" id="ref-for-line-comment①">line comment</a>] extends up to, but does not include, a subsequent [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break⑤">line break</a>] or the end of the <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①⓪">source unit</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="block-comment">block comment</dfn> begins with a forward slash (<code>/</code>, U+002F) followed by an asterisk (<code>*</code>, U+0052).
A [<a data-link-type="dfn" href="#block-comment" id="ref-for-block-comment①">block comment</a>] is terminated by the next instance of an asterisk followed by a forward slash (<code>*/</code>).
A [<a data-link-type="dfn" href="#block-comment" id="ref-for-block-comment②">block comment</a>] contains all [<a data-link-type="dfn" href="#character" id="ref-for-character③">characters</a>] between where it begins and where it terminates, including any [<a data-link-type="dfn" href="#line-break" id="ref-for-line-break⑥">line breaks</a>].</p>
   <p class="note" role="note"><span class="marker">Note:</span> [<a data-link-type="dfn" href="#block-comment" id="ref-for-block-comment③">Block comments</a>] do not nest.</p>
   <p>It is an error if a [<a data-link-type="dfn" href="#block-comment" id="ref-for-block-comment④">block comment</a>] that begins in a [<a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①①">source unit</a>] is not terminated in that [<a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①②">source unit</a>].</p>
   <h4 class="heading settled" data-level="2.4.2" id="lex.token"><span class="secno">2.4.2. </span><span class="content">Tokens</span><a class="self-link" href="#lex.token"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tokens">Tokens</dfn> are lexemes that are significant to the abstract syntax.</p>
<pre class="language-.lexical">Token :
    Identifier
    | Literal
    | Operator
    | Puncutation
;
</pre>
   <h5 class="heading settled" data-level="2.4.2.1" id="lex.token.ident"><span class="secno">2.4.2.1. </span><span class="content">Identifiers</span><a class="self-link" href="#lex.token.ident"></a></h5>
<pre class="language-.lexical">Identifier :
    IdentifierStart IdentifierContinue*
    ;

IdentifierStart :
    [A-Z]
    | [a-z]
    | '_'
    ;

IdentifierContinue :
    IdentifierStart
    | [0-9]
    ;
</pre>
   <p>TODO: <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="identifier">identifier</dfn>.</p>
   <p>The identifier consisting of a single underscore (<code>_</code>) is reserved by the language and must not be used by programs as a name in a declaration or binding.</p>
   <p class="note" role="note"><span class="marker">Note:</span> There are no other fixed keywords or reserved words recognized by the lexical grammar.</p>
   <h5 class="heading settled" data-level="2.4.2.2" id="lex.token.lit"><span class="secno">2.4.2.2. </span><span class="content">Literals</span><a class="self-link" href="#lex.token.lit"></a></h5>
<pre class="language-.lexical">Literal :
    NumericLiteral
    | TextLiteral
    ;
</pre>
   <p>TODO: <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="literal">literal</dfn>, <a data-link-type="dfn" href="#numeric-literal" id="ref-for-numeric-literal">numeric literal</a>.</p>
   <h6 class="heading settled" data-level="2.4.2.2.1" id="lex.token.num"><span class="secno">2.4.2.2.1. </span><span class="content">Numeric Literals</span><a class="self-link" href="#lex.token.num"></a></h6>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="numeric-literal">numeric literal</dfn> is either an [<a data-link-type="dfn" href="#integer-literal" id="ref-for-integer-literal">integer literal</a>] or a [<a data-link-type="dfn" href="#floating-point-literal" id="ref-for-floating-point-literal">floating-point literal</a>].</p>
<pre class="language-.lexical">NumericLiteral :
    IntegerLiteral
    | FloatingPointLiteral
    ;
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="radix-specifier">radix specifier</dfn> is one of:</p>
   <ul>
    <li data-md>
     <p><code>0x</code> or <code>0X</code> to specify a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="hexadecimal-literal">hexadecimal literal</dfn> (radix 16)</p>
    <li data-md>
     <p><code>0b</code> or <code>0B</code> to specify a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="binary-literal">binary literal</dfn> (radix 2)</p>
   </ul>
   <p>When no radix specifier is present, a numeric literal is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="decimal-literal">decimal literal</dfn> (radix 10).</p>
   <p class="note" role="note"><span class="marker">Note:</span>Octal literals (radix 8) are not supported.
A <code>0</code> prefix on an integer literal is not used to specify an octal literal as it does in C.
Implementations might warn on integer literals with a <code>0</code> prefix in case users expect C behavior.</p>
   <p>The grammar of the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="digits">digits</dfn> for a numeric level depend on its radix, as follows:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#digits" id="ref-for-digits">digits</a> of a <a data-link-type="dfn" href="#decimal-literal" id="ref-for-decimal-literal">decimal literal</a> may include <code>0</code> through <code>9</code></p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#digits" id="ref-for-digits①">digits</a> of a <a data-link-type="dfn" href="#hexadecimal-literal" id="ref-for-hexadecimal-literal">hexadecimal literal</a> may include <code>0</code> through <code>9</code>, the letters <code>A</code> through <code>F</code> and <code>a</code> through <code>f</code>. The letters represent digit values 10 through 15.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#digits" id="ref-for-digits②">digits</a> of a <a data-link-type="dfn" href="#binary-literal" id="ref-for-binary-literal">binary literal</a> may include <code>0</code> and <code>1</code></p>
   </ul>
   <p>Digits for all numeric literals may also include <code>_</code>, which are ignored and have no semantic impact.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="numeric-literal-suffix">numeric literal suffix</dfn> consists of any sequence of characters that would be a valid identifier, that does not start with <code>e</code> or <code>E</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A leading <code>-</code> (U+002D) before a numeric literal is <em>not</em> part of the literal, even if there is no whitespace separating the two.</p>
   <h5 class="heading settled" data-level="2.4.2.3" id="lex.token.int"><span class="secno">2.4.2.3. </span><span class="content">Integer Literals</span><a class="self-link" href="#lex.token.int"></a></h5>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="integer-literal">integer literal</dfn> consists of an optional radix specifier followed by digits and an optional <a data-link-type="dfn" href="#numeric-literal-suffix" id="ref-for-numeric-literal-suffix">numeric literal suffix</a>.</p>
   <p>The suffix on an integer literal may be used to indicate the desired type of the literal:</p>
   <ul>
    <li data-md>
     <p>A <code>u</code> suffix indicates the <code>UInt</code> type</p>
    <li data-md>
     <p>An <code>l</code> or <code>ll</code> suffix indicates the <code>Int64</code> type</p>
    <li data-md>
     <p>A <code>ul</code> or <code>ull</code> suffix indicates the <code>UInt64</code> type</p>
   </ul>
   <h5 class="heading settled" data-level="2.4.2.4" id="lex.token.float"><span class="secno">2.4.2.4. </span><span class="content">Floating-Point Literals</span><a class="self-link" href="#lex.token.float"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="floating-point-literal">floating-point literal</dfn> consists of either</p>
   <ul>
    <li data-md>
     <p>An optional <a data-link-type="dfn" href="#radix-specifier" id="ref-for-radix-specifier">radix specifier</a>, followed by digits, followed by a <code>.</code> (U+002E), followed by optional digits, an optional <a data-link-type="dfn" href="#exponent" id="ref-for-exponent">exponent</a>, and an optional numeric literal suffix.</p>
    <li data-md>
     <p>An optional <a data-link-type="dfn" href="#radix-specifier" id="ref-for-radix-specifier①">radix specifier</a>, followed by digits, an exponent, and an optional numeric literal suffix.</p>
    <li data-md>
     <p>A <code>.</code> (U+002E) followed by digits, an optional exponent, and an optional numeric literal suffix.</p>
   </ul>
   <p>A floating-point literal may only use dexicmal or hexadecimal radix.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="exponent">exponent</dfn> of a floating-pointer literal consists of either <code>e</code> or <code>E</code>, followed by an optional <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="sign">sign</dfn> of <code>+</code> or <code>-</code>, followed by decimal digits.</p>
   <p>TODO: <a data-link-type="dfn" href="#sign" id="ref-for-sign">sign</a>.</p>
   <h4 class="heading settled" data-level="2.4.3" id="lex.token.text"><span class="secno">2.4.3. </span><span class="content">Text Literals</span><a class="self-link" href="#lex.token.text"></a></h4>
   <p class="issue" id="issue-9b572b04"><a class="self-link" href="#issue-9b572b04"></a> Need to document supported escape sequences.</p>
   <h5 class="heading settled" data-level="2.4.3.1" id="lex.token.string"><span class="secno">2.4.3.1. </span><span class="content">String Literals</span><a class="self-link" href="#lex.token.string"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="string-literal">string literal</dfn> consists of a sequence of characters enclosed between two <code>"</code>, with the constraint that any <code>"</code> within the sequence must be escaped with <code>\</code>.</p>
   <p>TODO: <a data-link-type="dfn" href="#string-literal" id="ref-for-string-literal">string literal</a></p>
   <h5 class="heading settled" data-level="2.4.3.2" id="lex.token.char"><span class="secno">2.4.3.2. </span><span class="content">Character Literals</span><a class="self-link" href="#lex.token.char"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="character-literal">character literal</dfn> consists of a sequence of characters enclosed between two <code>'</code>, with the constraint that any <code>'</code> within the sequence must be escaped with <code>\</code>.</p>
   <p>The sequence of characters within a <a data-link-type="dfn" href="#character-literal" id="ref-for-character-literal">character literal</a> must represent a single character.</p>
   <h3 class="heading settled" data-level="2.5" id="lex.token.punctuation"><span class="secno">2.5. </span><span class="content">Operators and Punctuation</span><a class="self-link" href="#lex.token.punctuation"></a></h3>
   <p>The following table defines tokens that are used as operators and punctuation in the syntax.
When a given sequence of characters could be interpreted as starting with more than one of the following tokens, the longest matching token is used.
The name or names given to tokens by this table may be used in the rest of this document to refer to those tokens.</p>
<pre class="language-.lexical">
Punctuation :
  | `(`     // left parenthesis
  | `)`     // right parenthesis
  | `[`     // left square bracket, opening square bracket
  | `]`     // right square bracket, closing square bracket
  | `{`    // left curly brace, opening curly brace
  | `}`    // right curly brace, closing curly brace
  | `;`     // semicolon
  | `:`     // colon
  | `,`     // comma
  | `.`     // dot
  | `...`   // ellipsis
  | `::`    // double colon, scope operator
  | `->`    // arrow
    ;

Operator :
  | ```     // backtick
  | `!`     // exclamation mark
  | `@`     // at sign
  | `$`     // dollar sign
  | `%`     // percent sign
  | `~`     //tilde
  | `^`     // caret
  | `&amp;`     // ampersand
  | `*`     // asterisk, multiplication operator
  | `-`     // minus sign, subtraction operator
  | `=`     // equals sign, assignment operator
  | `+`     // plus sign, addition operator
  | `|`     // pipe
  | `&lt;`     // less-than sign, less-than operator
  | `>`     // greater-than sign, greater-than operator
  | `/`     // slash, division operator
  | `?`     // question mark
  | `==`    // double-equals, equal-to operator
  | `!=`    // not-equal operator
  | `%=`    // modulo-assign operator
  | `+=`    // add-assign operator
  | `^=`    // xor-assign operator
  | `&amp;=`    // and-assign operator
  | `*=`    // multiply-assign operator
  | `-=`    // subtract-assign operator
  | `|=`    // or-assign operator
  | `&lt;=`    // less-than-or-equal-to operator
  | `>=`    // greater-than-or-equal-to operator
  | `/=`    // divide-assign operator
  | `&amp;&amp;`    // and-and operator
  | `--`    // decrement operator
  | `++`    // increment operator
  | `||`    // or-or operator
  | `&lt;&lt;`    // left shift operator
  | `>>`    // right shift operator
    ;

</pre>
   <h3 class="heading settled" data-level="2.6" id="lex.token.trivia"><span class="secno">2.6. </span><span class="content">Associating Trivia With Tokens</span><a class="self-link" href="#lex.token.trivia"></a></h3>
   <p class="issue" id="issue-86d596e4"><a class="self-link" href="#issue-86d596e4"></a> We should define lexing in terms of producing a sequence of tokens-with-trivia instead of just lexemes.</p>
   <p>Each token in a source unit may be prededed or followed by trivia:</p>
<pre class="language-.lexical">TokenWithTrivia =
  LeadingTrivia Token TrailingTrivia

LeadingTrivia = Trivia*

TrailingTrivia = (Trivia - LineBreak)* LineBreak?
</pre>
   <p>A compiler implementation must use the "maximal munch" rule when lexing, so that each <em>TokenWithTrivia</em> includes as many characters of <em>TrailingTrivia</em> as possible.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Informally, the trailing trivia of a token is all the trivia up to the next line break, the next token, or the end of the source unit - whichever comes first.
The leading trivia of a token starts immediately after the trailing trivia of the preceding token, or at the beginning of the file if there is no preceding token.</p>
   <p>Lexing decomposes a source unit into a sequence of zero or more tokens with trivia, as well as zero or more pieces of trivia that do not belong to any token:</p>
<pre class="language-.lexical">LexicalSourceUnit =
  TokenWithTrivia* Trivia*
</pre>
   <p>The terminals of the context-free grammar should be understood to be tokens with trivia.
A reference to a nonterminal <var>N</var> in productions for the abstract syntax should be understood as matching the <em>TokenWithTrivia</em> rule, restricted to the case where the contained token is <var>N</var>.</p>
   <p class="issue" id="issue-f4fa2ee1"><a class="self-link" href="#issue-f4fa2ee1"></a> We should probably make a dedicated <strong>EOF</strong> be part of the alphabet for input source units, so that the <em>LexicalSourceUnit</em> can be simpler to define.
E.g., "The alphabet of the lexical grammar comprises all Unicode scalar values, as well as the unique meta-value <strong>EOF</strong>."</p>
   <h2 class="heading settled" data-level="3" id="prepro"><span class="secno">3. </span><span class="content">Preprocessor</span><a class="self-link" href="#prepro"></a></h2>
   <p>As the last phase of lexical processing the token sequence of a <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①③">source unit</a> is preprocessed to produce a new token stream.</p>
   <p>The preprocessor supported by Slang is derived from the C/C++ preprocessor with a few changes and extensions.</p>
   <p class="issue" id="issue-c15d86ec"><a class="self-link" href="#issue-c15d86ec"></a> We either need to pick a normative reference here for some existing preprocessor (and thus bind ourselves to eventually supporting the semantics of that normative reference), or we need to take the time to fully document what the semantics of our current preprocessor are.</p>
   <p>Slang programs may use the following preprocessor directives, with the same semantics as their C/C++ equivalent:</p>
   <ul>
    <li data-md>
     <p><code>#include</code></p>
    <li data-md>
     <p><code>#define</code></p>
    <li data-md>
     <p><code>#undef</code></p>
    <li data-md>
     <p><code>#if</code>, <code>#ifdef</code>, <code>#ifndef</code></p>
    <li data-md>
     <p><code>#else</code>, <code>#elif</code></p>
    <li data-md>
     <p><code>#endif</code></p>
    <li data-md>
     <p><code>#error</code></p>
    <li data-md>
     <p><code>#warning</code></p>
    <li data-md>
     <p><code>#line</code></p>
    <li data-md>
     <p><code>#pragma</code></p>
   </ul>
   <p>An implementation may use any implementation-specified means to resolve paths provided to <code>#include</code> directives.</p>
   <p>An implementation that supports <code>#pragma  once</code> may use any implementation-specified means to determine if two <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①④">source units</a> are identical.</p>
   <h3 class="heading settled" data-level="3.1" id="prepro.changes"><span class="secno">3.1. </span><span class="content">Changes</span><a class="self-link" href="#prepro.changes"></a></h3>
   <p>The input to the Slang preprocessor is a token sequence produced by the rules in Chapter 2, and does not use the definition of "preprocessor tokens" as they are used by the C/C++ preprocessor.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The key place where this distinction matters is in macros that perform token pasting.
The input to the Slang preprocessor has to be a valid sequence of tokens <em>before</em> any token pasting occurs.</p>
   <p>When tokens are pasted with the <code>##</code> operator, the resulting concatenated text is decomposed into one or more new tokens.
It is an error if the concatenated text does not form a valid sequence of tokens.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The C/C++ preprocessor always yields a single token from any token pasting, whether or not that token is valid.</p>
   <h3 class="heading settled" data-level="3.2" id="prepro.extensions"><span class="secno">3.2. </span><span class="content">Extensions</span><a class="self-link" href="#prepro.extensions"></a></h3>
   <p class="issue" id="issue-29446511"><a class="self-link" href="#issue-29446511"></a> At the very least we need to document support for the GLSL <code>#version</code> directive, if we intend to keep it.</p>
   <h2 class="heading settled" data-level="4" id="parse"><span class="secno">4. </span><span class="content">Parsing</span><a class="self-link" href="#parse"></a></h2>
   <div class="issue" id="issue-29cd4b9f">
    <a class="self-link" href="#issue-29cd4b9f"></a> The intention of this chapter is to establish the overall rules for the recursive-descent <a data-link-type="dfn" href="#parsing" id="ref-for-parsing">parsing</a> strategy needed for Slang’s grammar. 
    <p>Slang attempts to thread the needle by supporting the familiar C-like syntax of existing shading languages, while also support out-of-order declarations.
The parsing strategy is necessarily complicated as a result, but we hope to isolate most of the details to this chapter so that the grammar for each construct can be presented in its simplest possible fashion.</p>
   </div>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parsing">Parsing</dfn> is the process of matching a sequence of tokens from the lexical grammar with a rule of the abstract syntax grammar.</p>
   <h3 class="heading settled" data-level="4.1" id="parse.context"><span class="secno">4.1. </span><span class="content">Contexts</span><a class="self-link" href="#parse.context"></a></h3>
   <p>Parsing is always performed with respect to a <a data-link-type="dfn" href="#context" id="ref-for-context">context</a>, which determines which identifiers are bound, and what they are bound to.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initial-context">initial context</dfn> for parsing includes bindings for syntax rules corresponding to each declaration, statement, and expression keyword defined in this specification.</p>
   <p class="note" role="note"><span class="marker">Note:</span> For example, an <code>if</code> expression begins with the <code>if</code> keyword, so the <a data-link-type="dfn" href="#initial-context" id="ref-for-initial-context">initial context</a> contains a binding for the identifier <code>if</code> to a syntax rule that parses an <code>if</code> expression.</p>
   <p>The initial context also includes bindings for the declarations in the Slang standard library.
Implementations may include additional bindings in the initial context.</p>
   <h3 class="heading settled" data-level="4.2" id="parse.strat"><span class="secno">4.2. </span><span class="content">Strategies</span><a class="self-link" href="#parse.strat"></a></h3>
   <p>Parsing is always performed in one of two modes: <a data-link-type="dfn" href="#unordered" id="ref-for-unordered">unordered</a> or <a data-link-type="dfn" href="#ordered" id="ref-for-ordered">ordered</a>.
Unless otherwise specified, each grammar rule matches its sub-rules in the same mode.</p>
   <h4 class="heading settled" data-level="4.2.1" id="parse.strat.ordered"><span class="secno">4.2.1. </span><span class="content">Ordered</span><a class="self-link" href="#parse.strat.ordered"></a></h4>
   <p>Parsing in <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ordered">ordered</dfn> mode interleaves parsing and semantic analysis.
When the parser is in ordered mode and is about to parse a <a data-link-type="dfn" href="#declaration" id="ref-for-declaration">declaration</a>, <a data-link-type="dfn" href="#statement" id="ref-for-statement">statement</a>, or <a data-link-type="dfn" href="#expressions" id="ref-for-expressions①">expression</a>, and the lookahead is an Identifier, it first looks up that identifier in the context.</p>
   <ul>
    <li data-md>
     <p>If the identifier is bound to a syntax rule <var>s</var>, then the parser attempts to match the corresponding production in the grammar given here.</p>
    <li data-md>
     <p>Otherwise, the parser first matches a <a data-link-type="dfn" href="#term" id="ref-for-term">term</a>, and then based on whether the result of checking that term is a <a data-link-type="dfn" href="#type" id="ref-for-type④">type</a> or an <a data-link-type="dfn" href="#expressions" id="ref-for-expressions②">expression</a>, it either considers only productions starting with a <a data-link-type="dfn" href="#type-expression" id="ref-for-type-expression">type expression</a> or those starting with an <a data-link-type="dfn" href="#expressions" id="ref-for-expressions③">expression</a>.</p>
   </ul>
   <p>If the parser is in ordered mode and is about to parse a <a data-link-type="dfn" href="#declaration-bodies" id="ref-for-declaration-bodies">declaration body</a>, it switches to unordered mode before parsing the body, and switches back to ordered mode afterward.</p>
   <h4 class="heading settled" data-level="4.2.2" id="parse.strat.unordered"><span class="secno">4.2.2. </span><span class="content">Unordered</span><a class="self-link" href="#parse.strat.unordered"></a></h4>
   <p>In <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unordered">unordered</dfn> mode, semantic analysis is deferred.</p>
   <p>When the parser is in unordered mode and is about to parse a <a data-link-type="dfn" href="#declaration" id="ref-for-declaration①">declaration</a>, and the lookahead is an Identifier, it first looks up that identifier in the context.</p>
   <ul>
    <li data-md>
     <p>If the identifier is bound to a syntax rule <var>s</var>, then the parser attempts to match the corresponding production in the grammar given here.</p>
    <li data-md>
     <p>Otherwise, it considers only productions that start with a <a data-link-type="dfn" href="#type-specifiers" id="ref-for-type-specifiers">type specifier</a>.</p>
   </ul>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="balanced-tokens">Balanced tokens</dfn> are those that match the following production:</p>
<pre class="language-.syntax">BalancedTokens :
    BalancedToken*

BalancedToken :
    `{` BalancedTokens `}`
    | `(` BalancedTokens `)`
    | `[` BalancedTokens `]`
    | /* any token other than `{`, `}`, `(`, `)`, `[`, `]` */
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="balanced">balanced</dfn> rule in the grammar is one that meets one of the following criteria:</p>
   <ul>
    <li data-md>
     <p>starts with a <code>{</code> and ends with a <code>}</code></p>
    <li data-md>
     <p>starts with a <code>(</code> and ends with a <code>)</code></p>
    <li data-md>
     <p>starts with a <code>[</code> and ends with a <code>]</code></p>
   </ul>
   <p>Whenever the parser is in ordered mode and would attempt to match a <a data-link-type="dfn" href="#balanced" id="ref-for-balanced">balanced</a> rule <var>r</var>, it instead matches the <a data-link-type="dfn" href="#balanced-tokens" id="ref-for-balanced-tokens">balanced token</a> rule and saves the token sequence that was matched.
Those tokens are then matched against <var>r</var> as part of semantic analysis, using the context that the checking rules specify.</p>
   <h3 class="heading settled" data-level="4.3" id="parse.angle"><span class="secno">4.3. </span><span class="content">Angle Brackets</span><a class="self-link" href="#parse.angle"></a></h3>
   <h4 class="heading settled" data-level="4.3.1" id="parse.angle.open"><span class="secno">4.3.1. </span><span class="content">Opening Angle Brackets</span><a class="self-link" href="#parse.angle.open"></a></h4>
   <h5 class="heading settled" data-level="4.3.1.1" id="parse.angle.open.ordered"><span class="secno">4.3.1.1. </span><span class="content">Ordered Mode</span><a class="self-link" href="#parse.angle.open.ordered"></a></h5>
   <p>If the parser is in ordered mode with a lookahead of <code>&lt;</code>, and it could match that token as part of either an <a data-link-type="dfn" href="#infix-expression" id="ref-for-infix-expression">infix expression</a> or a <a data-link-type="dfn" href="#specialize-expression" id="ref-for-specialize-expression">specialize expression</a>, then it considers the term that has been matched so far:</p>
   <ul>
    <li data-md>
     <p>If the term has a generic type or overloaded type, then the <a data-link-type="dfn" href="#specialize-expression" id="ref-for-specialize-expression①">specialize expression</a> case is favored.</p>
    <li data-md>
     <p>Otherwise the <a data-link-type="dfn" href="#infix-expression" id="ref-for-infix-expression①">infix expression</a> case is favored.</p>
   </ul>
   <h5 class="heading settled" data-level="4.3.1.2" id="parse.angle.open.unordered"><span class="secno">4.3.1.2. </span><span class="content">Unordered Mode</span><a class="self-link" href="#parse.angle.open.unordered"></a></h5>
   <p>If the parser is in ordered mode with a lookahead of <code>&lt;</code>, and it could match that token as part of either an <a data-link-type="dfn" href="#infix-expression" id="ref-for-infix-expression②">infix expression</a> or a <a data-link-type="dfn" href="#specialize-expression" id="ref-for-specialize-expression②">specialize expression</a>, then it first attempts to match the <a data-link-type="dfn" href="#generic-arguments" id="ref-for-generic-arguments">generic arguments</a> rule. If that rule is matched successfully, then the new lookahead token is inspected:</p>
   <ul>
    <li data-md>
     <p>If the lookahead token is an <a data-link-type="dfn" href="#identifier" id="ref-for-identifier">identifier</a>, <code>(</code>, <a data-link-type="dfn" href="#literal" id="ref-for-literal">literal</a>, or <a data-link-type="dfn" href="#prefix-operator" id="ref-for-prefix-operator">prefix operator</a>, then roll back to before the <code>&lt;</code> was matched and favor the <a data-link-type="dfn" href="#infix-expression" id="ref-for-infix-expression③">infix expression</a> rule.</p>
    <li data-md>
     <p>Otherwise, use the generic arguments already matched as part of matching the <a data-link-type="dfn" href="#specialize-expression" id="ref-for-specialize-expression③">specialize expression</a> rule.</p>
   </ul>
   <h4 class="heading settled" data-level="4.3.2" id="parse.angle.close"><span class="secno">4.3.2. </span><span class="content">Closing Angle Brackets</span><a class="self-link" href="#parse.angle.close"></a></h4>
   <p>If the parser is attempting to match the closing <code>></code> in the <a data-link-type="dfn" href="#generic-parameters" id="ref-for-generic-parameters">generic parameters</a> or <a data-link-type="dfn" href="#generic-arguments" id="ref-for-generic-arguments①">generic arguments</a> rules, and the lookahead is any token other than <code>></code> that starts with a <code>></code> character (<code>>=</code>, <code>>></code>, or <code>>>=</code>), then it splits the opening <code>></code> off and matches it, replacing the lookahead with a token comprised of the remaining characters (<code>=</code>, <code>></code>, or <code>>=</code>).</p>
   <h2 class="heading settled" data-level="5" id="section.type"><span class="secno">5. </span><span class="content">Types and Values</span><a class="self-link" href="#section.type"></a></h2>
   <div class="issue" id="issue-822bf595">
    <a class="self-link" href="#issue-822bf595"></a> 
    <ul>
     <li data-md>
      <p>An integer value</p>
     <li data-md>
      <p>A floating-point value</p>
     <li data-md>
      <p>A string value</p>
     <li data-md>
      <p>A code point value</p>
     <li data-md>
      <p>A Boolean value</p>
    </ul>
    <p>A composite value is one of:</p>
    <ul>
     <li data-md>
      <p>A tuple value</p>
     <li data-md>
      <p>An array-like value</p>
     <li data-md>
      <p>A structure value</p>
     <li data-md>
      <p>An <code>enum</code> value</p>
    </ul>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type">type</dfn> is a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="values">values</dfn>;
the values in that set are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="instances">instances</dfn> of the type.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A given <a data-link-type="dfn" href="#values" id="ref-for-values①">value</a> might be an <a data-link-type="dfn" href="#instances" id="ref-for-instances">instance</a> of zero or more <a data-link-type="dfn" href="#type" id="ref-for-type⑤">types</a>. We avoid saying that a value <em>has</em> some type, except in cases where there is an "obviously right" type for such a value.</p>
<pre class="language-.semantics">Value :=
  ImplicitlyTypedValue
  | UntypedValue

TypedValue :=
  ImplicitlyTypedValue
  | ExplicitlyTypedValue

ExplicitlyTypedValue := UntypedValue `:` Type

ImplicitlyTypedValue := /* TODO */

UntypedValue := /* TODO */
</pre>
   <h3 class="heading settled" data-level="5.1" id="value.level"><span class="secno">5.1. </span><span class="content">Level</span><a class="self-link" href="#value.level"></a></h3>
   <p>Every <a data-link-type="dfn" href="#values" id="ref-for-values②">value</a> has a positive integer <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="level">level</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Typical values that a Slang program calculates and works with have <a data-link-type="dfn" href="#level" id="ref-for-level">level</a> zero.</p>
   <h3 class="heading settled" data-level="5.2" id="type.type"><span class="secno">5.2. </span><span class="content">Types of Types</span><a class="self-link" href="#type.type"></a></h3>
   <p>A <a data-link-type="dfn" href="#type" id="ref-for-type⑥">type</a> is itself a <a data-link-type="dfn" href="#values" id="ref-for-values③">value</a>.</p>
   <p>The level of a <a data-link-type="dfn" href="#type" id="ref-for-type⑦">type</a> is one greater than the maximum of zero and the maximum level of the instances of that type.</p>
   <p class="note" role="note"><span class="marker">Note:</span> It is impossible for a type to be an instance of itself.</p>
   <p>A <a data-link-type="dfn" href="#type" id="ref-for-type⑧">type</a> whose instances are all <a data-link-type="dfn" href="#values" id="ref-for-values④">values</a> with <a data-link-type="dfn" href="#level" id="ref-for-level①">level</a> zero is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="proper-type">proper type</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Most of what a programmer thinks of as types are <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type">proper types</a>. The <a data-link-type="dfn" href="#level" id="ref-for-level②">level</a> of a <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type①">proper type</a> will always be one.</p>
   <p>A <a data-link-type="dfn" href="#type" id="ref-for-type⑨">type</a> whose instances are <a data-link-type="dfn" href="#type" id="ref-for-type①⓪">types</a> with <a data-link-type="dfn" href="#level" id="ref-for-level③">level</a> one is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="kind">kind</dfn>.</p>
   <p>The <a data-link-type="dfn" href="#kind" id="ref-for-kind">kind</a> <code>Type</code> is the <a data-link-type="dfn" href="#kind" id="ref-for-kind①">kind</a> of all <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type②">proper types</a>.</p>
   <p>A <a data-link-type="dfn" href="#type" id="ref-for-type①①">type</a> whose instances are <a data-link-type="dfn" href="#type" id="ref-for-type①②">types</a> with <a data-link-type="dfn" href="#level" id="ref-for-level④">level</a> two is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="sort">sort</dfn>.</p>
   <p>The <a data-link-type="dfn" href="#sort" id="ref-for-sort">sort</a> <code>Kind</code> is the <a data-link-type="dfn" href="#sort" id="ref-for-sort①">sort</a> of all <a data-link-type="dfn" href="#kind" id="ref-for-kind②">kinds</a>.</p>
   <h3 class="heading settled" data-level="5.3" id="type.scalar"><span class="secno">5.3. </span><span class="content">Scalars</span><a class="self-link" href="#type.scalar"></a></h3>
   <p>All scalar values have <a data-link-type="dfn" href="#level" id="ref-for-level⑤">level</a> zero.</p>
   <h4 class="heading settled" data-level="5.3.1" id="type.unit"><span class="secno">5.3.1. </span><span class="content">Unit</span><a class="self-link" href="#type.unit"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="unit-type">unit type</dfn>, named <a data-link-type="dfn" href="#unit-type" id="ref-for-unit-type⑥"><code>Unit</code></a>, has a single instance: the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="unit-value">unit value</dfn>.
The name <code>void</code> is an alias for the unit type.</p>
   <h4 class="heading settled" data-level="5.3.2" id="type.bool"><span class="secno">5.3.2. </span><span class="content">Booleans</span><a class="self-link" href="#type.bool"></a></h4>
   <p>The type <code>Bool</code> has two instances: <code>true</code> and <code>false</code>.</p>
   <h4 class="heading settled" data-level="5.3.3" id="type.scalar.numeric"><span class="secno">5.3.3. </span><span class="content">Numeric Scalars</span><a class="self-link" href="#type.scalar.numeric"></a></h4>
   <h5 class="heading settled" data-level="5.3.3.1" id="type.scalar.numeric.int"><span class="secno">5.3.3.1. </span><span class="content">Integers</span><a class="self-link" href="#type.scalar.numeric.int"></a></h5>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="integer-types">integer types</dfn> are:</p>
   <table>
    <tbody>
     <tr>
      <th>Type
      <th>Kind
     <tr>
      <td><code>Int8</code>
      <td>8-bit signed integer type
     <tr>
      <td><code>Int16</code>
      <td>16-bit signed integer type
     <tr>
      <td><code>Int32</code>
      <td>32-bit signed integer type
     <tr>
      <td><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="int64"><code>Int64</code></dfn>
      <td>64-bit signed integer type
     <tr>
      <td><code>UInt8</code>
      <td>8-bit unsigned integer type
     <tr>
      <td><code>UInt16</code>
      <td>16-bit unsigned integer type
     <tr>
      <td><code>UInt32</code>
      <td>32-bit unsigned integer type
     <tr>
      <td><code>UInt64</code>
      <td>64-bit unsigned integer type
   </table>
   <p>An <a data-link-type="dfn" href="#integer-types" id="ref-for-integer-types">integer type</a> is either signed or unsigned.
An integer type has a bit width.</p>
   <p>Signed integer types use two’s complement representation.
Arithmetic operations on values of integer type (both signed and unsigned) wrap on overflow/underflow.</p>
   <p>The name <code>Int</code> is an alias for the type <code>Int32</code>.
The name <code>UInt</code> is an alias for the type <code>UInt32</code>.</p>
   <h5 class="heading settled" data-level="5.3.3.2" id="type.scalar.numeric.float"><span class="secno">5.3.3.2. </span><span class="content">Floating-Point Numbers</span><a class="self-link" href="#type.scalar.numeric.float"></a></h5>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="floating-point-types">floating-point types</dfn> are:</p>
   <table>
    <tbody>
     <tr>
      <th>Type
      <th>Kind
      <th>IEEE 754 Format
     <tr>
      <td><code>Float16</code>
      <td>16-bit floating-point type
      <td><code>binary16</code>
     <tr>
      <td><code>Float32</code>
      <td>32-bit floating-point type
      <td><code>binary16</code>
     <tr>
      <td><code>Float64</code>
      <td>64-bit floating-point type
      <td><code>binary16</code>
   </table>
   <p>All <a data-link-type="dfn" href="#floating-point-types" id="ref-for-floating-point-types">floating-point types</a> are signed.
A floating-point type has a bit width.</p>
   <p>A <a data-link-type="dfn" href="#floating-point-types" id="ref-for-floating-point-types①">floating-point type</a> has a corresponding IEEE 754 format.
The instances of a floating-point type are all the values of its IEEE 754 format.</p>
   <p>The name <code>Float</code> is an alias for the <code>Float32</code> type.</p>
   <h4 class="heading settled" data-level="5.3.4" id="type.text"><span class="secno">5.3.4. </span><span class="content">Text</span><a class="self-link" href="#type.text"></a></h4>
   <h5 class="heading settled" data-level="5.3.4.1" id="type.text.unicode-scalar-value"><span class="secno">5.3.4.1. </span><span class="content">Unicode Scalar Values</span><a class="self-link" href="#type.text.unicode-scalar-value"></a></h5>
   <p class="issue" id="issue-639bc216"><a class="self-link" href="#issue-639bc216"></a> Need to write this section.</p>
   <h5 class="heading settled" data-level="5.3.4.2" id="type.text.char"><span class="secno">5.3.4.2. </span><span class="content">Characters</span><a class="self-link" href="#type.text.char"></a></h5>
   <p class="issue" id="issue-639bc216①"><a class="self-link" href="#issue-639bc216①"></a> Need to write this section.</p>
   <h5 class="heading settled" data-level="5.3.4.3" id="type.text.string"><span class="secno">5.3.4.3. </span><span class="content">Strings</span><a class="self-link" href="#type.text.string"></a></h5>
   <p class="issue" id="issue-639bc216②"><a class="self-link" href="#issue-639bc216②"></a> Need to write this section.</p>
   <h3 class="heading settled" data-level="5.4" id="type.sequence.finite"><span class="secno">5.4. </span><span class="content">Finite Sequences</span><a class="self-link" href="#type.sequence.finite"></a></h3>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="element-count">element count</dfn> of a finite sequence is the number of elements in it.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="element-type">element type</dfn> of a homogeneous sequence is the type of elements in it.</p>
   <p>The <a data-link-type="dfn" href="#level" id="ref-for-level⑥">level</a> of a sequence is the level of its <a data-link-type="dfn" href="#element-type" id="ref-for-element-type">element type</a>.</p>
<pre class="language-.semantics">Sequence := `{` (Value `,`)* `}`
</pre>
   <h3 class="heading settled" data-level="5.5" id="type.array"><span class="secno">5.5. </span><span class="content">Array Types</span><a class="self-link" href="#type.array"></a></h3>
<pre class="language-.semantics">ArrayType := elementType:Type `[` elementCount:Int `]`
</pre>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="array">array</dfn> is a finite homogenous sequence.
An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="array-type">array type</dfn> <var>T</var><code>[</code><var>N</var><code>]</code> is the type of <var>N</var>-element <a data-link-type="dfn" href="#array" id="ref-for-array">arrays</a> with elements of type <var>T</var>.</p>
   <p>The <a data-link-type="dfn" href="#element-count" id="ref-for-element-count">element count</a> of an <a data-link-type="dfn" href="#array-type" id="ref-for-array-type">array type</a> must be a non-negative <code>Int</code>.</p>
   <h3 class="heading settled" data-level="5.6" id="type.vector"><span class="secno">5.6. </span><span class="content">Vectors</span><a class="self-link" href="#type.vector"></a></h3>
<pre class="language-.semantics">VectorType := `Vector` `&lt;` elementType:Type `,` elementCount:Int `>`
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="vector">vector</dfn> is a finite homogenous sequence.
The <a data-link-type="dfn" href="#element-type" id="ref-for-element-type①">element type</a> of a vector must be a scalar numeric type.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="vector-type">vector type</dfn> <code>Vector&lt;</code><var>T</var><code>,</code><var>N</var><code>></code> is the type of <a data-link-type="dfn" href="#vector" id="ref-for-vector">vectors</a> with <var>N</var> elements of type <var>T</var>.</p>
   <p>The <a data-link-type="dfn" href="#element-count" id="ref-for-element-count①">element count</a> of a <a data-link-type="dfn" href="#vector-type" id="ref-for-vector-type">vector type</a> must be a non-negative <code>Int</code>.</p>
   <h3 class="heading settled" data-level="5.7" id="type.matrix"><span class="secno">5.7. </span><span class="content">Matrices</span><a class="self-link" href="#type.matrix"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="matrix">matrix</dfn> is a finite homogenous sequence.
The <a data-link-type="dfn" href="#element-type" id="ref-for-element-type②">element type</a> of a <a data-link-type="dfn" href="#matrix" id="ref-for-matrix">matrix</a> must be a <a data-link-type="dfn" href="#vector-type" id="ref-for-vector-type①">vector type</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="rows">rows</dfn> of a matrix are its elements.
The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="row-type">row type</dfn> of a matrix is its <a data-link-type="dfn" href="#element-type" id="ref-for-element-type③">element type</a>.
The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="row-count">row count</dfn> of a matrix is its <a data-link-type="dfn" href="#element-count" id="ref-for-element-count②">element count</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scalar-type">scalar type</dfn> of a matrix is the <a data-link-type="dfn" href="#element-type" id="ref-for-element-type④">element type</a> of its <a data-link-type="dfn" href="#element-type" id="ref-for-element-type⑤">element type</a>.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="column-count">column count</dfn> of a matrix is the <a data-link-type="dfn" href="#element-count" id="ref-for-element-count③">element count</a> of its <a data-link-type="dfn" href="#row-type" id="ref-for-row-type">row type</a>.
The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="column-type">column type</dfn> of a matrix with <a data-link-type="dfn" href="#scalar-type" id="ref-for-scalar-type">scalar type</a> <var>T</var> and <a data-link-type="dfn" href="#column-count" id="ref-for-column-count">column count</a> <var>C</var> is <code>Vec&lt;</code>T<code>,</code><var>C</var><code>></code></p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="matrix-type">matrix type</dfn> <code>Matrix&lt;</code><var>T</var><code>,</code><var>R</var><code>,</code><var>C</var><code>></code> is the type of matrices with <var>R</var> <a data-link-type="dfn" href="#rows" id="ref-for-rows">rows</a> of type <code>Vector&lt;</code><var>C</var><code>,</code><var>T</var><code>></code>.</p>
   <h3 class="heading settled" data-level="5.8" id="type.never"><span class="secno">5.8. </span><span class="content">The <code>Never</code> Type</span><a class="self-link" href="#type.never"></a></h3>
<pre class="language-.semantics">NeverType := `Never`
</pre>
   <p>The type <code>Never</code> has no instances.</p>
   <h3 class="heading settled" data-level="5.9" id="decl.ref"><span class="secno">5.9. </span><span class="content">Declaration References</span><a class="self-link" href="#decl.ref"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="declaration-reference">declaration reference</dfn> is a <a data-link-type="dfn" href="#values" id="ref-for-values⑤">value</a> that refers to some <a data-link-type="dfn" href="#declaration" id="ref-for-declaration②">declaration</a>.</p>
<pre class="language-.semantics">DeclarationReference :=
  DirectDeclarationReference
  | MemberDeclarationReference
  | SpecializedDeclarationReference
</pre>
   <h4 class="heading settled" data-level="5.9.1" id="decl.ref.direct"><span class="secno">5.9.1. </span><span class="content">Direct Declaration References</span><a class="self-link" href="#decl.ref.direct"></a></h4>
   <p>A <a data-link-type="dfn" href="#declaration" id="ref-for-declaration③">declaration</a> serves as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="direct-declaration-reference">direct declaration reference</dfn> to itself.</p>
<pre class="language-.semantics">DirectDeclarationReference := Declaration
</pre>
   <h4 class="heading settled" data-level="5.9.2" id="decl.ref.member"><span class="secno">5.9.2. </span><span class="content">Member Declaration Reference</span><a class="self-link" href="#decl.ref.member"></a></h4>
<pre class="language-.semantics">MemberDeclarationReference := base:DeclarationReference `::` member:Declaration
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="member-declaration-reference">member declaration reference</dfn> refers to some <em>member</em> <a data-link-type="dfn" href="#declaration" id="ref-for-declaration④">declaration</a> of a base <a data-link-type="dfn" href="#declaration-reference" id="ref-for-declaration-reference">declaration reference</a>.
A <a data-link-type="dfn" href="#member-declaration-reference" id="ref-for-member-declaration-reference">member declaration reference</a> must satisfy the following constraints:</p>
   <ul>
    <li data-md>
     <p>The <em>base</em> must refer to a declaration with members (TODO: make this precise)</p>
    <li data-md>
     <p>The <em>member</em> must be a direct member declaration of the <em>base</em></p>
   </ul>
   <h4 class="heading settled" data-level="5.9.3" id="decl.ref.specialize"><span class="secno">5.9.3. </span><span class="content">Specialized Declaration Reference</span><a class="self-link" href="#decl.ref.specialize"></a></h4>
<pre class="language-.semantics">SpecializedDeclarationReference := base:Value `&lt;` (arguments:Value `,`)* `>`
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="specialized-declaration-reference">specialized declaration reference</dfn> refers to a specialization of some generic declaration.
A <a data-link-type="dfn" href="#specialized-declaration-reference" id="ref-for-specialized-declaration-reference">specialized declaration reference</a> must satisfy the following constraints:</p>
   <ul>
    <li data-md>
     <p>The <em>base</em> must refer to a generic declaration</p>
    <li data-md>
     <p>The <em>base</em> must not be a <a data-link-type="dfn" href="#specialized-declaration-reference" id="ref-for-specialized-declaration-reference①">specialized declaration reference</a></p>
    <li data-md>
     <p>The number of <em>arguments</em> must match the number of parameters of <em>base</em></p>
    <li data-md>
     <p>Each of the <em>arguments</em> must be an instance of the type of the corresponding parameter of <em>base</em></p>
   </ul>
   <h4 class="heading settled" data-level="5.9.4" id="decl.ref.specialized.fully"><span class="secno">5.9.4. </span><span class="content">Fully-Specialized Declaration References</span><a class="self-link" href="#decl.ref.specialized.fully"></a></h4>
   <p>A <a data-link-type="dfn" href="#declaration-reference" id="ref-for-declaration-reference①">declaration reference</a> <var>r</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="unspecialized">unspecialized</dfn> if <var>r</var> refers to a generic declaration and <var>r</var> is not a <a data-link-type="dfn" href="#specialized-declaration-reference" id="ref-for-specialized-declaration-reference②">specialized declaration reference</a>.</p>
   <p>A <a data-link-type="dfn" href="#declaration-reference" id="ref-for-declaration-reference②">declaration reference</a> <var>r</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="fully-specialized">fully specialized</dfn> if all of:</p>
   <ul>
    <li data-md>
     <p><var>r</var> is <a data-link-type="dfn" href="#unspecialized" id="ref-for-unspecialized">unspecialized</a></p>
    <li data-md>
     <p>if <var>r</var> has a base <a data-link-type="dfn" href="#declaration-reference" id="ref-for-declaration-reference③">declaration reference</a>, then its base is <a data-link-type="dfn" href="#fully-specialized" id="ref-for-fully-specialized">fully specialized</a></p>
   </ul>
   <div class="issue" id="issue-644ae6fb">
    <a class="self-link" href="#issue-644ae6fb"></a> We need to do some work to define what a fully-qualified declaration reference is, since some parts of the semantics want it. 
    <p>A direct declaration reference is fully qualified if it is to a module, a parameter (generic or value), or a local declaration.</p>
    <p>A member declaration reference is fully qualified if its base is.
A specialization is fully qualified if its base is.</p>
   </div>
   <h3 class="heading settled" data-level="5.10" id="type.nominal"><span class="secno">5.10. </span><span class="content">Nominal Types</span><a class="self-link" href="#type.nominal"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="nominal-type">nominal type</dfn> is a fully-specialized declaration reference to a <a data-link-type="dfn" href="#type-declaration" id="ref-for-type-declaration">type declaration</a>.</p>
   <h3 class="heading settled" data-level="5.11" id="type.struct"><span class="secno">5.11. </span><span class="content"><code>struct</code> Types</span><a class="self-link" href="#type.struct"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="struct-type">struct type</dfn> is a fully-specialized declaration reference to a <code>struct</code> declaration.</p>
   <p>A <a data-link-type="dfn" href="#struct-type" id="ref-for-struct-type">struct type</a> is a <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type③">proper type</a>.</p>
   <h3 class="heading settled" data-level="5.12" id="type.class"><span class="secno">5.12. </span><span class="content"><code>class</code> Types</span><a class="self-link" href="#type.class"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="class-type">class type</dfn> is a fully-specialized declaration reference to a <code>class</code> declaration.</p>
   <p>An instance of a <a data-link-type="dfn" href="#class-type" id="ref-for-class-type">class type</a> is an <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="object">object</dfn>.</p>
   <p>A <a data-link-type="dfn" href="#class-type" id="ref-for-class-type①">class type</a> is a <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type④">proper type</a>.</p>
   <h3 class="heading settled" data-level="5.13" id="type.enum"><span class="secno">5.13. </span><span class="content"><code>enum</code> Types</span><a class="self-link" href="#type.enum"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="enum-type">enum type</dfn> is a fully-specialized declaration reference to an <code>enum</code> declaration.</p>
   <p>An <a data-link-type="dfn" href="#enum-type" id="ref-for-enum-type">enum type</a> is a <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type⑤">proper type</a>.</p>
   <h3 class="heading settled" data-level="5.14" id="type.alias"><span class="secno">5.14. </span><span class="content">Type Aliases</span><a class="self-link" href="#type.alias"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="type-alias">type alias</dfn> is a fully-specialized declaration reference to an <code>typealias</code> declaration.</p>
   <p>A <a data-link-type="dfn" href="#type-alias" id="ref-for-type-alias">type alias</a> is a <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type⑥">proper type</a>.</p>
   <h3 class="heading settled" data-level="5.15" id="type.assoc"><span class="secno">5.15. </span><span class="content">Associated Types</span><a class="self-link" href="#type.assoc"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="associated-type">associated type</dfn> is a fully-specialized declaration reference to an <code>associatedtype</code> declaration.</p>
   <p>An <a data-link-type="dfn" href="#associated-type" id="ref-for-associated-type">associated type</a> is a <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type⑦">proper type</a>.</p>
   <h3 class="heading settled" data-level="5.16" id="type.interface"><span class="secno">5.16. </span><span class="content">Interfaces</span><a class="self-link" href="#type.interface"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="interface">interface</dfn> is a value that is either:</p>
   <ul>
    <li data-md>
     <p>a fully-specialized declaration reference to an <code>interface</code> declaration</p>
    <li data-md>
     <p>a conjunction of interfaces</p>
   </ul>
   <p>The <a data-link-type="dfn" href="#instances" id="ref-for-instances①">instances</a> of an interface are the <a data-link-type="dfn" href="#proper-type" id="ref-for-proper-type⑧">proper types</a> that conform to it.</p>
   <p>An <a data-link-type="dfn" href="#interface" id="ref-for-interface">interface</a> has level two.</p>
   <p>The <a data-link-type="dfn" href="#sort" id="ref-for-sort②">sort</a> <code>Interface</code> is the <a data-link-type="dfn" href="#sort" id="ref-for-sort③">sort</a> of all <a data-link-type="dfn" href="#interface" id="ref-for-interface①">interfaces</a>.</p>
   <h3 class="heading settled" data-level="5.17" id="type.any"><span class="secno">5.17. </span><span class="content"><code>any</code> Types</span><a class="self-link" href="#type.any"></a></h3>
<pre class="language-.semantics">ExistentialAnyType := `any` Interface
</pre>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="any-type">any type</dfn> takes the form <code>any</code> <var>I</var>, where <var>I</var> is an <a data-link-type="dfn" href="#interface" id="ref-for-interface②">interface</a>.</p>
   <p>The <a data-link-type="dfn" href="#level" id="ref-for-level⑦">level</a> of an <a data-link-type="dfn" href="#any-type" id="ref-for-any-type">any type</a> is one.</p>
   <p>An instance of <code>any</code> <var>I</var> is an <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="existential-value">existential value</dfn>.</p>
   <ul>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#type" id="ref-for-type①③">type</a> <var>T</var></p>
    <li data-md>
     <p>a witness that <var>T</var> conforms to <var>I</var></p>
    <li data-md>
     <p>a <a data-link-type="dfn" href="#values" id="ref-for-values⑥">value</a> of type <var>T</var></p>
   </ul>
   <p>The <a data-link-type="dfn" href="#level" id="ref-for-level⑧">level</a> of an existential value is zero.</p>
   <h3 class="heading settled" data-level="5.18" id="type.function"><span class="secno">5.18. </span><span class="content">Functions</span><a class="self-link" href="#type.function"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="function">function</dfn> is a value that can be called.</p>
   <p>A function is called with zero or more values as <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="arguments">arguments</dfn>.
The <a data-link-type="dfn" href="#arguments" id="ref-for-arguments">arguments</a> to a function call must match the function’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="parameters">parameters</dfn></p>
   <p>If a call to a function returns normally, it returns a value of the function’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="result-type">result type</dfn>.</p>
   <p>A call to a function may have additional <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="effects">effects</dfn>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="function-type">function type</dfn> takes the form:</p>
<pre class="language-.semantics">FunctionType := `(` (Parameter `,`)* `)` Effect* `->` resultType:Type

Parameter := (Name `:`)? Type
</pre>
   <p><code>(</code> <var>parameters</var> <code>)</code> <var>effects</var> <code>-></code> <var>resultType</var></p>
   <p>where:</p>
   <ul>
    <li data-md>
     <p><var>parameters</var> is a comma-separated sequence of zero or more <a data-link-type="dfn" href="#parameters" id="ref-for-parameters">parameters</a></p>
    <li data-md>
     <p><var>effects</var> is zero or more <a data-link-type="dfn" href="#effects" id="ref-for-effects">effects</a></p>
    <li data-md>
     <p><var>resultType</var> is a <a data-link-type="dfn" href="#type" id="ref-for-type①④">type</a></p>
   </ul>
   <p>Each of the <var>parameters</var> of a function type may either be a <a data-link-type="dfn" href="#type" id="ref-for-type①⑤">type</a> or of the form <em>name</em><code>:</code><em>type</em>.</p>
   <p>A fully-specialized declaration reference to a function declaration is a <a data-link-type="dfn" href="#function" id="ref-for-function">function</a>.</p>
   <p>The level of a function is the maximum of the levels of its parameter types and result types.</p>
   <h3 class="heading settled" data-level="5.19" id="type.generic"><span class="secno">5.19. </span><span class="content">Generics</span><a class="self-link" href="#type.generic"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="generic">generic</dfn> is a value that can be specialized.</p>
   <p>A generic is specialized with one or more values as <a data-link-type="dfn" href="#arguments" id="ref-for-arguments①">arguments</a>.
The <a data-link-type="dfn" href="#arguments" id="ref-for-arguments②">arguments</a> to a specialization must match the generic’s <a data-link-type="dfn" href="#parameters" id="ref-for-parameters①">parameters</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="dependent-function-type">dependent function type</dfn> takes the form:</p>
<pre class="language-.semantics">DependentFunctionType := `&lt;` (Parameter `,`)* `>` `->` resultType:Type
</pre>
   <p><code>&lt;</code> <var>parameters</var> <code>></code> <code>-></code> <var>resultType</var></p>
   <p>where:</p>
   <ul>
    <li data-md>
     <p><var>parameters</var> is a comma-separated sequence of zero or more parameters</p>
    <li data-md>
     <p><var>resultType</var> is a type</p>
   </ul>
   <p>The <var>parameters</var> of a generic type may either be a type or of the form <em>name</em><code>:</code><em>type</em>.</p>
   <p>The result type of a generic type may refer to the parameters.</p>
   <p>An unspecialized declaration reference to a generic declaration is a <a data-link-type="dfn" href="#generic" id="ref-for-generic">generic</a>.</p>
   <p>The level of a generic is the maximum of the level of its result type and one greater than the maximul of the levels of its parameter types.</p>
   <h3 class="heading settled" data-level="5.20" id="type.witness"><span class="secno">5.20. </span><span class="content">Witnesses</span><a class="self-link" href="#type.witness"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="proposition">proposition</dfn> is a phrase that logically may be either true or false.</p>
   <p><a data-link-type="dfn" href="#proposition" id="ref-for-proposition">Propositions</a> are <a data-link-type="dfn" href="#type" id="ref-for-type①⑥">types</a>.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="witness">witness</dfn> is an instance of a <a data-link-type="dfn" href="#proposition" id="ref-for-proposition①">proposition</a>.
The existance of a <a data-link-type="dfn" href="#witness" id="ref-for-witness">witness</a> of some <a data-link-type="dfn" href="#proposition" id="ref-for-proposition②">proposition</a> <var>P</var> demonstrates the truth of <var>P</var>.</p>
   <p>The notation "a <a data-link-type="dfn" href="#witness" id="ref-for-witness①">witness</a> that <var>P</var>", where <var>P</var> is a proposition, is equivalent to "an <a data-link-type="dfn" href="#instances" id="ref-for-instances②">instance</a> of <var>P</var>".</p>
   <p>The notation <var>T</var> <code>extends</code> <var>S</var> denotes a <a data-link-type="dfn" href="#proposition" id="ref-for-proposition③">proposition</a> that the <a data-link-type="dfn" href="#type" id="ref-for-type①⑦">type</a> <var>T</var> is a subtype of the <a data-link-type="dfn" href="#type" id="ref-for-type①⑧">type</a> <var>S</var>.</p>
   <p>The notation <var>T</var> <code>implements</code> <var>I</var> denotes a <a data-link-type="dfn" href="#proposition" id="ref-for-proposition④">proposition</a> that the <a data-link-type="dfn" href="#type" id="ref-for-type①⑨">type</a> <var>T</var> conforms to the <a data-link-type="dfn" href="#interface" id="ref-for-interface③">interface</a> <var>I</var>.</p>
<pre class="language-.semantics">Proposition := /* TODO */

SubtypeProposition := subtype:Type `extends` supertype:Type

ImplementationProposition := Type `implements` Interface
</pre>
   <div class="issue" id="issue-287dffd1">
    <a class="self-link" href="#issue-287dffd1"></a> A witness that <em>t</em> <code>implements</code> <em>i</em> is a witness table. 
    <p>Given:</p>
    <ul>
     <li data-md>
      <p>an interface <em>i</em></p>
     <li data-md>
      <p>a requirement of <em>i</em>, represented as a direct member declaration of <em>r</em></p>
     <li data-md>
      <p>a type <em>t</em></p>
     <li data-md>
      <p>a witness table <em>w</em>, of type <em>t</em> <code>implements</code> <em>i</em></p>
    </ul>
    <p>then looking up the witness value for <em>r</em> should basically amount to a (static) member reference into <em>w</em>.</p>
    <p>This would all be easier if Slang followed the approach of something like Haskell, where the <code>This</code> parameter is basically explicit.</p>
    <p>Basically this amounts to saying that <em>t</em> <code>implements</code> <em>i</em> acts as a declaration reference to <em>i</em>, and that a declaration reference to an <code>interface</code> is not "fully specialized" (in the sense that members can be looked up) without that added parameter.</p>
    <p>(<em>t</em> <code>implements</code> <em>i</em>)::<em>r</em></p>
    <p>So... I need to do that.</p>
   </div>
   <h3 class="heading settled" data-level="5.21" id="value.module"><span class="secno">5.21. </span><span class="content">Module Values</span><a class="self-link" href="#value.module"></a></h3>
   <p>A <a data-link-type="dfn" href="#module" id="ref-for-module">module</a> is a <a data-link-type="dfn" href="#values" id="ref-for-values⑦">value</a>.</p>
   <h2 class="heading settled" data-level="6" id="check"><span class="secno">6. </span><span class="content">Semantic Checking</span><a class="self-link" href="#check"></a></h2>
   <div class="issue" id="issue-60092464">
    <a class="self-link" href="#issue-60092464"></a> The intention of this chapter is to establish the formalisms and notations that will be used for expressing typing judgements and other semantic-checking rules in this specification. 
    <p>The notation being used here is aligned with how papers in the PLT world on type theory, semantics, etc. present a language.</p>
   </div>
   <h3 class="heading settled" data-level="6.1" id="check.context"><span class="secno">6.1. </span><span class="content">Contexts</span><a class="self-link" href="#check.context"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="context">context</dfn> is an ordered sequence of zero or more <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="context-entries">context entries</dfn>. <a data-link-type="dfn" href="#context-entries" id="ref-for-context-entries">Context entries</a> include <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bindings">bindings</dfn> of the name of a variable (an [<a data-link-type="dfn" href="#identifier" id="ref-for-identifier①">identifier</a>]) to its type.</p>
<pre class="language-.checking">
Context :
    ContextEntry*
    
ContextEntry :
    Binding
    
Binding :
    Identifier : Type // variable
    Identifer = TypedValue // alias
</pre>
   <p>A context <var>c</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="binds">binds</dfn> an identifier <var>n</var> if <var>c</var> contains one or more <a data-link-type="dfn" href="#bindings" id="ref-for-bindings">bindings</a> with <var>n</var> on the left-hand side.</p>
   <p class="issue" id="issue-0b447306"><a class="self-link" href="#issue-0b447306"></a> We need to describe here the process by which an identifier resolves to a <a data-link-type="dfn" href="#binding" id="ref-for-binding">binding</a>, including overloaded, etc.
The discussion here will have to be a forward reference to the algorithms to be given later.</p>
   <h3 class="heading settled" data-level="6.2" id="check.expr"><span class="secno">6.2. </span><span class="content">Expressions</span><a class="self-link" href="#check.expr"></a></h3>
   <p>Slang use a variation on a bidirectional type-checking algorithm.</p>
   <p>There are two main steps used when checking expressions.
Each form of expression may define rules for resolving, checking, or both.</p>
   <div class="issue" id="issue-7932f304">
    <a class="self-link" href="#issue-7932f304"></a> We need to define what checked expressions, resolved expressions, and (parsed) expressions are. 
    <p>A parsed expression is what you get out of the relevant parsing rules for <code>Expression</code>.</p>
    <p>A checked expression is a limited subset of forms that includes stuff like:</p>
    <ul>
     <li data-md>
      <p>typed values</p>
     <li data-md>
      <p>declaration references</p>
     <li data-md>
      <p>calls</p>
    </ul>
    <p>A typed value evaluates to itself, with no side effects.</p>
    <p>A resolved expression is either a checked expression <em>or</em> one of a few cases that need further context:</p>
    <ul>
     <li data-md>
      <p>overloaded declaration references</p>
     <li data-md>
      <p>overloaded calls</p>
     <li data-md>
      <p>initializer lists</p>
    </ul>
    <p>We also need to drill into the representation of types and values...</p>
   </div>
   <h4 class="heading settled" data-level="6.2.1" id="check.expr.resolve"><span class="secno">6.2.1. </span><span class="content">Resolving</span><a class="self-link" href="#check.expr.resolve"></a></h4>
   <p>Resolving an <a data-link-type="dfn" href="#expressions" id="ref-for-expressions④">expression</a> in a context results in a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="resolved-expression">resolved expression</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Resolving is used in places where an expression needs to have some amount of validation performed, but an expected type for the expression is not available.</p>
   <p>To resolve an <a data-link-type="dfn" href="#expressions" id="ref-for-expressions⑤">expression</a> <var>e</var> when the form of <var>e</var> does not define a resolving rule:</p>
   <ul>
    <li data-md>
     <p>Extend the context with a fresh type variable <var>T</var></p>
    <li data-md>
     <p>Return the result of checking <var>e</var> against <var>T</var></p>
   </ul>
   <h4 class="heading settled" data-level="6.2.2" id="check.check"><span class="secno">6.2.2. </span><span class="content">Checking</span><a class="self-link" href="#check.check"></a></h4>
   <p>Checking a <a data-link-type="dfn" href="#resolved-expression" id="ref-for-resolved-expression">resolved expression</a> against a type results in a checked expression.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Checking is used in places where the type that an expression is expected to have is known.</p>
   <p>To check an <a data-link-type="dfn" href="#expressions" id="ref-for-expressions⑥">expression</a> <var>e</var> against a type <var>T</var> when form of <var>e</var> does not define a checking rule:</p>
   <ul>
    <li data-md>
     <p>Let <var>re</var> be the result of resolving <var>e</var></p>
    <li data-md>
     <p>Return the result of coercing <var>re</var> to <var>T</var></p>
   </ul>
   <p>OLD TEXT:
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="checking-judgement">checking judgement</dfn> determines that, given a <a data-link-type="dfn" href="#context" id="ref-for-context①">context</a> <var>c</var>, an <a data-link-type="dfn" href="#expressions" id="ref-for-expressions⑦">expression</a> <var>e</var>, and a <a data-link-type="dfn" href="#type" id="ref-for-type②⓪">type</a> <var>t</var>, <var>e</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="checks-against">checks against</dfn> <var>t</var> in context <var>c</var>.</p>
   <h3 class="heading settled" data-level="6.3" id="check.stmt"><span class="secno">6.3. </span><span class="content">Statements</span><a class="self-link" href="#check.stmt"></a></h3>
   <p>Statement also use <a data-link-type="dfn" href="#checking-judgement" id="ref-for-checking-judgement">checking judgements</a>.
A checking judgement for a statement determines that <a data-link-type="dfn" href="#statement" id="ref-for-statement①">statement</a> <var>s</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="checks">checks</dfn> in <a data-link-type="dfn" href="#context" id="ref-for-context②">context</a> <var>c</var>.</p>
   <h3 class="heading settled" data-level="6.4" id="check.decl"><span class="secno">6.4. </span><span class="content">Declarations</span><a class="self-link" href="#check.decl"></a></h3>
   <p>Declarations also use <a data-link-type="dfn" href="#checking-judgement" id="ref-for-checking-judgement①">checking judgements</a>.
A checking judgement for a declaration determines that <a data-link-type="dfn" href="#declaration" id="ref-for-declaration⑤">declaration</a> _d_ [<a data-link-type="dfn" href="#checks" id="ref-for-checks">checks</a>] in <a data-link-type="dfn" href="#context" id="ref-for-context③">context</a> <var>c</var>.</p>
   <p>Checking of a declaration may modify the context <var>c</var> to include additional bindings.</p>
   <h2 class="heading settled" data-level="7" id="memory"><span class="secno">7. </span><span class="content">Memory</span><a class="self-link" href="#memory"></a></h2>
   <p>Values of <a data-link-type="dfn" href="#storable" id="ref-for-storable">storable</a> types may be stored into and loaded from memory.
A proper type <var>T</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="storable">storable</dfn> if <var>T</var> conforms to <code>IStorable</code>.</p>
   <h3 class="heading settled" data-level="7.1" id="memory.location"><span class="secno">7.1. </span><span class="content">Memory Locations</span><a class="self-link" href="#memory.location"></a></h3>
   <p>Memory logically consists of a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="memory-locations">memory locations</dfn>, each of which can hold an 8-bit byte.
Each memory location is part of one and only one <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="address-space">address space</dfn>.</p>
   <p>Two sets of <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations">memory locations</a> overlap if their intersection is non-empty.</p>
   <h3 class="heading settled" data-level="7.2" id="memory.access"><span class="secno">7.2. </span><span class="content">Memory Accesses</span><a class="self-link" href="#memory.access"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="memory-access">memory access</dfn> is an operation performed by a <a data-link-type="dfn" href="#strand" id="ref-for-strand">strand</a> on a set of <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations①">memory locations</a> in a single <a data-link-type="dfn" href="#address-space" id="ref-for-address-space">address space</a>.
A <a data-link-type="dfn" href="#memory-access" id="ref-for-memory-access">memory access</a> has a <a data-link-type="dfn" href="#memory-access-mode" id="ref-for-memory-access-mode">memory access mode</a>.</p>
   <h4 class="heading settled" data-level="7.2.1" id="memory.access.mode"><span class="secno">7.2.1. </span><span class="content">Memory Access Modes</span><a class="self-link" href="#memory.access.mode"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="memory-access-mode">memory access mode</dfn> is one of: <code>read</code>, <code>write</code>, or <code>modify</code>.</p>
   <h3 class="heading settled" data-level="7.3" id="memory.model"><span class="secno">7.3. </span><span class="content">Memory Model</span><a class="self-link" href="#memory.model"></a></h3>
   <div class="issue" id="issue-394787aa"><a class="self-link" href="#issue-394787aa"></a> We need to find an existing formal memory model to reference and use. </div>
   <h2 class="heading settled" data-level="8" id="SECTION.layout"><span class="secno">8. </span><span class="content">Layout</span><a class="self-link" href="#SECTION.layout"></a></h2>
   <div class="issue" id="issue-01a05192"><a class="self-link" href="#issue-01a05192"></a> We clearly need a chapter on the guarantees Slang makes about memory layout. </div>
   <p>Types in Slang do not necessarily prescribe a single <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="layout">layout</dfn> in memory.
The discussion of each type will specify any guarantees about <a data-link-type="dfn" href="#layout" id="ref-for-layout">layout</a> it provides; any details of layout not specified here may depend on the target platform, compiler options, and context in which a type is used.</p>
   <h2 class="heading settled" data-level="9" id="storage"><span class="secno">9. </span><span class="content">Storage</span><a class="self-link" href="#storage"></a></h2>
   <h3 class="heading settled" data-level="9.1" id="storage.concrete"><span class="secno">9.1. </span><span class="content">Concrete Storage Locations</span><a class="self-link" href="#storage.concrete"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="concrete-storage-location">concrete storage location</dfn> with layout <em>L</em> for storable type <var>T</var> comprises a set of contiguous <a data-link-type="dfn" href="#memory-locations" id="ref-for-memory-locations②">memory locations</a>, in a single <a data-link-type="dfn" href="#address-space" id="ref-for-address-space①">address space</a>, where a value of type <var>T</var> with layout <em>L</em> can be stored.</p>
   <h4 class="heading settled" data-level="9.1.1" id="storage.concrete.type"><span class="secno">9.1.1. </span><span class="content">Reference Types</span><a class="self-link" href="#storage.concrete.type"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="reference-type">reference type</dfn> is written <var>m</var> <code>ref</code> <var>T</var> where <var>m</var> is a <a data-link-type="dfn" href="#memory-access-mode" id="ref-for-memory-access-mode①">memory access mode</a> and <var>T</var> is a storable type.</p>
   <div class="issue" id="issue-009cfc6e"><a class="self-link" href="#issue-009cfc6e"></a> How do we get layout involved here? </div>
   <h5 class="heading settled" data-level="9.1.1.1" id="storage.concrete.type.conversion"><span class="secno">9.1.1.1. </span><span class="content">Type Conversion</span><a class="self-link" href="#storage.concrete.type.conversion"></a></h5>
   <p>An expression of reference type <code>modify</code> <code>ref</code> <var>T</var> can be implicitly coerced to type <code>read</code> <code>ref</code> <var>S</var> if <var>T</var> is subtype of <var>S</var>.</p>
   <p>An expression of reference type <code>modify</code> <code>ref</code> <var>T</var> can be implicitly coerced to type <code>write</code> <code>ref</code> <var>S</var> if <var>S</var> is subtype of <var>T</var>.</p>
   <p>An expression of reference type <code>read</code> <code>ref</code> <var>T</var> can be implicitly coerced to type <var>T</var>.</p>
   <h3 class="heading settled" data-level="9.2" id="storage.abstract.location"><span class="secno">9.2. </span><span class="content">Abstract Storage Locations</span><a class="self-link" href="#storage.abstract.location"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="abstract-storage-location">abstract storage location</dfn> is a logical place where a value of some proper type <var>T</var> can reside.</p>
   <p>A <a data-link-type="dfn" href="#concrete-storage-location" id="ref-for-concrete-storage-location">concrete storage location</a> is also an <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location">abstract storage location</a>.</p>
   <p>Example: A local variable declaration like <code>var x : Int;</code> defines an <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location①">abstract storage location</a>, and a reference to <code>x</code> will have the <a data-link-type="dfn" href="#abstract-storage-reference-type" id="ref-for-abstract-storage-reference-type">abstract storage reference type</a> <code>read modify Int</code>.</p>
   <h3 class="heading settled" data-level="9.3" id="storage.abstract.access"><span class="secno">9.3. </span><span class="content">Abstract Storage Access</span><a class="self-link" href="#storage.abstract.access"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="abstract-storage-access">abstract storage access</dfn> is an operation performed by a <a data-link-type="dfn" href="#strand" id="ref-for-strand①">strand</a> on an <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location②">abstract storage location</a>.
Each <a data-link-type="dfn" href="#abstract-storage-access" id="ref-for-abstract-storage-access">abstract storage access</a> has an <a data-link-type="dfn" href="#abstract-storage-access-mode" id="ref-for-abstract-storage-access-mode">abstract storage access mode</a>.</p>
   <h3 class="heading settled" data-level="9.4" id="storage.abstract.access.mode"><span class="secno">9.4. </span><span class="content">Access Mode</span><a class="self-link" href="#storage.abstract.access.mode"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="abstract-storage-access-mode">abstract storage access mode</dfn> is either <code>get</code>, <code>set</code>, or a <a data-link-type="dfn" href="#memory-access-mode" id="ref-for-memory-access-mode②">memory access mode</a>.</p>
   <h3 class="heading settled" data-level="9.5" id="storage.abstract.reference.type"><span class="secno">9.5. </span><span class="content">Abstract Storage References</span><a class="self-link" href="#storage.abstract.reference.type"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="abstract-storage-reference-type">abstract storage reference type</dfn> is written <var>m</var> <var>T</var> where <var>T</var> is a proper type and <var>m</var> is a set of one or more <a data-link-type="dfn" href="#abstract-storage-access-mode" id="ref-for-abstract-storage-access-mode①">abstract storage access modes</a>.</p>
   <div class="issue" id="issue-30a06830">
    <a class="self-link" href="#issue-30a06830"></a> Some of the access types imply others, and it is inconvenient to have to write all explicitly in those cases.
For example: 
    <ul>
     <li data-md>
      <p>If you have <code>read</code> access, you can also perform a <code>get</code> (if the stored type is copyable).</p>
     <li data-md>
      <p>If you have <code>modify</code> access, you can also perform a <code>write</code>.</p>
     <li data-md>
      <p>If you hae <code>modify</code> or <code>write</code> access, you can also perform a <code>set</code> (if the stored type is copyable).</p>
    </ul>
    <p>(Having <code>modify</code> access doesn’t let you perform a <code>read</code> or <code>get</code>, because it implies the possibility of write-back which could in principle conflict with other accesses)</p>
   </div>
   <h4 class="heading settled" data-level="9.5.1" id="storage.abstract.reference.type.conversion"><span class="secno">9.5.1. </span><span class="content">Type Conversion</span><a class="self-link" href="#storage.abstract.reference.type.conversion"></a></h4>
   <p>An expression with <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type">reference type</a> <code>read</code> <code>ref</code> <var>T</var> can be implicitly coerced to an <a data-link-type="dfn" href="#abstract-storage-reference-type" id="ref-for-abstract-storage-reference-type①">abstract storage reference type</a> <code>read</code> <var>T</var>.</p>
   <p>An expression with <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type①">reference type</a> <code>write</code> <code>ref</code> <var>T</var> can be implicitly coerced to an <a data-link-type="dfn" href="#abstract-storage-reference-type" id="ref-for-abstract-storage-reference-type②">abstract storage reference type</a> <code>write</code> <var>T</var>.</p>
   <p>An expression with <a data-link-type="dfn" href="#reference-type" id="ref-for-reference-type②">reference type</a> <code>modify</code> <code>ref</code> <var>T</var> can be implicitly coerced to an <a data-link-type="dfn" href="#abstract-storage-reference-type" id="ref-for-abstract-storage-reference-type③">abstract storage reference type</a> <code>read write modify</code> <var>T</var>.</p>
   <p>An expression with <a data-link-type="dfn" href="#abstract-storage-reference-type" id="ref-for-abstract-storage-reference-type④">abstract storage reference type</a> <var>a</var> <var>T</var> can be implicitly coerced to <a data-link-type="dfn" href="#abstract-storage-reference-type" id="ref-for-abstract-storage-reference-type⑤">abstract storage reference type</a> <var>b</var> <var>T</var> if <var>b</var> is a subset of <var>a</var>.</p>
   <p>An expression with an abstract storage type <var>m</var> <var>T</var> can be implicitly coerced to an abstract storage type <var>m</var> <var>S</var> if all of the following are true:</p>
   <ul>
    <li data-md>
     <p><var>S</var> is a subtype of <var>T</var> unless <var>m</var> does not contain any of <code>write</code>, <code>modify</code>, and <code>set</code></p>
    <li data-md>
     <p><var>T</var> is a subtype of <var>S</var> unless <var>m</var> does not contain any of <code>read</code>, <code>modify</code>, and <code>get</code></p>
   </ul>
   <h3 class="heading settled" data-level="9.6" id="storage.location.contain"><span class="secno">9.6. </span><span class="content">Containment</span><a class="self-link" href="#storage.location.contain"></a></h3>
   <p>An abstract storage location may contain other abstract storage locations.</p>
   <p>Two <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location③">abstract storage locations</a> overlap if they are the same location, or one transitively contains the other.</p>
   <p>An abstract storage location of an array type <var>T</var><code>[</code><var>N</var><code>]</code> contains <var>N</var> storage locations of type <var>T</var>, one for each element of the array.</p>
   <p>An abstract storage location of a <code>struct</code> type <var>S</var> contains a distinct storage location for each of the <a data-link-type="dfn" href="#fields" id="ref-for-fields">fields</a> of <var>S</var>.</p>
   <h4 class="heading settled" data-level="9.6.1" id="storage.access.conflict"><span class="secno">9.6.1. </span><span class="content">Conflicts</span><a class="self-link" href="#storage.access.conflict"></a></h4>
   <p>An <a data-link-type="dfn" href="#abstract-storage-access" id="ref-for-abstract-storage-access①">abstract storage access</a> performed by a strand begins at some point <var>b</var> in the execution of that strand, and ends at some point <var>e</var> in the execution of that strand.
The interval of an <a data-link-type="dfn" href="#abstract-storage-access" id="ref-for-abstract-storage-access②">abstract storage access</a> is the half-open interval [<var>b</var>, <var>e</var>).</p>
   <p>The intervals [<var>a0</var>, <var>a1</var>) and [<var>b0</var>, <var>b1</var>) overlap if either:</p>
   <ul>
    <li data-md>
     <p><var>a0</var> happens-before <var>b0</var> and <var>b0</var> happens-before <var>a1</var></p>
    <li data-md>
     <p><var>b0</var> happens-before <var>a0</var> and <var>a0</var> happens-before <var>b1</var></p>
   </ul>
   <p>Two <a data-link-type="dfn" href="#abstract-storage-access" id="ref-for-abstract-storage-access③">abstract storage accesses</a> <var>A</var> and <var>B</var> overlap if all of the following:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location④">abstract storage location</a> of <var>A</var> overlaps the <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location⑤">abstract storage location</a> of <var>B</var></p>
    <li data-md>
     <p>The interval of <var>A</var> overlaps the interval of <var>B</var></p>
   </ul>
   <p>Two distinct <a data-link-type="dfn" href="#abstract-storage-access" id="ref-for-abstract-storage-access④">abstract storage accesses</a> <var>A</var> and <var>B</var> conflict if all of the following:</p>
   <ul>
    <li data-md>
     <p><var>A</var> and <var>B</var> overlap</p>
    <li data-md>
     <p>At least one of the accesses is a <code>write</code>, <code>modify</code>, or <code>set</code></p>
   </ul>
   <h3 class="heading settled" data-level="9.7" id="storage.expr"><span class="secno">9.7. </span><span class="content">Expressions That Reference Storage</span><a class="self-link" href="#storage.expr"></a></h3>
   <div class="issue" id="issue-3ba2c367"><a class="self-link" href="#issue-3ba2c367"></a> This text really belongs in the relevant sections about type-checking each of these expression forms. </div>
   <p>Rather than evaluating to a value, of an expression may evaluate to an abstract storage location, along with restrictions on the kinds of access allowed to that location.
An expression that evaluates to an abstract storage location does not constitute an abstract storage access to that location.</p>
   <p>Examples of expressions that evaluate to an abstract storage location include:</p>
   <ul>
    <li data-md>
     <p>An identifier expression that names some variable _v_</p>
    <li data-md>
     <p>A member-access expression <var>x</var>.<var>m</var> where <var>x</var> is an abstract storage location of some struct type <var>S</var> and <var>m</var> is a field of <var>S</var></p>
    <li data-md>
     <p>A member-access expression <var>x</var>.<var>p</var> where <var>p</var> is a property</p>
    <li data-md>
     <p>A subscript exrpession <var>x</var><code>[</code><var>i</var><code>]</code> that resolves to an invocation of a <code>subscript</code> declaration</p>
   </ul>
   <p>Examples of expressions that perform an abstract storage access include:</p>
   <ul>
    <li data-md>
     <p>An assignment <var>dst</var> <code>=</code> <var>src</var> performs a write to <var>dst</var>. It also performs a read from <var>src</var> if <var>src</var> is an abstract storage location.</p>
    <li data-md>
     <p>A call <code>f(... a ... )</code> where argument <code>a</code> is an abstract storage location performs an abstract storage access based on the direction of the corresponding parameter:</p>
    <li data-md>
     <p>An <code>in</code> parameter performs a read access that begins and ends before the strand enters the body of <code>f</code></p>
    <li data-md>
     <p>An <code>out</code> parameter begins a write access before the call begins, and ends it after the call returns. The abstract storage location <code>a</code> must have been uninitialized before the call, and will be initialized after the call.</p>
    <li data-md>
     <p>An <code>inout</code> parameter begins a modify access before the call that ends after the call returns. The abstract storage location <code>a</code> must have been initialized before the call.</p>
    <li data-md>
     <p>TODO: <code>ref</code> etc.</p>
   </ul>
   <h2 class="heading settled" data-level="10" id="lifecycle"><span class="secno">10. </span><span class="content">Program Lifecycle</span><a class="self-link" href="#lifecycle"></a></h2>
   <h3 class="heading settled" data-level="10.1" id="lifecyle.compilation"><span class="secno">10.1. </span><span class="content">Compilation</span><a class="self-link" href="#lifecyle.compilation"></a></h3>
   <p>A Slang <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compiler">compiler</dfn> is a tool that is invoked on Slang source code to produce <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="object-code">object code</dfn>.</p>
   <p>Object code produced by a Slang compiler from one toolchain may be incompatible with tools from other toolchains, other versions of the same toolchain, or across target platforms supported by the toolchain.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This specification does not prescribe the language or format of object code that a particular toolchain implementation has to use.
Object code might use a toolchain-specific IR, a portable intermediate language, or a format that is compatible with another existing toolchain (e.g., the object code format used by a C toolchain on the target).</p>
   <p>A <a data-link-type="dfn" href="#compiler" id="ref-for-compiler">compiler</a> implementation must support being invoked on an entire Slang source module, potentially comprising multiple source units, to produce object code for that entire module.
A <a data-link-type="dfn" href="#compiler" id="ref-for-compiler①">compiler</a> implementation may support being invoked on source code at other granularities: e.g., on a subset of the source units of a module.</p>
   <p>When compiling code that is part of a Slang module <var>M</var>, the output of a compiler implementation must not depend on any non-<a data-link-type="dfn" href="#fragile" id="ref-for-fragile">fragile</a> information in the modules that <var>M</var> depends on.</p>
   <h3 class="heading settled" data-level="10.2" id="lifecycle.linking"><span class="secno">10.2. </span><span class="content">Linking</span><a class="self-link" href="#lifecycle.linking"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="static-library">static library</dfn> is a unit of code suitable for distribution or re-use.
Static libraries created by a toolchain should be usable with later versions of that same toolchain.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="binary">binary</dfn> is a unit of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="loadable-code">loadable code</dfn> that is either an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="executable">executable</dfn> or a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dynamic-library">dynamic library</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> We need to refer to <a data-link-type="dfn" href="#executable" id="ref-for-executable">executables</a> and <a data-link-type="dfn" href="#dynamic-library" id="ref-for-dynamic-library">dynamic libraries</a> somewhere in the text.</p>
   <p>A Slang <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="linker">linker</dfn> is a tool that is invoked on one or more inputs, consisting of units of <a data-link-type="dfn" href="#object-code" id="ref-for-object-code">object code</a> and <a data-link-type="dfn" href="#static-library" id="ref-for-static-library">static libraries</a>, to produce a <a data-link-type="dfn" href="#static-library" id="ref-for-static-library①">static library</a> or a <a data-link-type="dfn" href="#binary" id="ref-for-binary">binary</a>.</p>
   <p>A binary may contain <a data-link-type="dfn" href="#loadable-code" id="ref-for-loadable-code">loadable code</a> for zero or more Slang modules.</p>
   <p class="note" role="note"><span class="marker">Note:</span> it is possible that a linked binary might contain both code compiled from Slang as well as code generated from other languages, or by other tools.</p>
   <p>It is invalid for a binary to contain code for non-<a data-link-type="dfn" href="#fragile" id="ref-for-fragile①">fragile</a> symbols from a Slang module <var>M</var> while also having external dependencies on symbols from <var>M</var>.
A <a data-link-type="dfn" href="#linker" id="ref-for-linker">linker</a> may fail with an error rather than produce an invalid binary.</p>
   <p class="note" role="note"><span class="marker">Note:</span> In practice, a linked binary has to either contain all of a given Slang module, or none of it.
The nuance is that <a data-link-type="dfn" href="#fragile" id="ref-for-fragile②">fragile</a> symbols, such as inlinable functions, from a module <var>M</var> might get copied into object code for a module <var>N</var> that depends on <var>M</var>, and thus end up in a binary for <var>N</var>.</p>
   <h3 class="heading settled" data-level="10.3" id="lifecycle.loading"><span class="secno">10.3. </span><span class="content">Loading</span><a class="self-link" href="#lifecycle.loading"></a></h3>
   <p>A Slang runtime must support <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="loading">loading</dfn> <a data-link-type="dfn" href="#binary" id="ref-for-binary①">binaries</a> into a <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session">runtime session</a>, and resolving dependencies between them.</p>
   <p><a data-link-type="dfn" href="#loading" id="ref-for-loading">Loading</a> of a binary containing definitions of non-fragile symbols from Slang module <var>M</var> must fail if any external symbol that <var>M</var> depends on has not already been loaded into the process.</p>
   <p><a data-link-type="dfn" href="#loading" id="ref-for-loading①">Loading</a> of a binary containing non-fragile symbols from module <var>M</var> may fail if any binary containing definition of non-fragile symbols from <var>M</var> has already been loaded into the process.</p>
   <p>It is valid to load a binary containing fragile symbols from module <var>M</var> even if other binaries containing one or more of those symbols has already been loaded, and even if the definitions of those fragile symbols differ between the binaries.
References to fragile symbols may resolve at runtime to any definition of those symbols that was compiled into object code that made its way into the binaries that are loaded.</p>
   <p>If Slang code is stored in a <a data-link-type="dfn" href="#binary" id="ref-for-binary②">binary</a> for a <a data-link-type="dfn" href="#host" id="ref-for-host">host</a>, then that code may be loaded as part of initialization of a <a data-link-type="dfn" href="#process" id="ref-for-process">process</a> for a <a data-link-type="dfn" href="#host" id="ref-for-host①">host</a> [=executable].</p>
   <p>If a <a data-link-type="dfn" href="#module" id="ref-for-module①">module</a> of Slang code is loaded programmatically, a Slang runtime must return a <a data-link-type="dfn" href="#mirror" id="ref-for-mirror">mirror</a> reflecting that module.</p>
   <h3 class="heading settled" data-level="10.4" id="lifecyle.reflection"><span class="secno">10.4. </span><span class="content">Runtime Reflection</span><a class="self-link" href="#lifecyle.reflection"></a></h3>
   <p>A Slang runtime may support reflection of <a data-link-type="dfn" href="#module" id="ref-for-module②">modules</a> that have been loaded into a <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session①">runtime session</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="mirror">mirror</dfn> is a runtime value that reflects some entity in a Slang codebase.
A <a data-link-type="dfn" href="#mirror" id="ref-for-mirror①">mirror</a> is created and managed by a <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session②">runtime session</a>, and reflects entities in the code that has been loaded into that runtime session.
A <a data-link-type="dfn" href="#mirror" id="ref-for-mirror②">mirror</a> that reflects an <var>X</var> is also called an <var>X</var> <a data-link-type="dfn" href="#mirror" id="ref-for-mirror③">mirror</a>.</p>
   <p>Example: A <a data-link-type="dfn" href="#module" id="ref-for-module③">module</a> <a data-link-type="dfn" href="#mirror" id="ref-for-mirror④">mirror</a> is a <a data-link-type="dfn" href="#mirror" id="ref-for-mirror⑤">mirror</a> that reflects a <a data-link-type="dfn" href="#module" id="ref-for-module④">module</a>.</p>
   <p>A <a data-link-type="dfn" href="#mirror" id="ref-for-mirror⑥">mirror</a> may reflect:</p>
   <ul>
    <li data-md>
     <p>A module</p>
    <li data-md>
     <p>A declaration</p>
    <li data-md>
     <p>A reference to a declaration</p>
    <li data-md>
     <p>A type</p>
    <li data-md>
     <p>A value</p>
   </ul>
   <p>A <a data-link-type="dfn" href="#mirror" id="ref-for-mirror⑦">mirror</a> is not the same as the entity it reflects.</p>
   <h3 class="heading settled" data-level="10.5" id="lifecycle.bundling"><span class="secno">10.5. </span><span class="content">Bundling</span><a class="self-link" href="#lifecycle.bundling"></a></h3>
   <div class="issue" id="issue-8a73695b"><a class="self-link" href="#issue-8a73695b"></a> This concept needs a proper name. </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bundle">bundle</dfn> is a runtime entity composed from a sequence of distinct runtime entities where each element in the sequence is one of:</p>
   <ul>
    <li data-md>
     <p>A module</p>
    <li data-md>
     <p>An entry point (a fully specialized reference to an entry point declaration)</p>
    <li data-md>
     <p>A witness to conformance relationship of a type to an interface</p>
    <li data-md>
     <p>A bundle</p>
   </ul>
   <p>A Slang runtime must support creation of a <a data-link-type="dfn" href="#bundle" id="ref-for-bundle">bundle</a> from a sequence of <a data-link-type="dfn" href="#mirror" id="ref-for-mirror⑧">mirrors</a> reflecting the runtime entities to be bundled.</p>
   <p>The entry points in a bundle are the entry points in the input sequence.</p>
   <p>The modules in a bundle are the set of modules in the input sequence, the modules referenced by the entities in the input sequence, and the transitive closure of modules imported by those.</p>
   <p>The global uniform shader parameters of a bundle are the global uniform shader parameters declared in modules in the bundle.</p>
   <p>The entry point uniform shader parameters of a bundle are the entry-point uniform shader parameters declared by entry points in the bundle.</p>
   <p>The shader parameters of a bundle are the global uniform shader parameters of the bundle and the entry-point uniform shader parameters of the bundle.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="kernel">kernel</dfn> is a runtime entity created from a bundle, an entry point in that bundle, and a target device.</p>
   <p>A kernel created from a bundle <var>B</var> is compatible with kernels created from a bundle <var>BX</var> where <var>BX</var> was created from an input sequence that started with <var>B</var>.</p>
   <h2 class="heading settled" data-level="11" id="exec"><span class="secno">11. </span><span class="content">Execution</span><a class="self-link" href="#exec"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="runtime-session">runtime session</dfn> is a context for loading and execution of Slang code.
A <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session③">runtime session</a> exists within the context of a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process">process</dfn> running on some <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="host">host</dfn> machine.
For some implementations, a <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session④">runtime session</a> may be the same as a <a data-link-type="dfn" href="#process" id="ref-for-process①">process</a>, but this is not required.</p>
   <p>A <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session⑤">runtime session</a> has access to one or more distinct <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="devices">devices</dfn> on which work may be performed.
Different <a data-link-type="dfn" href="#devices" id="ref-for-devices">devices</a> in a <a data-link-type="dfn" href="#runtime-session" id="ref-for-runtime-session⑥">runtime session</a> may implement different <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="architectures">architectures</dfn>, each having its own machine code format(s).
For some implementations, the <a data-link-type="dfn" href="#host" id="ref-for-host②">host</a> may also be a <a data-link-type="dfn" href="#devices" id="ref-for-devices①">device</a>, but this is not required.</p>
   <div class="issue" id="issue-c7ca9480"><a class="self-link" href="#issue-c7ca9480"></a> We need to define what it means to "execute" statements and to "evaluate" expressions... </div>
   <p>When a strand invokes an invocable entity <var>f</var>, it executes the body of <var>f</var> (a statement).
As part of executing a statement, a strand may execute other statements, and evaluate expressions.
A strand evaluates an expression to yield a value, and also for any side effects that may occur.</p>
   <h3 class="heading settled" data-level="11.1" id="exec.strand"><span class="secno">11.1. </span><span class="content">Strands</span><a class="self-link" href="#exec.strand"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="strand">strand</dfn> is a logical runtime entity that executes Slang code.
The state of a strand consists of a stack of <a data-link-type="dfn" href="#activation-record" id="ref-for-activation-record">activation records</a>, representing invocations that the strand has entered but not yet exited.</p>
   <p>A strand may be realized in different ways by different devices, runtime systems, and compilation strategies.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The term "strand" was chosen because a term like "thread" is both overloaded and charged.
On a typical CPU <a data-link-type="dfn" href="#architectures" id="ref-for-architectures">architecture</a>, a strand might map to a thread, or it might map to a single SIMD lane, depending on how code is compiled.
On a typical GPU <a data-link-type="dfn" href="#architectures" id="ref-for-architectures①">architecture</a>, a strand might map to a thread, or it might map to a wave, thread block, or other granularity.</p>
   <p class="note" role="note"><span class="marker">Note:</span> An implementation is allowed to "migrate" a strand from one thread to another.</p>
   <p>A strand is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="launched">launched</dfn> for some <a data-link-type="dfn" href="#invocable" id="ref-for-invocable">invocable</a> declaration <var>D</var>, with an initial stack comprising a single activation record for <var>D</var>, a</p>
   <h3 class="heading settled" data-level="11.2" id="exec.activation"><span class="secno">11.2. </span><span class="content">Activation Records</span><a class="self-link" href="#exec.activation"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activation-record">activation record</dfn> represents the state of a single invocation of some <a data-link-type="dfn" href="#invocable" id="ref-for-invocable①">invocable</a> declaration by some strand.
An <a data-link-type="dfn" href="#activation-record" id="ref-for-activation-record①">activation record</a> for <a data-link-type="dfn" href="#invocable" id="ref-for-invocable②">invocable</a> declaration <var>D</var> by strand <var>S</var> consists of:</p>
   <ul>
    <li data-md>
     <p>A value for each parameter of <var>D</var></p>
    <li data-md>
     <p>The location <var>L</var> within the <a data-link-type="dfn" href="#body" id="ref-for-body">body</a> of <var>D</var> that <var>S</var>’s execution has reached for that invocation</p>
    <li data-md>
     <p>A value for each local variable of <var>D</var> that is in scope at <var>L</var></p>
   </ul>
   <h3 class="heading settled" data-level="11.3" id="exec.wave"><span class="secno">11.3. </span><span class="content">Waves</span><a class="self-link" href="#exec.wave"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="wave">wave</dfn> is a set of one or more <a data-link-type="dfn" href="#strand" id="ref-for-strand②">strands</a> that execute concurrently.
At each point in its execution, a strand belongs to one and only one <a data-link-type="dfn" href="#wave" id="ref-for-wave">wave</a>.</p>
   <p>Waves are guaranteed to make forward progress independent of other waves.
Strands that belong to the same wave are not guaranteed to make independent forward progress.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A runtime system can execute the strands of a wave in "lock-step" fashion, if it chooses.</p>
   <p>Strands that are <a data-link-type="dfn" href="#launched" id="ref-for-launched">launched</a> to execute a <a data-link-type="dfn" href="#kernel" id="ref-for-kernel">kernel</a> as part of a <a data-link-type="dfn" href="#dispatch" id="ref-for-dispatch">dispatch</a> will only ever be in the same wave as strands that were launched as part of the same <a data-link-type="dfn" href="#dispatch" id="ref-for-dispatch①">dispatch</a>.</p>
   <p>Every <a data-link-type="dfn" href="#wave" id="ref-for-wave①">wave</a> <var>W</var> has an integer <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="wave-size">wave size</dfn> <var>N</var> > 0.
Every strand that belongs to <var>W</var> has an integer <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="lane-id">lane ID</dfn> <var>i</var>, with 0 &lt;= <var>i</var> &lt; <var>N</var>.
Distinct strands in <var>W</var> have distinct <a data-link-type="dfn" href="#lane-id" id="ref-for-lane-id">lane IDs</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A wave with <a data-link-type="dfn" href="#wave-size" id="ref-for-wave-size">wave size</a> <var>N</var> can have at most <var>N</var> strands that belong to it, but it can also have fewer.
This might occur because a partially-full wave was launched, or because strands in the wave terminated.
If strands in a wave have terminated, it is possible that there will be gaps in the sequence of used lane IDs.</p>
   <p>Two strands that are launched for the same kernel for the same node of the same pipeline configuration as part of the same dispatch will belong to waves with the same wave size.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Wave sizes can differ across target platforms, pipeline stages, and even different optimization choices made by a compiler.</p>
   <h3 class="heading settled" data-level="11.4" id="exec.uniformity"><span class="secno">11.4. </span><span class="content">Uniformity</span><a class="self-link" href="#exec.uniformity"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="collective">collective</dfn> operation is one that require multiple strands to coordinate.
A <a data-link-type="dfn" href="#collective" id="ref-for-collective">collective</a> operation is only guaranteed to execute correctly when the required subset of strands all <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="participate">participate</dfn> in the operation together.</p>
   <h4 class="heading settled" data-level="11.4.1" id="exec.uniformity.tangle"><span class="secno">11.4.1. </span><span class="content">Tangle</span><a class="self-link" href="#exec.uniformity.tangle"></a></h4>
   <p>Any strand begins execution of an entry point as part of a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tangle">tangle</dfn> of strands.
The <a data-link-type="dfn" href="#tangle" id="ref-for-tangle">tangle</a> that a strand belongs to can change over the course of its execution.
When a strand executes a collective operation, it <a data-link-type="dfn" href="#participate" id="ref-for-participate">participates</a> with those strands that are part of the same tangle.</p>
   <p>When a strand executes a conditional control-flow operation, it branches to a destination that can depend on a condition value.
When the strands of a tangle execute a conditional control-flow operation, each strand in the tangle becomes part of a new tangle with exactly those strands that branch to the same destination.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="control-flow-region">control-flow region</dfn> is a pair of nodes (<var>E</var>, <var>M</var>) in the control-flow graph of a function, such that either:</p>
   <ul>
    <li data-md>
     <p><var>E</var> dominates <var>M</var></p>
    <li data-md>
     <p><var>M</var> is unreachable</p>
   </ul>
   <p>A node <var>N</var> in the control-flow graph of a function is inside the region (<var>E</var>, <var>M</var>) if <var>E</var> dominates <var>N</var> and <var>M</var> does not dominate <var>N</var>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="structured-region">structured region</dfn> is a <a data-link-type="dfn" href="#control-flow-region" id="ref-for-control-flow-region">control-flow region</a> that is significant to the Slang language semantics.</p>
   <p>For each function body, there is a <a data-link-type="dfn" href="#structured-region" id="ref-for-structured-region">structured region</a> (<var>Entry</var>, <var>Exit</var>) where <var>Entry</var> is the unique entry block of the function’s control-flow graph, and <var>Exit</var> is a unique block dominated by all points where control flow can exit the function body.</p>
   <p>Each conditional control-flow operation has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="merge-point">merge point</dfn>,
and defines a structured region (<var>C</var>, <var>M</var>) where <var>C</var> is the control-flow operation and <var>M</var> is its <a data-link-type="dfn" href="#merge-point" id="ref-for-merge-point">merge point</a>.</p>
   <p>A strand <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="breaks-out-of">breaks out of</dfn> a control-flow region (<var>E</var>, <var>M</var>) if it enters the region (by branching to <var>E</var>) and then subsequently exits the region by branching to some node <var>N</var>, distinct from <var>M</var>, that is not inside the region.</p>
   <p class="note" role="note"><span class="marker">Note:</span> We define the case where a strand <a data-link-type="dfn" href="#breaks-out-of" id="ref-for-breaks-out-of">breaks out of</a> a region, but not the case where a strand exits a region normally.
The motivation for this choice is that a strand that goes into an infinite loop without exiting a region needs to be treated the same as a strand that exits that region normally.</p>
   <p>When the strands in a tangle enter a structured control-flow region (<var>E</var>, <var>M</var>), all of the strands in the tangle that do not break out of that region form a new region at <var>M</var>.</p>
   <h4 class="heading settled" data-level="11.4.2" id="exec.uniformity.dynamic"><span class="secno">11.4.2. </span><span class="content">Dynamic Uniformity</span><a class="self-link" href="#exec.uniformity.dynamic"></a></h4>
   <p>Uniformity must be defined relative to some granularity of grouping for strands: e.g., per-strand, per-wave, per-block, etc.</p>
   <p>When the strands in a tangle evaluate some expression, we say that the result is dynamically per-<var>G</var> for some granularity of group <var>G</var>, if for any two strands in the tangle that are in the same <var>G</var>, those strands compute the same value for that expression.</p>
   <p>We say that a tangle is executing code dynamically per-<var>G</var> uniform when for every <var>G</var>, either all of the strands in that <var>G</var> are in the tangle, or all of them are not in that tangle.</p>
   <h4 class="heading settled" data-level="11.4.3" id="exec.uniformity.static"><span class="secno">11.4.3. </span><span class="content">Static Uniformity</span><a class="self-link" href="#exec.uniformity.static"></a></h4>
   <p>A value in a Slang program (such as the result of evaluating an expression) is statically per-<var>G</var>, for some granularity of group <var>G</var>, if it can be proved, using the rules in this specification, that the value will always be dynamically per-<var>G</var> at runtime.</p>
   <p>We say that control-flow is statically per-<var>G</var> uniform at some point in a program if it can be proved, using the rules in this specification, that at runtime any stand at that point would be part of a tangle that is per-<var>G</var> uniform.</p>
   <p>TODO: Okay, now we actually need to write just such rules...</p>
   <h2 class="heading settled" data-level="12" id="gpu"><span class="secno">12. </span><span class="content">GPUs</span><a class="self-link" href="#gpu"></a></h2>
   <h3 class="heading settled" data-level="12.1" id="gpu.dispatch"><span class="secno">12.1. </span><span class="content">Dispatches</span><a class="self-link" href="#gpu.dispatch"></a></h3>
   <p>Work is issued to a GPU device in the form of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="commands">commands</dfn>.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dispatch">dispatch</dfn> is a <a data-link-type="dfn" href="#commands" id="ref-for-commands">command</a> that causes a GPU device to execute a specific <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance">pipeline instance</a>.</p>
   <p>A dispatch determines:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance①">pipeline instance</a> <var>P</var> to execute</p>
    <li data-md>
     <p>A value for each of the <a data-link-type="dfn" href="#dispatch-parameters" id="ref-for-dispatch-parameters">dispatch parameters</a> of <var>P</var></p>
    <li data-md>
     <p>A value for each of the <a data-link-type="dfn" href="#uniform-shader-parameters" id="ref-for-uniform-shader-parameters">uniform shader parameters</a> of <var>P</var></p>
   </ul>
   <h4 class="heading settled" data-level="12.1.1" id="exec.gpu.pipeline"><span class="secno">12.1.1. </span><span class="content">Pipeline Instance</span><a class="self-link" href="#exec.gpu.pipeline"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-instance">pipeline instance</dfn> is an instance of some <a data-link-type="dfn" href="#pipeline-type" id="ref-for-pipeline-type">pipeline type</a>, and consists of:</p>
   <ul>
    <li data-md>
     <p>A set of zero or more <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance">stage instances</a></p>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#bundle" id="ref-for-bundle①">bundle</a></p>
   </ul>
   <p>The <a data-link-type="dfn" href="#kernel" id="ref-for-kernel①">kernels</a> of any <a data-link-type="dfn" href="#programmable" id="ref-for-programmable">programmable</a> <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance①">stage instances</a> in a <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance②">pipeline instance</a> must be compatible with the <a data-link-type="dfn" href="#bundle" id="ref-for-bundle②">bundle</a> of the <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance③">pipeline instance</a>.</p>
   <h5 class="heading settled" data-level="12.1.1.1" id="exec.gpu.pipeline.type"><span class="secno">12.1.1.1. </span><span class="content">Pipeline Types</span><a class="self-link" href="#exec.gpu.pipeline.type"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pipeline-type">pipeline type</dfn> is a category of workloads that a GPU can support.
Slang supports the following pipeline types:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#rasterization-pipeline" id="ref-for-rasterization-pipeline">rasterization pipelines</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#compute-pipeline" id="ref-for-compute-pipeline">compute pipelines</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#ray-tracing-pipeline" id="ref-for-ray-tracing-pipeline">ray-tracing pipelines</a></p>
   </ul>
   <p>Each <a data-link-type="dfn" href="#pipeline-type" id="ref-for-pipeline-type①">pipeline type</a> <var>PT</var> defines:</p>
   <ul>
    <li data-md>
     <p>Zero or more <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dispatch-parameters">dispatch parameters</dfn>, each having a name and a type</p>
    <li data-md>
     <p>A set of <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type">stage types</a></p>
    <li data-md>
     <p>A set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="associated-record-types">associated record types</dfn></p>
    <li data-md>
     <p>Validation rules for <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance④">pipeline instances</a> of type <var>PT</var></p>
   </ul>
   <h4 class="heading settled" data-level="12.1.2" id="exec.gpu.pipeline.stage"><span class="secno">12.1.2. </span><span class="content">Stage Instances</span><a class="self-link" href="#exec.gpu.pipeline.stage"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="stage-instance">stage instance</dfn> is an instance of some <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type①">stage type</a> <var>ST</var>, and consists of:</p>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#kernel" id="ref-for-kernel②">kernel</a> <var>K</var> for <var>ST</var>, if <var>ST</var> is <a data-link-type="dfn" href="#programmable" id="ref-for-programmable①">programmable</a>.</p>
    <li data-md>
     <p>Values for each of the <a data-link-type="dfn" href="#fixed-function-parameters" id="ref-for-fixed-function-parameters">fixed-function parameters</a> of <var>ST</var> that are not included in <var>K</var></p>
   </ul>
   <h5 class="heading settled" data-level="12.1.2.1" id="exec.gpu.pipeline.stage.type"><span class="secno">12.1.2.1. </span><span class="content">Stage Types</span><a class="self-link" href="#exec.gpu.pipeline.stage.type"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="stage-type">stage type</dfn> is a type of stage that may appear in <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance⑤">pipeline instances</a>.</p>
   <p>Each <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type②">stage type</a> belongs to a single <a data-link-type="dfn" href="#pipeline-type" id="ref-for-pipeline-type②">pipeline type</a>.</p>
   <p>A <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type③">stage type</a> is either <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="programmable">programmable</dfn> or it is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fixed-function">fixed-function</dfn>.</p>
   <p>A stage has zero or more <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fixed-function-parameters">fixed-function parameters</dfn>, each having a name and a type</p>
   <p>A <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type④">stage type</a> is either required, optional, or instanceable.</p>
   <h5 class="heading settled" data-level="12.1.2.2" id="exec.gpu.pipeline.stage.signature"><span class="secno">12.1.2.2. </span><span class="content">Signatures</span><a class="self-link" href="#exec.gpu.pipeline.stage.signature"></a></h5>
   <p>The signature of a programmable stage consists of its uniform signature and its varying signature.</p>
   <p>The uniform signature of a programmable stage is a sequence of types.</p>
   <p>A programmable stage has a set of boundaries.
Each programmable stage has an input boundary and an output boundary.</p>
   <p>The varying input signature of a programmable stage is its signature along its input boundary;
The varying output signature of a programmabel stage is its signature along its output boundary;</p>
   <p>The varying signature of a programmable stage comprises the boundary signature of that stage along each of its boundaries.</p>
   <p>To compute the signature of a stage <var>S</var> with a kernel based on a function <var>f</var>:</p>
   <ul>
    <li data-md>
     <p>Initialize the uniform signature of <var>S</var> to an empty sequence</p>
    <li data-md>
     <p>Initailize the boundary signature of <var>S</var> along each of its boundaries to an empty sequence</p>
    <li data-md>
     <p>If <var>f</var> has an implicit <code>this</code> parameter then:</p>
    <li data-md>
     <p>Append the type of the <code>this</code> parameter to the uniform signature of <var>S</var></p>
    <li data-md>
     <p>For each explicit parameter <var>p</var> of <var>f</var>:</p>
    <li data-md>
     <p>If <var>p</var> is <code>uniform</code>, then:</p>
     <ul>
      <li data-md>
       <p>Add the type of <var>p</var> to the uniform signature of <var>S</var></p>
     </ul>
    <li data-md>
     <p>Otherwise:</p>
     <ul>
      <li data-md>
       <p>TODO: handling of semantics!</p>
      <li data-md>
       <p>Add <var>p</var> to the varying signature of <var>S</var></p>
     </ul>
    <li data-md>
     <p>Add the result type <var>R</var> to the varying output signature of <var>S</var></p>
    <li data-md>
     <p>TODO: need to handle semantics on <var>f</var> as semantics on the result...</p>
   </ul>
   <p>The default way to add a parameter <var>p</var> to the varying signature of some stage <var>S</var> is:</p>
   <ul>
    <li data-md>
     <p>If the direction of <var>p</var> is <code>in</code> or <code>inout</code>, then add <var>p</var> to the varying input signature of <var>S</var></p>
    <li data-md>
     <p>If the direction of <var>p</var> is <code>out</code> or <code>inout</code>, then add <var>p</var> to the varying output signature of <var>S</var></p>
   </ul>
   <h4 class="heading settled" data-level="12.1.3" id="exec.gpu.pipeline.record"><span class="secno">12.1.3. </span><span class="content">Records</span><a class="self-link" href="#exec.gpu.pipeline.record"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="record">record</dfn> is an instance of an <a data-link-type="dfn" href="#associated-record-types" id="ref-for-associated-record-types">associated record type</a> of a <a data-link-type="dfn" href="#pipeline-type" id="ref-for-pipeline-type③">pipeline type</a>.
Data is passed between the <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance②">stage instances</a> of a <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance⑥">pipeline instance</a> in the form of <a data-link-type="dfn" href="#record" id="ref-for-record">records</a>.</p>
   <p>The varying input and output signature of a <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance③">stage instance</a> is defined with respect to the <a data-link-type="dfn" href="#associated-record-types" id="ref-for-associated-record-types①">associated record types</a> of the corresponding <a data-link-type="dfn" href="#pipeline-type" id="ref-for-pipeline-type④">pipeline type</a>.</p>
   <p>A <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance④">stage instance</a> depends on the <a data-link-type="dfn" href="#associated-record-types" id="ref-for-associated-record-types②">associated record types</a> that are part of its signature.
A <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance⑦">pipeline instance</a> depends on the <a data-link-type="dfn" href="#associated-record-types" id="ref-for-associated-record-types③">associated record types</a> that are part of its <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance⑤">stage instances</a>.</p>
   <p>A programmable stage has a set of boundaries.
Every programmable stage has an input boundary and an output boundary.</p>
   <p>A record type signature is a sequence of pairs (<var>T</var>, <var>s</var>), where <var>T</var> is a type and <var>s</var> is a semantic.
The varying signature of a programmable stage along one of its boundaries is a record type signature.</p>
   <p>For each <a data-link-type="dfn" href="#associated-record-types" id="ref-for-associated-record-types④">associated record type</a> <var>R</var> that a <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance⑧">pipeline instance</a> <var>P</var> depends on, if there are <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance⑥">stage instances</a> <var>A</var> and <var>B</var> in <var>P</var> such that <var>A</var> outputs <var>R</var> and <var>B</var> inputs <var>R</var>, then the configuration of <var>R</var> for <var>B</var> must be a prefix of the configuration of <var>A</var>.</p>
   <h5 class="heading settled" data-level="12.1.3.1" id="exec.gpu.pipeline.compute"><span class="secno">12.1.3.1. </span><span class="content">Compute</span><a class="self-link" href="#exec.gpu.pipeline.compute"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-pipeline">compute pipeline</dfn> instance is a <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance⑨">pipeline instance</a> with a single <a data-link-type="dfn" href="#stage-instance" id="ref-for-stage-instance⑦">stage instance</a> of <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type⑤">stage type</a> <code>compute</code>.
The <code>compute</code> <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type⑥">stage type</a> is <a data-link-type="dfn" href="#programmable" id="ref-for-programmable②">programmable</a>.</p>
   <p>A <a data-link-type="dfn" href="#dispatch" id="ref-for-dispatch②">dispatch</a> of a <a data-link-type="dfn" href="#compute-pipeline" id="ref-for-compute-pipeline①">compute pipeline</a> instance is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-dispatch">compute dispatch</dfn>.
A <a data-link-type="dfn" href="#compute-dispatch" id="ref-for-compute-dispatch">compute dispatch</a> invokes its kernel for each strand in a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="block">block</dfn> of strands.
The number and organization of strands in a <a data-link-type="dfn" href="#block" id="ref-for-block">block</a> is determined by a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="block-shape">block shape</dfn>.
A <a data-link-type="dfn" href="#block-shape" id="ref-for-block-shape">block shape</a> comprises its rank <var>N</var>, a positive integer, and its extent, a positive integer, along each axis <var>i</var>, where 0 &lt;= <var>i</var> &lt; <var>N</var>.
Typical GPU platforms support block shapes with ranks up to 3.</p>
   <p>An entry point for the <code>compute</code> stage may use a <code>[numthreads]</code> attribute to specify the block shape to be used by pipeline configurations using that entry point.</p>
   <p>The strands in a block are executed concurrently.</p>
   <p>Each block of strands that executes a compute entry point is part of a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="grid">grid</dfn> of blocks.
The number and organization of blocks in a <a data-link-type="dfn" href="#grid" id="ref-for-grid">grid</a> is determined by a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="grid-shape">grid shape</dfn>.
A <a data-link-type="dfn" href="#grid-shape" id="ref-for-grid-shape">grid shape</a> comprises its rank <var>N</var>, a positive integer, and its extent, a positive integer, along each axis <var>i</var>, where 0 &lt;= <var>i</var> &lt; <var>N</var>.
Typical GPU platforms support grid shapes with ranks up to 3.</p>
   <p>The blocks in a grid may be executed concurrently, but this is not guaranteed.</p>
   <h5 class="heading settled" data-level="12.1.3.2" id="exec.gpu.pipeline.raster"><span class="secno">12.1.3.2. </span><span class="content">Rasterization</span><a class="self-link" href="#exec.gpu.pipeline.raster"></a></h5>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="rasterization-pipeline">rasterization pipeline</dfn> instance is a <a data-link-type="dfn" href="#pipeline-instance" id="ref-for-pipeline-instance①⓪">pipeline instance</a>.</p>
   <h6 class="heading settled" data-level="12.1.3.2.1" id="exec.gpu.pipeline.raster.stage.fetch.index"><span class="secno">12.1.3.2.1. </span><span class="content">Index Fetch</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.fetch.index"></a></h6>
   <h6 class="heading settled" data-level="12.1.3.2.2" id="exec.gpu.pipeline.raster.stage.fetch.vertex"><span class="secno">12.1.3.2.2. </span><span class="content">Vertex Fetch</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.fetch.vertex"></a></h6>
   <p>Vertex fetch is a <a data-link-type="dfn" href="#fixed-function" id="ref-for-fixed-function">fixed-function</a> stage.</p>
   <p>This stage takes as input an <code>VertexIndex</code> record, and produces as output an <code>AssembledVertex</code> record.</p>
   <ul>
    <li data-md>
     <p>For each attribute of the <code>AssembledVertex</code> record, fetch data from the corresponding vertex stream, using either the instance ID or vertex ID (based on configuration).</p>
   </ul>
   <h6 class="heading settled" data-level="12.1.3.2.3" id="exec.gpu.pipeline.raster.stage.vertex"><span class="secno">12.1.3.2.3. </span><span class="content">Vertex Shader</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.vertex"></a></h6>
   <p>The <code>vertex</code> <a data-link-type="dfn" href="#stage-type" id="ref-for-stage-type⑦">stage type</a> is <a data-link-type="dfn" href="#programmable" id="ref-for-programmable③">programmable</a>.</p>
   <p>The signature of a vertex stage is:</p>
   <ul>
    <li data-md>
     <p>One <code>AssembledVertex</code> record as input</p>
    <li data-md>
     <p>One <code>CoarseVertex</code> record as output</p>
   </ul>
   <p>This stage takes as input one <code>AssembledVertex</code> record, and produces as output one <code>CoarseVertex</code> record.</p>
   <p>Given an entry point function for the <code>vertex</code> stage:</p>
   <ul>
    <li data-md>
     <p>Iterate over its entry-point parameters</p>
    <li data-md>
     <p>If the parameter is <code>uniform</code>, then add it to the uniform signature</p>
    <li data-md>
     <p>If the parameter is <code>in</code> or <code>inout</code>, then add it to the <code>AssembledVertex</code> record signature</p>
    <li data-md>
     <p>If the parameter is <code>out</code> or <code>inout</code>, then add it to the <code>CoarseVertex</code> record signature</p>
   </ul>
   <p>A given dispatch may invoke the kernel for the <code>vertex</code> stage one or more times for each vertex ID and instance ID.</p>
   <h6 class="heading settled" data-level="12.1.3.2.4" id="exec.gpu.pipeline.raster.stage.primitive-assembly"><span class="secno">12.1.3.2.4. </span><span class="content">Primitive Assembly</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.primitive-assembly"></a></h6>
   <p>A primitive consists of a primitive topology and N vertices, where N matches the requirements of that primitive topology.</p>
   <p>This stage takes as input coarse vertex records from a preceding stage.
It produces as output primitives of coarse vertex records.</p>
   <h6 class="heading settled" data-level="12.1.3.2.5" id="exec.gpu.pipeline.raster.stage.tess"><span class="secno">12.1.3.2.5. </span><span class="content">Tessellation</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.tess"></a></h6>
   <p>###### Hull Shader ###### {#exec.gpu.pipeline.raster.stage.tess.hull}</p>
   <p>This stage takes as input a patch primitive of coarse vertex records.
It produces as output a patch primitive of control point records a patch record.</p>
   <p>###### Domain Shader ###### {#exec.gpu.pipeline.raster.stage.tess.domain}</p>
   <p>This stage takes as input a patch primitive of control point records, and a patch record.
It outputs a fine vertex record.</p>
   <h6 class="heading settled" data-level="12.1.3.2.6" id="exec.gpu.pipeline.raster.stage.geometry"><span class="secno">12.1.3.2.6. </span><span class="content">Geometry Shader</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.geometry"></a></h6>
   <p>This stage takes as input a primitive of vertex records (either coarse or fine vertices, depending on what preceding stages are enabled).
As output, a geometry shader may have one or more output streams, each having a coresponding type of record.
For each output stream, a strand executing a geometry shader may output zero or more records of the corresponding type.</p>
   <p>If one of the output streams of the geometry shader is connected to the rasterizer stage, then that output stream corresponds to raster vertex records.</p>
   <h6 class="heading settled" data-level="12.1.3.2.7" id="exec.gpu.pipeline.raster.stage.mesh"><span class="secno">12.1.3.2.7. </span><span class="content">Mesh Shading</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.mesh"></a></h6>
   <h6 class="heading settled" data-level="12.1.3.2.8" id="exec.gpu.pipeline.raster.stage.rasterizer"><span class="secno">12.1.3.2.8. </span><span class="content">Rasterizer</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.rasterizer"></a></h6>
   <p>The rasterizer is a <a data-link-type="dfn" href="#fixed-function" id="ref-for-fixed-function①">fixed-function</a> stage.</p>
   <p>This stage takes as input a primitive of raster vertex records, and determines which pixels in a render target that primitive covers.
The stage outputs zero or more raster fragment records, one for each covered pixel.</p>
   <h6 class="heading settled" data-level="12.1.3.2.9" id="exec.gpu.pipeline.raster.stage.depth-stencil-test"><span class="secno">12.1.3.2.9. </span><span class="content">Depth/Stencil Test</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.depth-stencil-test"></a></h6>
   <h6 class="heading settled" data-level="12.1.3.2.10" id="exec.gpu.pipeline.raster.stage.fragment"><span class="secno">12.1.3.2.10. </span><span class="content">Fragment Shader</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.fragment"></a></h6>
   <p>This stage takes as input a raster fragment record, and produces as output either:</p>
   <ul>
    <li data-md>
     <p>One <code>ShadedFragment</code> record</p>
    <li data-md>
     <p>One <code>ShadedFragment</code> record and N <code>ShadedFragment.Sample</code> records</p>
   </ul>
   <h6 class="heading settled" data-level="12.1.3.2.11" id="exec.gpu.pipeline.raster.stage.blend"><span class="secno">12.1.3.2.11. </span><span class="content">Blend</span><a class="self-link" href="#exec.gpu.pipeline.raster.stage.blend"></a></h6>
   <p>This stage takes as input a <code>ShadedFragment</code> record (possibly including its <code>ShadedFragment.Sample</code>) and a <code>Pixel</code> record, and produces as output a <code>Pixel</code> record.</p>
   <h5 class="heading settled" data-level="12.1.3.3" id="exec.gpu.pipeline.ray-tracing"><span class="secno">12.1.3.3. </span><span class="content">Ray Tracing</span><a class="self-link" href="#exec.gpu.pipeline.ray-tracing"></a></h5>
   <p>TODO: define the stages of the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ray-tracing-pipeline">ray-tracing pipeline</dfn>.</p>
   <h2 class="heading settled" data-level="13" id="stability"><span class="secno">13. </span><span class="content">Source and Binary Stability</span><a class="self-link" href="#stability"></a></h2>
   <div class="issue" id="issue-1af69862"><a class="self-link" href="#issue-1af69862"></a> This section needs to define what it means for something to be _stable_ vs. <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fragile">fragile</dfn>. </div>
   <h2 class="heading settled" data-level="14" id="sec.module"><span class="secno">14. </span><span class="content">Modules</span><a class="self-link" href="#sec.module"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="module">module</dfn> is a unit of encapsulation for declarations.</p>
   <h3 class="heading settled" data-level="14.1" id="module.source.primary"><span class="secno">14.1. </span><span class="content">Primary Source Unit</span><a class="self-link" href="#module.source.primary"></a></h3>
   <p>One or more <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①⑤">source units</a> may be compiled together to form a module.
Compilation of a module begins with a single <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①⑥">source unit</a> that is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="primary-source-unit">primary source unit</dfn> of the module.
An implementation <em>should</em> use the <a data-link-type="dfn" href="#primary-source-unit" id="ref-for-primary-source-unit">primary source unit</a> as a means to identify a module when resolving references from one module to another.</p>
   <p>A <a data-link-type="dfn" href="#primary-source-unit" id="ref-for-primary-source-unit①">primary source unit</a> may start with a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="module-declaration">module declaration</dfn>, which specifies the name of the module:</p>
<pre class="language-.syntax">ModuleDeclaration :
    `module` Identifier `;`
</pre>
   <p>If a <a data-link-type="dfn" href="#primary-source-unit" id="ref-for-primary-source-unit②">primary source unit</a> does not start with a <a data-link-type="dfn" href="#module-declaration" id="ref-for-module-declaration">module declaration</a>, the module comprises only a single source unit, and the name of the module must be determined by some implementation-specified method.
A <a data-link-type="dfn" href="#primary-source-unit" id="ref-for-primary-source-unit③">primary source unit</a> without a <a data-link-type="dfn" href="#module-declaration" id="ref-for-module-declaration①">module declaration</a> must not contain any <code>include</code> declarations.</p>
   <p class="note" role="note"><span class="marker">Note:</span> An implementation might derive a default module name from a file name/path, command-line arguments, build configuration files, etc.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A module might be defined in a single source unit, but have code spread across multiple files.
For example, <code>#include</code> directives might be used so that the content of a single <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①⑦">source unit</a> comes from multiple files.</p>
   <p>A <a data-link-type="dfn" href="#module-declaration" id="ref-for-module-declaration②">module declaration</a> must always be the first declaration in its <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①⑧">source unit</a>.
A <a data-link-type="dfn" href="#module-declaration" id="ref-for-module-declaration③">module declaration</a> must not appear in any <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit①⑨">source unit</a> that is not a primary <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②⓪">source unit</a>.</p>
   <h3 class="heading settled" data-level="14.2" id="module.source.secondary"><span class="secno">14.2. </span><span class="content">Seconary Source Units</span><a class="self-link" href="#module.source.secondary"></a></h3>
   <p>Any <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②①">source units</a> in a module other than the <a data-link-type="dfn" href="#primary-source-unit" id="ref-for-primary-source-unit④">primary source unit</a> are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="secondary-source-units">secondary source units</dfn>.</p>
   <h4 class="heading settled" data-level="14.2.1" id="module.include"><span class="secno">14.2.1. </span><span class="content">Include Declarations</span><a class="self-link" href="#module.include"></a></h4>
   <p>Secondary <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②②">source units</a> are included into a module via <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="include-declarations">include declarations</dfn>.</p>
<pre class="language-.syntax">IncludeDeclaration :
    `include` path:PathSpecifier `;`

PathSpecifier :
    PathElement ( `.` PathElement )*

PathElement :
    Identifier
    | StringLiteral
</pre>
   <p>An implementation must use the _path_ given in an <a data-link-type="dfn" href="#include-declarations" id="ref-for-include-declarations">include declaration</a> to identify a <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②③">source unit</a> via implementation-specified means.
It is an error if <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②④">source unit</a> matching the given name cannot be identified.</p>
   <div class="note" role="note">
     Include declarations are distinct from preprocessor <code>#include</code> directives. 
    <p>Each <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②⑤">source unit</a> in a module is preprocessed independently, and the preprocessor state at the point where an <code>include</code> declaration appears does not have any impact on how the <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②⑥">source unit</a> identified by that include declaration will be preprocessed.</p>
   </div>
   <p>A <a data-link-type="dfn" href="#module" id="ref-for-module⑤">module</a> comprises the transitive closure of <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②⑦">source units</a> referred to via <a data-link-type="dfn" href="#include-declarations" id="ref-for-include-declarations①">include declarations</a>.
An implementation must use an implementation-specified means to determine if multiple <a data-link-type="dfn" href="#include-declarations" id="ref-for-include-declarations②">include declarations</a> refer to the same <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②⑧">source unit</a> or not.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Circular, and even self-referential, <code>include</code> declarations are allowed.</p>
   <h4 class="heading settled" data-level="14.2.2" id="module.implementing"><span class="secno">14.2.2. </span><span class="content">Implementing Declarations</span><a class="self-link" href="#module.implementing"></a></h4>
   <p>Secondary <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit②⑨">source units</a> must start with an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="implementing-declaration">implementing declaration</dfn>, naming the module that the <a data-link-type="dfn" href="#secondary-source-units" id="ref-for-secondary-source-units">secondary source unit</a> is part of:</p>
<pre class="language-.syntax">ImplementingDeclaration}
    `implementing` PathSpecifier `;`
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> It is an error if the name on an <a data-link-type="dfn" href="#implementing-declaration" id="ref-for-implementing-declaration">implementing declaration</a> in a <a data-link-type="dfn" href="#secondary-source-units" id="ref-for-secondary-source-units①">secondary source unit</a> does not match the name on the <a data-link-type="dfn" href="#module-declaration" id="ref-for-module-declaration④">module declaration</a> of the corresponding primary <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③⓪">source unit</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="dfn" href="#implementing-declaration" id="ref-for-implementing-declaration①">implementing declaration</a>s ensure that given a source unit, a tool can always identify the module that the <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③①">source unit</a> is part of (which can in turn be used to identify all of the <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③②">source units</a> in the module via its <code>include</code> declarations).</p>
   <p>An <a data-link-type="dfn" href="#implementing-declaration" id="ref-for-implementing-declaration②">implementing declaration</a> must always be the first declaration in its <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③③">source unit</a>.
An <a data-link-type="dfn" href="#implementing-declaration" id="ref-for-implementing-declaration③">implementing declaration</a> must not appear in any <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③④">source unit</a> that is not a secondary <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③⑤">source unit</a>.</p>
   <h3 class="heading settled" data-level="14.3" id="module.import"><span class="secno">14.3. </span><span class="content">Import Declarations</span><a class="self-link" href="#module.import"></a></h3>
   <p>Modules may depend on one another via <code>import</code> declarations.</p>
<pre class="language-.syntax">ImportDeclaration :
  `import` PathSpecifier `;`
</pre>
   <p>An <code>import</code> declaration names a module, and makes the public declarations in the named module visible to the current <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③⑥">source unit</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> An <code>import</code> declaration only applies to the scope of the current source unit, and does not import the chosen module so that it is visible to other <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③⑦">source units</a> of the current module.</p>
   <p>Implementations must use an implementation-specified method to resolve the name given in an <code>import</code> declaration to a module.
Implementations may resolve an <code>import</code> declaration to a previously compiled module.
Implementations may resolve an <code>import</code> declaration to a source unit, and then attempt to compile a module using that <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③⑧">source unit</a> as its primary <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit③⑨">source unit</a>.
If an implementation fails to resolve the name given in an <code>import</code> declaration, it must diagnose an error.
If an implementation diagnoses erros when compiling a soure unit named via an <code>import</code> declaration fails, it must diagnose an error.</p>
   <div class="note" role="note">
     The current Slang implementation searches for a module by translating the specified module name into a file path by: 
    <ul>
     <li data-md>
      <p>Replacing any dot (<code>.</code>) separators in a compound name with path separators (e.g., <code>/</code>)</p>
     <li data-md>
      <p>Replacing any underscores (<code>_</code>) in the name with hyphens (<code>-</code>)</p>
     <li data-md>
      <p>Appending the extension <code>.slang</code></p>
    </ul>
    <p>The implementation then looks for a file matching this path on any of its configured search paths.
If such a file is found it is loaded as a module comprising a single <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit④⓪">source unit</a>.</p>
   </div>
   <h2 class="heading settled" data-level="15" id="decl"><span class="secno">15. </span><span class="content">Declarations</span><a class="self-link" href="#decl"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declaration">declaration</dfn> is a unit of syntax that typically affects what names are visibile in a scope, and how those names are interpreted.
In the abstract syntax, a <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit④①">source unit</a> comprises a sequence of declarations.</p>
<pre class="language-.syntax">SourceUnit
    ( ModuleDeclaration | ImplementingDeclaration ) ?
    IncludeDeclaration*
    ImportDeclaration*
    ( Declaration )*
</pre>
   <p>A declaration may be preceded by zero or more modifiers.</p>
<pre class="language-.syntax">Declaration
    Modifier Declaration
    | VariableDeclaration
    | FunctionDeclaration
    | TypeDeclaration
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="binding">binding</dfn> is an association of an identifier with a specific entity, such as a declaration.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scope">scope</dfn> is a set of bindings.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A <a data-link-type="dfn" href="#scope" id="ref-for-scope">scope</a> can include more than one binding for the same identifier.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="environment">environment</dfn> is either the unique <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="empty-environment">empty environment</dfn>, or it comprises a scope that is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-scope">local scope</dfn> of that environment, and a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parent-environment">parent environment</dfn>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> No Slang code is ever parsed or checked in the <a data-link-type="dfn" href="#empty-environment" id="ref-for-empty-environment">empty environment</a>.
Many checking rules are expected to introduce new <a data-link-type="dfn" href="#local-scope" id="ref-for-local-scope">local scopes</a>, which will use the current environment as the <a data-link-type="dfn" href="#parent-environment" id="ref-for-parent-environment">parent environment</a>.</p>
   <p>For each production in the abtract syntax, there is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="input-environment">input environment</dfn> in effect at the start of that production, and an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="output-environment">output environment</dfn> in effect after that production.
Each production determines the <a data-link-type="dfn" href="#input-environment" id="ref-for-input-environment">input environment</a> used by its sub-terms.
When the description of a production does not say otherwise:</p>
   <ul>
    <li data-md>
     <p>The input environment of a production’s first sub-term is the input environment of that production.</p>
    <li data-md>
     <p>The input environment of each sub-term other than the first is the output environment of the preceding sub-term.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#output-environment" id="ref-for-output-environment">output environment</a> of the entire production is the output environment of its last sub-term.</p>
   </ul>
   <p>The output environment of a token is its input environment.
The output environment of an empty production is its input <a data-link-type="dfn" href="#environment" id="ref-for-environment">environment</a>.</p>
   <p>When we say that a declaration <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="introduces">introduces</dfn> a binding, we mean that its output environment is the output environment of its last sub-term extended with that binding.</p>
   <h3 class="heading settled" data-level="15.1" id="decl.shared"><span class="secno">15.1. </span><span class="content">Shared Concepts</span><a class="self-link" href="#decl.shared"></a></h3>
   <div class="issue" id="issue-2d8048fe"><a class="self-link" href="#issue-2d8048fe"></a> We need to define concepts that are used by traditional-style declarations, including <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type-specifiers">type specifiers</dfn>. </div>
   <h4 class="heading settled" data-level="15.1.1" id="TODO.decl.body"><span class="secno">15.1.1. </span><span class="content">Bodies</span><a class="self-link" href="#TODO.decl.body"></a></h4>
   <div class="issue" id="issue-9cc4a13a"><a class="self-link" href="#issue-9cc4a13a"></a> We need to define that there are two kinds of bodies: <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declaration-bodies">declaration bodies</dfn> and _statement bodies_. </div>
   <h4 class="heading settled" data-level="15.1.2" id="TODO.decl.base"><span class="secno">15.1.2. </span><span class="content">Bases</span><a class="self-link" href="#TODO.decl.base"></a></h4>
   <h4 class="heading settled" data-level="15.1.3" id="decl.param"><span class="secno">15.1.3. </span><span class="content">Parameters</span><a class="self-link" href="#decl.param"></a></h4>
   <p>A parameters clause defines a sequence of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parameter-declarations">parameter declarations</dfn>.</p>
<pre class="language-.syntax">ParametersClause
    `(` (ParameterDeclaration `,`)* `)`

ParameterDeclaration
    Identifier `:` Direction? TypeExpression DefaultValueClause?

DefaultValueClause
    `=` Expression
</pre>
   <p>A <a data-link-type="dfn" href="#parameter-declarations" id="ref-for-parameter-declarations">parameter declaration</a> must include a type expression; the type of the parameter is the result of evaluating that type expression.</p>
   <p>A parameter declaration may include a default-value clause; it it does, the default value for that parameter is the result of evaluating the expression in that clause with an expected type that is the type of the parameter.</p>
   <h5 class="heading settled" data-level="15.1.3.1" id="dir"><span class="secno">15.1.3.1. </span><span class="content">Directions</span><a class="self-link" href="#dir"></a></h5>
   <p>Every parameter has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="direction">direction</dfn>, which determines how an argument provided at a call site is connected to that parameter.</p>
<pre class="language-.syntax">Direction
    `in`
    | `out`
    | `take`
    | `borrow`
    | `inout` | `in` `out`
    | `ref`
</pre>
   <p>If a parameter declaration includes a <a data-link-type="dfn" href="#direction" id="ref-for-direction">direction</a>, then that determines the direction of the parameter; otherwise the direction of the parameter is <code>in</code>.</p>
   <h6 class="heading settled" data-level="15.1.3.1.1" id="dir.in"><span class="secno">15.1.3.1.1. </span><span class="content"><code>in</code></span><a class="self-link" href="#dir.in"></a></h6>
   <p>The <code>in</code> direction indicates typical pass-by-value (copy-in) semantics.
The parameter in the callee binds to a copy of the argument value passed by the caller.</p>
   <h6 class="heading settled" data-level="15.1.3.1.2" id="out"><span class="secno">15.1.3.1.2. </span><span class="content"><code>out</code></span><a class="self-link" href="#out"></a></h6>
   <p>The <code>out</code> direction indicates copy-out semantics.
The parameter in the callee binds to a fresh storage location that is uninitialized on entry.
When the callee returns, the value in that location is moved to the storage location referenced by the argument.</p>
   <h6 class="heading settled" data-level="15.1.3.1.3" id="take"><span class="secno">15.1.3.1.3. </span><span class="content"><code>take</code></span><a class="self-link" href="#take"></a></h6>
   <p>The <code>take</code> direction indicates move-in semantics.
The argument provided by the caller is moved into the parameter of the callee, ending the lifetime of the argument.</p>
   <h6 class="heading settled" data-level="15.1.3.1.4" id="borrow"><span class="secno">15.1.3.1.4. </span><span class="content"><code>borrow</code></span><a class="self-link" href="#borrow"></a></h6>
   <p>The <code>borrow</code> direction indicates immutable borrow semantics.</p>
   <p>If the parameter has a noncopyable type, then the parameter in the callee binds to the storage location referenced by the argument.</p>
   <p>If the parameter has a copyable type, then the parameter in the callee may, at the discretion of the implementation, bind to either the storage location referenced by the argument, or a copy of the argument value.</p>
   <h6 class="heading settled" data-level="15.1.3.1.5" id="inout"><span class="secno">15.1.3.1.5. </span><span class="content"><code>inout</code></span><a class="self-link" href="#inout"></a></h6>
   <p>The <code>inout</code> direction indicates exclusive mutable borrow semantics.
The syntax <code>in</code> <code>out</code> is equivalent to <code>inout</code></p>
   <p>If the parameter has a noncopyable type, then the parameter in the callee binds to the storage location referenced by the argument.</p>
   <p>If the parameter has a copyable type, then the parameter in the callee may, at the discretion of the implementation, bind to either:</p>
   <ul>
    <li data-md>
     <p>the storage location referenced by the argument</p>
    <li data-md>
     <p>a fresh storage location, in which case that location is initialized with a copy of the argument value on entry, and the value at that location is written to the argument on return from the function.</p>
   </ul>
   <h6 class="heading settled" data-level="15.1.3.1.6" id="ref"><span class="secno">15.1.3.1.6. </span><span class="content"><code>ref</code></span><a class="self-link" href="#ref"></a></h6>
   <p>The <code>ref</code> direction indicates pass-by-reference semantics.
The parameter in the callee binds to the storage location referenced by the argument.</p>
   <h4 class="heading settled" data-level="15.1.4" id="TODO.decl.accessor"><span class="secno">15.1.4. </span><span class="content">Accessors</span><a class="self-link" href="#TODO.decl.accessor"></a></h4>
   <h4 class="heading settled" data-level="15.1.5" id="decl.invocable"><span class="secno">15.1.5. </span><span class="content">Invocable Declarations</span><a class="self-link" href="#decl.invocable"></a></h4>
   <p>A declaration that is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="invocable">invocable</dfn> can be invoked by a strand during execution.</p>
   <h3 class="heading settled" data-level="15.2" id="pattern"><span class="secno">15.2. </span><span class="content">Patterns</span><a class="self-link" href="#pattern"></a></h3>
<pre class="language-.syntax">
Pattern :=
    BindingPattern
    | TuplePattern
    | ExpressionPattern

TuplePattern := `(` (Pattern `,`)* `)`

ExpressionPattern := Expression

BindingPattern := `let` BindingPatternInner

BindingPatternInner :=
    Identifier
    | TuplePatternInner

TuplePatternInner := `(` (BindingPatternInner `,`)* `)`

</pre>
   <h3 class="heading settled" data-level="15.3" id="TODO.decl.generic"><span class="secno">15.3. </span><span class="content">Generics</span><a class="self-link" href="#TODO.decl.generic"></a></h3>
   <h3 class="heading settled" data-level="15.4" id="decl.type"><span class="secno">15.4. </span><span class="content">Type Declarations</span><a class="self-link" href="#decl.type"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type-declaration">type declaration</dfn> <a data-link-type="dfn" href="#introduces" id="ref-for-introduces">introduces</a> a binding to a type.</p>
<pre class="language-.syntax">TypeDeclaration =
    AggregateTypeDeclaration
    | EnumDeclaration
    | TypeAliasDeclaration
</pre>
   <h4 class="heading settled" data-level="15.4.1" id="decl.agg"><span class="secno">15.4.1. </span><span class="content">Aggregate Types</span><a class="self-link" href="#decl.agg"></a></h4>
<pre class="language-.syntax">AggregateTypeDeclaration
    (`struct` | `class` | `interface`) Identifier
    GenericParametersClause?
    BasesClause?
    GenericWhereClause?
    DeclarationBodyClause `;`?

DeclarationBodyClause
    `{` Declaration* `}` 
</pre>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="aggregate-type-declaration">aggregate type declaration</dfn> is either a <code>struct</code> declaration, a <code>class</code> declaration, or an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="interface-declaration">interface declaration</dfn>.</p>
   <p>The declarations in the body clause of an <a data-link-type="dfn" href="#aggregate-type-declaration" id="ref-for-aggregate-type-declaration">aggregate type declaration</a> are referred the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="direct-members">direct members</dfn> of that declaration.</p>
   <p class="note" role="note"><span class="marker">Note:</span> We need rules to define what the members that aren’t <a data-link-type="dfn" href="#direct-members" id="ref-for-direct-members">direct members</a> are.</p>
   <h5 class="heading settled" data-level="15.4.1.1" id="decl.agg.member.static"><span class="secno">15.4.1.1. </span><span class="content">Instance and Static Members</span><a class="self-link" href="#decl.agg.member.static"></a></h5>
   <p>Members of an aggregate type may me marked with a <code>static</code> modifier, in which case they are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="static-members">static members</dfn> of the type.
Members not marked with <code>static</code> are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="instance-members">instance members</dfn> of the type.</p>
   <p><a data-link-type="dfn" href="#static-members" id="ref-for-static-members">Static members</a> are referenced through the type itself. <a data-link-type="dfn" href="#instance-members" id="ref-for-instance-members">Instance members</a> are referened through values that are instances of the type.</p>
   <h5 class="heading settled" data-level="15.4.1.2" id="field"><span class="secno">15.4.1.2. </span><span class="content">Fields</span><a class="self-link" href="#field"></a></h5>
   <p>Variable declarations that are instance members of an aggregate type declaration are also referred to as the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fields">fields</dfn> of the aggregate type declaration.</p>
   <h5 class="heading settled" data-level="15.4.1.3" id="method"><span class="secno">15.4.1.3. </span><span class="content">Methods</span><a class="self-link" href="#method"></a></h5>
   <p><a data-link-type="dfn" href="#function-declaration" id="ref-for-function-declaration">Function declarations</a> that are instance members of an aggregate type declaration are also referred to as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="methods">methods</dfn>.</p>
   <p>By default, the implicit <code>this</code> parameter of a method acts has a direction of <code>in</code>.
A method of a <code>struct</code> type declaration may be modified with the <code>[mutating]</code> attribute, in which case the implicit <code>this</code> parameter has a direction of <code>inout</code>.</p>
   <h4 class="heading settled" data-level="15.4.2" id="decl.agg.bases"><span class="secno">15.4.2. </span><span class="content">Bases</span><a class="self-link" href="#decl.agg.bases"></a></h4>
<pre class="language-.syntax">BasesClause
    `:`Base (`,`Base)*

Base
    TypeExpression
</pre>
   <p>An aggregate type declaration has zero or more <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bases">bases</dfn>.
If an aggregate type declaration has no bases clause, then it has zero <a data-link-type="dfn" href="#bases" id="ref-for-bases">bases</a>;
otherwise, the bases of the aggregate type declaration are the types identified by eachBase in that clause.</p>
   <p>The list of bases of a <code>struct</code> declaration must consist of:</p>
   <ul>
    <li data-md>
     <p>at most one <code>struct</code> type</p>
    <li data-md>
     <p>zero or more interface types</p>
   </ul>
   <p>The list of bases of a <code>class</code> declaration must consist of:</p>
   <ul>
    <li data-md>
     <p>at most one <code>class</code> type</p>
    <li data-md>
     <p>zero or more interface types</p>
   </ul>
   <p>The list of bases of an <a data-link-type="dfn" href="#interface-declaration" id="ref-for-interface-declaration">interface declaration</a> must consist of:</p>
   <ul>
    <li data-md>
     <p>zero or more interface types</p>
   </ul>
   <h5 class="heading settled" data-level="15.4.2.1" id="decl.agg.syntax"><span class="secno">15.4.2.1. </span><span class="content">Traditional Syntax</span><a class="self-link" href="#decl.agg.syntax"></a></h5>
   <h6 class="heading settled" data-level="15.4.2.1.1" id="decl.agg.syntax.trailing-semicolon"><span class="secno">15.4.2.1.1. </span><span class="content">Trailing Semicolon</span><a class="self-link" href="#decl.agg.syntax.trailing-semicolon"></a></h6>
   <p>For compatibility, the body clause of an aggregate type declaration may end with a semicolon (<code>;</code>).
The body clause of an aggregate type declaration must end with a semicolon if there are any tokens between the closing <code>}</code> token and the next line break that follows it.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Put more simply: a closing <code>;</code> can be left off of an aggregate type declaration so long as there is nothing but trivia after it on the same line.</p>
   <h6 class="heading settled" data-level="15.4.2.1.2" id="decl.agg.type-specifier"><span class="secno">15.4.2.1.2. </span><span class="content">Aggregate Type Specifiers</span><a class="self-link" href="#decl.agg.type-specifier"></a></h6>
   <p>An aggregate type declaration may be used as a type specififer in declarations using traditional syntax.</p>
   <p>When an aggregate type declaration is used as a type specififer, the closing <code>}</code> of its body must be followed by another token on the same line.</p>
   <h4 class="heading settled" data-level="15.4.3" id="decl.enum"><span class="secno">15.4.3. </span><span class="content"><code>enum</code> Declarations</span><a class="self-link" href="#decl.enum"></a></h4>
<pre class="language-.syntax">EnumDeclaration
    `enum` Identifier
    GenericParametersClause?
    BasesClause?
    GenericWhereClause?
    EnumBody `;`?

EnumBody
    TraditionalEnumBody
    | DeclarationBody
</pre>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="enum-declaration"><code>enum</code> declaration</dfn> introduces a binding for a type whose instances value into one or more cases.</p>
   <p>An <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration">enum declaration</a> that has a declaration body is a modern <code>enum</code> declaration.
A <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration①">enum declaration</a> that has a traditional <code>enum</code> body is a traditional <code>enum</code> declaration.</p>
   <p>An <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration②">enum declaration</a> may have a bases clause, in which case the list of bases must consist of:</p>
   <ul>
    <li data-md>
     <p>at most one proper type; if present, this determines an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="underlying-type">underlying type</dfn> for the <code>enum</code> declaration.</p>
    <li data-md>
     <p>zero or more interface types</p>
   </ul>
   <p>A traditional <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration③">enum declaration</a> always has an <a data-link-type="dfn" href="#underlying-type" id="ref-for-underlying-type">underlying type</a>.
If an underlying type is not specified in the bases list of a traditional <code>enum</code> declaration, then the underlying type of that declaration is <code>Int</code>.
The underlying type of a traditional <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration④">enum declaration</a> must be a built-in integer type.</p>
   <p>A modern <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration⑤">enum declaration</a> must not specify an underlying type.</p>
   <h5 class="heading settled" data-level="15.4.3.1" id="case"><span class="secno">15.4.3.1. </span><span class="content">Cases</span><a class="self-link" href="#case"></a></h5>
<pre class="language-.syntax">CaseDeclaration :
    `case` Identifier InitialValueClause?
        
TraditionalEnumBody :
    `{` (TraditionalCaseDeclaration `,`)* `}`

TraditionalCaseDeclaration :
    Identifier InitialValueClause?
</pre>
   <p>The possible values of an <code>enum</code> type are determined by the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="case-declarations">case declarations</dfn> in its body.
An <code>enum</code> type has one case for each case declaration in its body.</p>
   <p>The <a data-link-type="dfn" href="#case-declarations" id="ref-for-case-declarations">case declarations</a> in a modern <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration⑥">enum declaration</a> are declared using the <code>case</code> keyword.
The case declarations in a traditional <code>enum</code> body are traditional case declarations.</p>
   <p>Each case of a traditional <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration⑦">enum declaration</a> has an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="underlying-value">underlying value</dfn>, that is a value of the <a data-link-type="dfn" href="#underlying-type" id="ref-for-underlying-type①">underlying type</a> of that <code>enum</code> declaration.
When a traditional case declaration includes an initial-value expression, its <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value">underlying value</a> is the result of evaluating that expression, with the underlying type of the <a data-link-type="dfn" href="#enum-declaration" id="ref-for-enum-declaration⑧">enum declaration</a> as the expected type.
The underlying value of a traditional case declaration must be an compile-time-constant integer value.
If a traditional case declaration does not have an initial-value expression, then its underlying value is one greater than the underlying value of the preceding case declaration, or zero if there is no preceding case declaration.</p>
   <p>Case declarations are implicitly static.</p>
   <h4 class="heading settled" data-level="15.4.4" id="decl.type.alias"><span class="secno">15.4.4. </span><span class="content">Type Aliases</span><a class="self-link" href="#decl.type.alias"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type-alias-declaration">type alias declaration</dfn> introduces a binding that resolves to some other type.</p>
<pre class="language-.syntax">TypeAliasDeclaration :
    ModernTypeAliasDeclaration
    | TraditionalTypeAliasDeclaration

ModernTypeAliasDeclaration :
    `typealias` Identifier
    GenericParametersClause?
    GenericWhereClause?
    `=` TypeExpression `;`
</pre>
   <p>TODO: <a data-link-type="dfn" href="#type-alias-declaration" id="ref-for-type-alias-declaration">type alias declaration</a></p>
<pre class="language-.checking">GIVEN identifier n, type t, context c
GIVEN t checks in c
THEN `typealias` n = t `;` checks in c
</pre>
   <h5 class="heading settled" data-level="15.4.4.1" id="decl.type.alias.syntax.traditional"><span class="secno">15.4.4.1. </span><span class="content">Traditional Syntax</span><a class="self-link" href="#decl.type.alias.syntax.traditional"></a></h5>
   <p>A type alias may also be declared using a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="traditional-type-alias-declaration">traditional type alias declaration</dfn>.</p>
<pre class="language-.syntax">TraditionalTypeAliasDeclaration :
    `typedef` TypeSpecifier Declarator `;`
</pre>
   <p>TODO: <a data-link-type="dfn" href="#traditional-type-alias-declaration" id="ref-for-traditional-type-alias-declaration">traditional type alias declaration</a></p>
   <p>To desguar a <a data-link-type="dfn" href="#traditional-type-alias-declaration" id="ref-for-traditional-type-alias-declaration①">traditional type alias declaration</a> <code>typedef</code> <var>ts</var> <var>d</var> <code>;</code>, where <var>ts</var> is a type specifier and <var>d</var> is a declarator:</p>
   <ul>
    <li data-md>
     <p>Unwrap <var>d</var> for <var>ts</var> to yield type expression <var>t</var> and optional name declarator <var>nd</var></p>
    <li data-md>
     <p>If <var>nd</var> is not present then:</p>
     <ul>
      <li data-md>
       <p>diagnose an error</p>
     </ul>
    <li data-md>
     <p>Otherwise:</p>
     <ul>
      <li data-md>
       <p>Let <var>n</var> be the name of <var>nd</var></p>
      <li data-md>
       <p>Return the modern type alias declaration <code>typealias</code> <var>n</var> <code>=</code> <var>t</var> <code>;</code></p>
     </ul>
   </ul>
   <h4 class="heading settled" data-level="15.4.5" id="decl.type.associated"><span class="secno">15.4.5. </span><span class="content">Associated Types</span><a class="self-link" href="#decl.type.associated"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="associated-type-declaration">associated type declaration</dfn> introduces a type requirement to an <a data-link-type="dfn" href="#interface-declaration" id="ref-for-interface-declaration①">interface declaration</a>.</p>
<pre class="language-.syntax">AssociatedTypeDeclaration
    `associatedtype` Identifier
    GenericParametersClause?
    BasesClause?
    GenericWhereClause? `;`
</pre>
   <p>An <a data-link-type="dfn" href="#associated-type-declaration" id="ref-for-associated-type-declaration">associated type declaration</a> may only appear as a member declaration of an <a data-link-type="dfn" href="#interface-declaration" id="ref-for-interface-declaration②">interface declaration</a>.</p>
   <p>An associated type is an interface requirement, and different implementations of an interface may provide different types that satisfy the same associated type interface requirement.</p>
   <h3 class="heading settled" data-level="15.5" id="decl.traditional"><span class="secno">15.5. </span><span class="content">Traditional Declarations</span><a class="self-link" href="#decl.traditional"></a></h3>
<pre class="language-.syntax">Declarator :
    NameDeclarator
    | ParenthesizedDeclarator
    | ArrayDeclarator
    | PointerDeclarator

NameDeclarator : Identifier

ParenthesizedDeclarator: `(` Declarator `)`

ArrayDeclarator: Declarator `[` (Expression `,`)* `]`

PointerDeclarator: `*` PointerQualifier* Declarator
</pre>
   <p>Unwrapping a declarator for some type expression yields a type expression and an optional name declarator.</p>
   <p>The unwrapping of a name declarator <var>nd</var> for a type expression <var>t</var> is (<var>t</var>, <var>nd</var>).</p>
   <p>The unwrapping of a parenthesized declarator <code>(</code> <var>d</var> <code>)</code> for a type expression <var>t</var> is the unwrapping of <var>d</var> for <var>t</var>.</p>
   <p>The unwrapping of an array declarator <var>d</var> <code>[</code> <var>args</var> <code>]</code> for a type expression <var>t</var> is the unwrapping of <var>d</var> for <code>Array&lt;</code><var>t</var>, <var>args</var><code>></code>.</p>
   <p>The unwrapping of a pointer declarator <code>*</code> <var>q</var> <var>d</var> for a type expression <var>t</var> is the unwrapping of <var>d</var> for <code>Ptr&lt;(</code><var>q</var> <var>t</var><code>)></code></p>
   <h3 class="heading settled" data-level="15.6" id="decl.var"><span class="secno">15.6. </span><span class="content">Variables</span><a class="self-link" href="#decl.var"></a></h3>
<pre class="language-.syntax">VariableDeclaration :
    (`let` | `var`) Identifier
        TypeAscriptionClause?
        InitialValueClause? `;`

TypeAscriptionClause :
    `:` TypeExpression

InitialValueClause :
    `=` Expression
</pre>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="variable">variable</dfn> is an <a data-link-type="dfn" href="#abstract-storage-location" id="ref-for-abstract-storage-location⑥">abstract storage location</a> that can hold a value.
Every <a data-link-type="dfn" href="#variable" id="ref-for-variable">variable</a> has a type, and it can only hold values of that type.
Every variable is either immutable or mutable.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="variable-declaration">variable declaration</dfn> introduces a binding for the given Identifier, to a variable.
A <a data-link-type="dfn" href="#variable-declaration" id="ref-for-variable-declaration">variable declaration</a> using the <code>let</code> keyword binds an immutable variable.
A <a data-link-type="dfn" href="#variable-declaration" id="ref-for-variable-declaration①">variable declaration</a> using the <code>var</code> keyword binds a mutable variable.</p>
   <p>Every variable declaration has a type, and the variable it <a data-link-type="dfn" href="#binds" id="ref-for-binds">binds</a> is of the same type.</p>
   <p>A variable declaration must have either a TypeAscriptionClause or an InitialValueClause; a variable declaration may have both.</p>
   <p>If a variable declaration has a type ascription, then let <var>T</var> be the type that results from evaluating the type expression of that type ascription in the input environment of the declaration.</p>
   <p>If a variable declaration has a TypeAscriptionClause and no InitialValueClause, then the type of that variable declaration is <var>T</var>.</p>
   <p>If a variable declaration has both a TypeAscriptionClause and an InitialValueClause, then let <var>E</var> be the value that results from evaluating the expression of the initial value clause against the expected type <var>T</var> in the input environment of the declaration.
The type of the variable declaration is the type of <var>E</var>, and its initial value is <var>E</var>.</p>
   <p>If a variable declaration has an InitialValueClause but no TypeAscriptionClause, then let <var>E</var> be the value that results from evaluating the expression of the initial value clause in the input environment of the declaration.
The type of the variable declaration is the type of <var>E</var>, and its initial value is <var>E</var>.</p>
   <h4 class="heading settled" data-level="15.6.1" id="decl.var.traditional"><span class="secno">15.6.1. </span><span class="content">Traditional Variable Declarations</span><a class="self-link" href="#decl.var.traditional"></a></h4>
   <p>Variable declaration may also be declared using traditional syntax, which is similar to C:</p>
<pre class="language-.syntax">VariableDeclaration :
    LegacyVariableDeclaration

LegacyVariableDeclaration :
    TypeSpecifier InitDeclarator * `;`

InitDeclarator :
    Declarator InitialValueClause ?
</pre>
   <p>To desugar a traditional variable declaration <var>typeSpecifier</var> <var>initDeclarators</var> <code>;</code>:</p>
   <ul>
    <li data-md>
     <p>Let variable <var>result</var> be an empty sequence of declarations</p>
    <li data-md>
     <p>Let <var>ts</var> be a fresh name</p>
    <li data-md>
     <p>Append <code>typealias</code> <var>ts</var> <code>=</code> <var>typeSpecifier</var> <code>;</code> to <var>result</var></p>
    <li data-md>
     <p>For each <var>i</var> in <var>initDeclarators</var>:</p>
     <ul>
      <li data-md>
       <p>Let <var>d</var> be the declarator of <var>i</var></p>
      <li data-md>
       <p>Unwrap <var>d</var> for <var>ts</var> to yield <var>n</var> and <var>t</var></p>
      <li data-md>
       <p>Let <var>iv</var> be the initial value clause of <var>i</var></p>
      <li data-md>
       <p>Let <var>v</var> be <code>var</code> <var>n</var> <code>:</code> <var>t</var> <var>iv</var> <code>;</code></p>
      <li data-md>
       <p>Append <var>v</var> to <var>result</var></p>
     </ul>
    <li data-md>
     <p>Return <var>result</var></p>
   </ul>
   <div class="issue" id="issue-f5fe1593"><a class="self-link" href="#issue-f5fe1593"></a> The above desugaring logic is ignoring modifiers.
It also isn’t making sure to use a <code>let</code> declaration where possible (because <var>t</var> ends up being <code>const</code>). </div>
   <p>A legacy variable declaration introduces a binding for each InitDeclarator.
Let <var>S</var> be the type that results from evaluating the TypeSpecifier in the input environment.
The type <var>T</var> corresponding to each declarator is determined by evaluating the declarator in the input environment, against input type <var>S</var>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Slang does not support the equivalent of the <code>auto</code> type specifier in C++.
Variables declared using <code>let</code> and <code>var</code> can be used to fill a similar role.</p>
   <p>The variables introduced by a legacy variable declaration are immutable if the declaration has a <code>const</code> modifier; otherwise it is mutable.</p>
   <h4 class="heading settled" data-level="15.6.2" id="decl.var.global"><span class="secno">15.6.2. </span><span class="content">Variables at Global Scope</span><a class="self-link" href="#decl.var.global"></a></h4>
   <p>A variable declaration at global scope may be either a global constant, a static global variable, or a global shader parameter.</p>
   <p>Variables declared at global scope may be either a global constant, a static global variables, or a global shader parameters.</p>
   <h5 class="heading settled" data-level="15.6.2.1" id="decl.var.global.const"><span class="secno">15.6.2.1. </span><span class="content">Global Constants</span><a class="self-link" href="#decl.var.global.const"></a></h5>
   <p>A variable declared at global scope and marked with <code>static</code> and <code>const</code> is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="global-constant">global constant</dfn>.</p>
   <p>A <a data-link-type="dfn" href="#global-constant" id="ref-for-global-constant">global constant</a> must have an initial-value clause, and the initial-value expression must be a compile-time constant expression.</p>
   <p class="issue" id="issue-d245d890"><a class="self-link" href="#issue-d245d890"></a> Need a section to define what a "compile-time constant expression" is.</p>
   <h5 class="heading settled" data-level="15.6.2.2" id="decl.var.global.static"><span class="secno">15.6.2.2. </span><span class="content">Static Global Variables</span><a class="self-link" href="#decl.var.global.static"></a></h5>
   <p>A variable declared at global scope and marked with <code>static</code> but not with <code>const</code> is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="static-global-variable">static global variable</dfn>.</p>
   <p>A <a data-link-type="dfn" href="#static-global-variable" id="ref-for-static-global-variable">static global variable</a> provides storage for each strand executing an entry point.
Writes to a static global variable from one strand do not affect the value seen by other strands.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The semantics of static global variable are similar to a "thread-local" variable in other programming models.</p>
   <p>A static global variable may include an initial-value expression; if an initial-value expression is included it is guaranteed to be evaluated and assigned to the variable before any other expression that references the variable is <a data-link-type="dfn" href="#evaluated" id="ref-for-evaluated">evaluated</a>.
If a thread attempts to read from a static global variable during the evaluation of the initial-value expression for that variable, a runtime error is raised.</p>
   <p>There is no guarantee that the initial-value expression for a static global variable is evaluated before entry point execution begins, or even that the initial-value expression is evaluated at all (in cases where the variable might not be referenced at runtime).</p>
   <p class="note" role="note"><span class="marker">Note:</span> The above rules mean that an implementation can perform dead code elimination on static global variables, and can choose between eager and lazy initialization of those variables at its discretion.</p>
   <h5 class="heading settled" data-level="15.6.2.3" id="global.param"><span class="secno">15.6.2.3. </span><span class="content">Global Shader Parameters</span><a class="self-link" href="#global.param"></a></h5>
   <p>A variable declared at global scope and not marked with <code>static</code> is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="global-shader-parameter">global shader parameter</dfn>.</p>
   <p><a data-link-type="dfn" href="#global-shader-parameter" id="ref-for-global-shader-parameter">Global shader parameters</a> are used to pass arguments from application code into strands executing an entry point.
The mechanisms for parameter passing are specific to each target platform.</p>
   <p>A global shader parameter may include an initial-value expression, but such an expression does not affect the semantics of the compiled program.</p>
   <p class="note" role="note"><span class="marker">Note:</span> An implementation can choose to provide ways to query the initial-value expression of a global shader parameter, or to evaluate it to a value. <a data-link-type="dfn" href="#host" id="ref-for-host③">Host</a> applications can use such capabilities to establish a default value for global shader parameters.</p>
   <p>TODO: We need to define <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="uniform-shader-parameters">uniform shader parameters</dfn> somewhere.</p>
   <h4 class="heading settled" data-level="15.6.3" id="decl.var.func"><span class="secno">15.6.3. </span><span class="content">Variables at Function Scope</span><a class="self-link" href="#decl.var.func"></a></h4>
   <p>Variables declared at <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-scope">function scope</dfn> (in the body of a function, initializer, subscript acessor, etc.) may be either a function-scope constant, function-scope static variable, or a local variable.</p>
   <h5 class="heading settled" data-level="15.6.3.1" id="const"><span class="secno">15.6.3.1. </span><span class="content">Function-Scope Constants</span><a class="self-link" href="#const"></a></h5>
   <p>A variable declared at <a data-link-type="dfn" href="#function-scope" id="ref-for-function-scope">function scope</a> and marked with both <code>static</code> and <code>const</code> is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-scope-constant">function-scope constant</dfn>.
Semantically, a <a data-link-type="dfn" href="#function-scope-constant" id="ref-for-function-scope-constant">function-scope constant</a> behaves like a global constant except that its name is only bound in the local scope.</p>
   <h5 class="heading settled" data-level="15.6.3.2" id="static"><span class="secno">15.6.3.2. </span><span class="content">Function-Scope Static Variables</span><a class="self-link" href="#static"></a></h5>
   <p>A variable declared at function scope and marked with <code>static</code> (but not <code>const</code>) is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-scope-static-variable">function-scope static variable</dfn>.
Semantically, a <a data-link-type="dfn" href="#function-scope-static-variable" id="ref-for-function-scope-static-variable">function-scope static variable</a> behaves like a global static variable except that its name is only visible in the local scope.</p>
   <p>The initial-value expression for a function-scope static variable may refer to non-static variables in the body of the function.
In these cases initialization of the variable is guaranteed not to occur until at least the first time the function body is evaluated for a given invocation.</p>
   <h5 class="heading settled" data-level="15.6.3.3" id="local"><span class="secno">15.6.3.3. </span><span class="content">Local Variables</span><a class="self-link" href="#local"></a></h5>
   <p>A variable declared at function scope and not marked with <code>static</code> (even if marked with <code>const</code>) is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-variable">local variable</dfn>.
A <a data-link-type="dfn" href="#local-variable" id="ref-for-local-variable">local variable</a> has unique storage for each activation of a function.</p>
   <p class="note" role="note"><span class="marker">Note:</span> When a function is called recursively, each call produces a distinct activation with its own copies of local variables.</p>
   <h3 class="heading settled" data-level="15.7" id="decl.func"><span class="secno">15.7. </span><span class="content">Functions</span><a class="self-link" href="#decl.func"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-declaration">function declaration</dfn> introduces a binding to a function.</p>
<pre class="language-.syntax">FunctionDeclaration :
    `func` Identifier
    GenericParametersClause?
    ParametersClause
    GenericWhereClause?
    ResultTypeClause?
    FunctionBodyClause
</pre>
   <p>A function declaration is invocable.</p>
   <h4 class="heading settled" data-level="15.7.1" id="decl.func.result"><span class="secno">15.7.1. </span><span class="content">Result Type</span><a class="self-link" href="#decl.func.result"></a></h4>
<pre class="language-.syntax">ResultTypeClause :
    `->` TypeExpression
</pre>
   <p>If a function declaration has a result type clause, then the <a data-link-type="dfn" href="#result-type" id="ref-for-result-type">result type</a> of the function is the type that results from evaluating the type expression in that clause.
If a function declaration does not have a result type clause, then the result type of the function is the unit type.</p>
   <h4 class="heading settled" data-level="15.7.2" id="decl.func.body"><span class="secno">15.7.2. </span><span class="content">Body</span><a class="self-link" href="#decl.func.body"></a></h4>
<pre class="language-.syntax">FunctionBodyClause :
    BlockStatement
    | `;`
</pre>
   <p>A function declaration may have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="body">body</dfn>.
A function declaration with a <a data-link-type="dfn" href="#body" id="ref-for-body①">body</a> is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="function-definition">function definition</dfn>.</p>
   <p>If the function body clause is a block statement, then that statement is the body of the <a data-link-type="dfn" href="#function-definition" id="ref-for-function-definition">function definition</a>.
If the function body clause is <code>;</code>, then that function declaration has no body.</p>
   <h4 class="heading settled" data-level="15.7.3" id="decl.func.traditional"><span class="secno">15.7.3. </span><span class="content">Traditional Function Declarations</span><a class="self-link" href="#decl.func.traditional"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="traditional-function-declaration">traditional function declaration</dfn> is a function declaration that uses traditional C-like syntax.</p>
<pre class="language-.syntax">TraditionalFunctionDeclaration :
    TypeSpecifier Declarator
    GenericParametersClause?
    TraditionalParametersClause
    GenericWhereClause?
    FunctionBodyClause

TraditionalParametersClause :
    `(` (TraditionalParameterDeclaration `,`) * `)`

TraditionalParameterDeclaration :
    Direction TypeSpecifier Declarator DefaultValueClause?
</pre>
   <p>TODO: <a data-link-type="dfn" href="#traditional-function-declaration" id="ref-for-traditional-function-declaration">traditional function declaration</a></p>
   <h4 class="heading settled" data-level="15.7.4" id="decl.func.entry"><span class="secno">15.7.4. </span><span class="content">Entry Points</span><a class="self-link" href="#decl.func.entry"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="entry-point-declaration">entry point declaration</dfn> is a function declaration that can be used as the starting point of execution for a thread.</p>
   <p>TODO: reference <a data-link-type="dfn" href="#entry-point-declaration" id="ref-for-entry-point-declaration">entry point declaration</a>.</p>
   <h3 class="heading settled" data-level="15.8" id="decl.init"><span class="secno">15.8. </span><span class="content">Constructors</span><a class="self-link" href="#decl.init"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="constructor-declaration">constructor declaration</dfn> introduces logic for initializing an instance of the enclosing <a data-link-type="dfn" href="#type-declaration" id="ref-for-type-declaration①">type declaration</a>.
A <a data-link-type="dfn" href="#constructor-declaration" id="ref-for-constructor-declaration">constructor declaration</a> is implicitly static.</p>
<pre class="language-.syntax">ConstructorDeclaration :
    `init`
    GenericParametersClause?
    ParametersClause
    FunctionBodyClause
</pre>
   <p>A constructor declaration is invocable.
A constructor declaratin has an implicit <code>this</code> parameter, with a direction of <code>out</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Slang does not provide any equivalent to C++ destructors, which run automatically when an instance goes out of scope.</p>
   <h3 class="heading settled" data-level="15.9" id="decl.prop"><span class="secno">15.9. </span><span class="content">Properties</span><a class="self-link" href="#decl.prop"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="property-declaration">property declaration</dfn> introduces a binding that can have its behavior for read and write operations customized.</p>
<pre class="language-.syntax">PropertyDeclaration :
    `property`
    Identifier
    GenericParametersClause?
    TypeAscriptionClause
    GenericWhereClause
    PropertyBody

PropertyBody
    `{` AccessorDecl* `}`
</pre>
   <p>TODO: reference <a data-link-type="dfn" href="#property-declaration" id="ref-for-property-declaration">property declaration</a>.</p>
   <h4 class="heading settled" data-level="15.9.1" id="decl.accessor"><span class="secno">15.9.1. </span><span class="content">Accessors</span><a class="self-link" href="#decl.accessor"></a></h4>
<pre class="language-.syntax">AccessorDecl
    GetAccessorDecl
    SetAccessorDecl

GetAccessorDecl
    `get` FunctionBodyClause

SetAccessorDecl
    `set` ParametersClause? FunctionBodyClause
</pre>
   <p>An accessor declaration is invocable.</p>
   <h3 class="heading settled" data-level="15.10" id="decl.subscript"><span class="secno">15.10. </span><span class="content">Subscripts</span><a class="self-link" href="#decl.subscript"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="subscript-declaration">subscript declaration</dfn> introduces a way for the enclosing type to be used as the base expression of a subscript expression.</p>
<pre class="language-.syntax">SubscriptDeclaration :
    `subscript`
    GenericParametersClause?
    ParametersClause
    ResultTypeClause
    GenericWhereClause?
    PropertyBody
</pre>
   <p>A subscript declaration is invocable.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Unlike a function declaration, a <a data-link-type="dfn" href="#subscript-declaration" id="ref-for-subscript-declaration">subscript declaration</a> cannot elide the result type clause.</p>
   <h3 class="heading settled" data-level="15.11" id="decl.extension"><span class="secno">15.11. </span><span class="content">Extensions</span><a class="self-link" href="#decl.extension"></a></h3>
   <p>An extension declaration is introduced with the <code>extension</code> keyword:</p>
<pre>extension MyVector
{
    float getLength() { return sqrt(x*x + y*y); }
    static int getDimensionality() { return 2; }
}
</pre>
   <p>An extension declaration adds behavior to an existing type.
In the example above, the <code>MyVector</code> type is extended with an instance method <code>getLength()</code>, and a static method <code>getDimensionality()</code>.</p>
   <p>An extension declaration names the type being extended after the <code>extension</code> keyword.
The body of an extension declaration may include type declarations, functions, initializers, and subscripts.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The body of an extension cannot include variable declarations.
An extension cannot introduce members that would change the in-memory layout of the type being extended.</p>
   <p>The members of an extension are accessed through the type that is being extended.
For example, for the above extension of <code>MyVector</code>, the introduced <a data-link-type="dfn" href="#methods" id="ref-for-methods">methods</a> are accessed as follows:</p>
<pre>MyVector v = ...;

float f = v.getLength();
int n = MyVector.getDimensionality();
</pre>
   <p>An extension declaration need not be placed in the same module as the type being extended; it is possible to extend a type from third-party or standard-library code.
The members of an extension are only visible inside of modules that <code>import</code> the module declaring the extension;
extension members are not automatically visible wherever the type being extended is visible.</p>
   <p>An extension declaration may include an inheritance clause:</p>
<pre>extension MyVector : IPrintable
{
    ...
}
</pre>
   <p>The inheritance clause of an extension declaration may only include interfaces.
When an extension declaration lists an interface in its inheritance clause, it asserts that the extension introduces a new conformance, such that the type being extended now conforms to the given interface.
The extension must ensure that the type being extended satisfies all the requirements of the interface.
Interface requirements may be satisfied by the members of the extension, members of the original type, or members introduced through other extensions visible at the point where the conformance was declared.</p>
   <p>It is an error for overlapping conformances (that is, of the same type to the same interface) to be visible at the same point.
This includes cases where two extensions declare the same conformance, as well as those where the original type and an extension both declare the same conformance.
The conflicting conformances may come from the same module or difference modules.</p>
   <div class="algorithm" data-algorithm="retroactive conformance">
     In order to avoid problems with conflicting conformances, when a module <var>M</var> introduces a conformance of type <var>T</var> to interface <var>I</var>, one of the following should be true: 
    <ul>
     <li data-md>
      <p>The type <var>T</var> is declared in module <var>M</var></p>
     <li data-md>
      <p>The interface <var>I</var> is declared in module <var>M</var></p>
    </ul>
    <p>Any conformance that does not follow these rules (that is, where both <var>T</var> and <var>I</var> are imported into module <var>M</var>) is called a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="retroactive-conformance">retroactive conformance</dfn>, and there is no way to guarantee that another module _N_ will not introduce the same conformance.
The runtime behavior of programs that include overlapping <a data-link-type="dfn" href="#retroactive-conformance" id="ref-for-retroactive-conformance">retroactive conformances</a> is currently undefined.</p>
   </div>
   <p>Currently, extension declarations can only apply to structure types.</p>
   <h3 class="heading settled" data-level="15.12" id="decl.generic"><span class="secno">15.12. </span><span class="content">Generics</span><a class="self-link" href="#decl.generic"></a></h3>
   <p>Many kinds of declarations can be made <a data-link-type="dfn" href="#generic" id="ref-for-generic①">generic</a>: structure types, interfaces, extensions, functions, initializers, and subscripts.</p>
   <p>A <a data-link-type="dfn" href="#generic" id="ref-for-generic②">generic</a> declaration introduces a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="generic-parameter-list">generic parameter list</dfn> enclosed in angle brackets <code>&lt;></code>:</p>
<pre>T myFunction&lt;T>(T left, T right, bool condition)
{
    return condition ? left : right;
}
</pre>
   <h4 class="heading settled" data-level="15.12.1" id="decl.generic.param"><span class="secno">15.12.1. </span><span class="content">Generic Parameters</span><a class="self-link" href="#decl.generic.param"></a></h4>
   <p>A <a data-link-type="dfn" href="#generic-parameter-list" id="ref-for-generic-parameter-list">generic parameter list</a> can include one or more parameters separated by commas.
The allowed forms for <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="generic-parameters">generic parameters</dfn> are:</p>
   <ul>
    <li data-md>
     <p>A single identifier like <code>T</code> is used to declare a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="generic-type-parameter">generic type parameter</dfn> with no constraints.</p>
    <li data-md>
     <p>A clause like <code>T : IFoo</code> is used to introduce a <a data-link-type="dfn" href="#generic-type-parameter" id="ref-for-generic-type-parameter">generic type parameter</a> <code>T</code> where the parameter is constrained so that it must conform to the <code>IFoo</code> interface.</p>
    <li data-md>
     <p>A clause like <code>let N : int</code> is used to introduce a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="generic-value-parameter">generic value parameter</dfn> <code>N</code>, which takes on values of type <code>int</code>.</p>
   </ul>
   <p class="note" role="note"><span class="marker">Note:</span> The syntax for <a data-link-type="dfn" href="#generic-value-parameter" id="ref-for-generic-value-parameter">generic value parameters</a> is provisional and subject to possible change in the future.</p>
   <p><a data-link-type="dfn" href="#generic-parameters" id="ref-for-generic-parameters①">Generic parameters</a> may declare a default value with <code>=</code>:</p>
<pre>T anotherFunction&lt;T = float, let N : int = 4>(vector&lt;T,N> v);
</pre>
   <p>For generic type parameters, the default value is a type to use if no argument is specified.
For generic value parameters, the default value is a value of the same type to use if no argument is specified.</p>
   <h4 class="heading settled" data-level="15.12.2" id="decl.generic.specialize.explicit"><span class="secno">15.12.2. </span><span class="content">Explicit Specialization</span><a class="self-link" href="#decl.generic.specialize.explicit"></a></h4>
   <p>A generic is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="specialized">specialized</dfn> by applying it to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="generic-arguments">generic arguments</dfn> listed inside angle brackets <code>&lt;></code>:</p>
<pre>anotherFunction&lt;int, 3>
</pre>
   <p>Specialization produces a reference to the declaration with all generic parameters bound to concrete arguments.</p>
   <p>When specializing a generic, generic type parameters must be matched with type arguments that conform to the constraints on the parameter, if any.
Generic value parameters must be matched with value arguments of the appropriate type, and that are specialization-time constants.</p>
   <p>An explicitly <a data-link-type="dfn" href="#specialized" id="ref-for-specialized">specialized</a> function, type, etc. may be used wherever a non-generic function, type, etc. is expected:</p>
<pre>int i = anotherFunction&lt;int,3>( int3(99) );
</pre>
   <h4 class="heading settled" data-level="15.12.3" id="decl.generic.specialize.implicit"><span class="secno">15.12.3. </span><span class="content">Implicit Specialization</span><a class="self-link" href="#decl.generic.specialize.implicit"></a></h4>
   <p>If a generic function/type/etc. is used where a non-generic function/type/etc. is expected, the compiler attempts <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="implicit-specialization">implicit specialization</dfn>. <a data-link-type="dfn" href="#implicit-specialization" id="ref-for-implicit-specialization">Implicit specialization</a> infers generic arguments from the context at the use site, as well as any default values specified for generic parameters.</p>
   <p>For example, if a programmer writes:</p>
<pre>int i = anotherFunction( int3(99) );
</pre>
   <p>The compiler will infer the generic arguments <code>&lt;int, 3></code> from the way that <code>anotherFunction</code> was applied to a value of type <code>int3</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Inference for generic arguments currently only takes the types of value arguments into account.
The expected result type does not currently affect inference.</p>
   <h4 class="heading settled" data-level="15.12.4" id="decl.generic.syntax"><span class="secno">15.12.4. </span><span class="content">Syntax Details</span><a class="self-link" href="#decl.generic.syntax"></a></h4>
   <p>The following examples show how generic declarations of different kinds are written:</p>
<pre>T genericFunction&lt;T>(T value);
funct genericFunction&lt;T>(value: T) -> T;

__init&lt;T>(T value);

__subscript&lt;T>(T value) -> X { ... }

struct GenericType&lt;T>
{
    T field;
}

interface IGenericInterface&lt;T> : IBase&lt;T>
{
}
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> Currently there is no user-exposed syntax for writing a generic extension.</p>
   <h3 class="heading settled" data-level="15.13" id="decl.buffer"><span class="secno">15.13. </span><span class="content">Traditional Buffer Declarations</span><a class="self-link" href="#decl.buffer"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="traditional-buffer-declaration">traditional buffer declaration</dfn> is a shorthand for declaring a global-scope shader parameter.</p>
<pre class="language-.syntax">TraditionalBufferDeclaration :
    (`cbuffer` | `tbuffer`) Identifier DeclarationBody `;`?
</pre>
   <p>Given a <a data-link-type="dfn" href="#traditional-buffer-declaration" id="ref-for-traditional-buffer-declaration">traditional buffer declaration</a>, an implementation shall behave as if the declaration were desugared into:</p>
   <ul>
    <li data-md>
     <p>A <code>struct</code> declaration with some unique name <var>S</var>, and with the declaration body of the buffer declaration.</p>
    <li data-md>
     <p>A global shader parameter declaration with some unique name <var>P</var>, where the type of the parameter is <code>ConstantBuffer&lt;S></code> in the case of a <code>cbuffer</code> declaration, or <code>TextureBuffer&lt;S></code> in the case of a <code>tbuffer</code> declaration.</p>
   </ul>
   <p>For each member declared in <var>S</var>, a traditional buffer declaration introduces a binding that refers to that member accessed through <var>P</var>.</p>
   <h2 class="heading settled" data-level="16" id="stmt"><span class="secno">16. </span><span class="content">Statements</span><a class="self-link" href="#stmt"></a></h2>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="statement">statement</dfn> is an entity in the abstract syntax that describes actions to be taken by a thread.
Statements are executed for their effect, rather than evaluated to produce a value.</p>
<pre class="language-.syntax">Statement :
  ExpressionStatement
  | DeclarationStatement
  | BlockStatement
  | EmptyStatement
  | IfStatement
  | SwitchStatement
  | CaseStmt
  | ForStatement
  | WhileStatement
  | DoWhileStatement
  | BreakStatement
  | ContinueStatement
  | ReturnStatement
  | DiscardStatement
  | LabeledStatement
</pre>
   <h3 class="heading settled" data-level="16.1" id="stmt.expr"><span class="secno">16.1. </span><span class="content">Expression Statement</span><a class="self-link" href="#stmt.expr"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="expression-statement">expression statement</dfn> evaluates an expression, and then ignores the resulting value.</p>
<pre class="language-.syntax">ExpressionStatement :
  Expression `;`
</pre>
<pre class="language-.checking">GIVEN context c, expression e
GIVEN e synthesizes type t in context c
THEN e `;` checks in context c
</pre>
   <p>An implementation may diagnose a warning when execution of an <a data-link-type="dfn" href="#expression-statement" id="ref-for-expression-statement">expression statement</a> cannot have side effects.</p>
   <h3 class="heading settled" data-level="16.2" id="expr.decl"><span class="secno">16.2. </span><span class="content">Declaration Statement</span><a class="self-link" href="#expr.decl"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declaration-statement">declaration statement</dfn> introduces a declaration into the current scope.</p>
<pre class="language-.syntax">DeclarationStatement :
  Declaration
</pre>
<pre class="language-.checking">GIVEN context c, declaration d
GIVEN declaration d checks in context c
THEN statement d checks in context c
</pre>
   <p>Only the following types of declarations may be used in a <a data-link-type="dfn" href="#declaration-statement" id="ref-for-declaration-statement">declaration statement</a>:</p>
   <ul>
    <li data-md>
     <p>VariableDeclaration</p>
   </ul>
   <h3 class="heading settled" data-level="16.3" id="stmt.block"><span class="secno">16.3. </span><span class="content">Block Statement</span><a class="self-link" href="#stmt.block"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="block-statement">block statement</dfn> executes each of its constituent statements in order.</p>
<pre class="language-.syntax">BlockStatement :
  `{` Statement* `}`
</pre>
<pre class="language-.checking">
GIVEN context c
GIVEN statements s0,s1,...
GIVEN context d, a fresh sub-context of c
GIVEN s0,s1,... check in d
THEN `{` s0,s1,... `}` checks in c
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> Declarations in a <a data-link-type="dfn" href="#block-statement" id="ref-for-block-statement②">block statement</a> are visible to later statements in the same block, but not to earlier statements in the block, or to code outside the block.</p>
   <h3 class="heading settled" data-level="16.4" id="stmt.empty"><span class="secno">16.4. </span><span class="content">Empty Statement</span><a class="self-link" href="#stmt.empty"></a></h3>
   <p>Executing an empty statement has no effect.</p>
<pre class="language-.syntax">EmptyStatement :
  `;`
</pre>
<pre class="language-.checking">GIVEN context c
THEN `;` checks in c
</pre>
   <h3 class="heading settled" data-level="16.5" id="stmt.cond"><span class="secno">16.5. </span><span class="content">Conditional Statements</span><a class="self-link" href="#stmt.cond"></a></h3>
   <h4 class="heading settled" data-level="16.5.1" id="stmt.if"><span class="secno">16.5.1. </span><span class="content">If Statement</span><a class="self-link" href="#stmt.if"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="if-statement">if statement</dfn> executes a sub-statement conditionally.</p>
<pre class="language-.syntax">IfStatement :
  `if` `(` IfCondition `)`
  Statement
  ElseClause?

IfCondition :
  Expression
  | LetDeclaration

ElseClause :
  `else` Statement
	
</pre>
<pre class="language-.checking">
GIVEN context c, expression e, statement t
GIVEN e checks against `Bool` in c
GIVEN t checks in C
THEN `if(` e `)` t checks in c

GIVEN context c, expression e, statement t
GIVEN e checks against `Bool` in c
GIVEN t checks in C
GIVEN f checks in C
THEN `if(` e `)` t `else` f checks in c  
</pre>
   <p>If the condition of an <a data-link-type="dfn" href="#if-statement" id="ref-for-if-statement②">if statement</a> is an expression, then it is evaluated against an expected type of <code>Bool</code> to yield a value <var>C</var>.
If <var>C</var> is <code>true</code>, then the ThenClause is executed.
If <var>C</var> is <code>false</code> and there is a ElseClause, then it is executed.</p>
   <p>If the condition of an <code>if</code> statement is a <code>let</code> declaration, then that declaration must have an initial-value expression.
That initial-value expression is evaluated against an expected type of <code>Optional&lt;T></code>, where <var>T</var> is a fresh type variable, to yield a value <var>D</var>.
If <var>D</var> is <code>Some(|C|)</code>, then the ThenClause is executed, in an environment where the name of the <code>let</code> declaration is bound to <var>C</var>.
If <var>D</var> is <code>null</code> and there is a ElseClause, then it is executed.</p>
   <h4 class="heading settled" data-level="16.5.2" id="stmt.switch"><span class="secno">16.5.2. </span><span class="content">Switch Statement</span><a class="self-link" href="#stmt.switch"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="switch-statement"><code>switch</code> statement</dfn> conditionally executes up to one of its <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="alternatives">alternatives</dfn>, based on the value of an expression.</p>
<pre class="language-.syntax">SwitchStatement :
  `switch` `(` Expression `)`
  `{` SwitchAlternative+ `}`

SwitchAlternative :
  SwitchAlternativeLabel+ Statement+

SwitchAlternativeLabel :
  CaseClause
  | DefaultClause

CaseClause :
  `case` Expression `:`

DefaultClause
  `default` `:`
</pre>
<pre class="language-.checking">GIVEN context c, expression e, switch alternatives a0,a1,...
GIVEN e synthesizes type t in c
GIVEN a0,a1,... check against t in c
THEN `switch(` e `) {` a0,a1,... `}` checks in c
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> A <code>switch</code> statement is checked by first checking the expression, and then checking each of the <a data-link-type="dfn" href="#alternatives" id="ref-for-alternatives">alternatives</a> against the type of that expression.</p>
<pre class="language-.checking">GIVEN context c, type t,
GIVEN switch alternative labels l0,l1,...
GIVEN statements s0,s1,...
GIVEN l0,l1,... check against t in c
GIVEN s0,s1,... check in c
THEN switch alternative l0,l1,... s0,s1,... checks in c

GIVEN context c, type t, expression e
GIVEN e checks against t in c
THEN `case` e `:` checks against t in c

GIVEN context c, type t
THEN `default:` checks against t in c
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> A <code>case</code> clause is valid if its expression <a data-link-type="dfn" href="#checks-against" id="ref-for-checks-against">checks against</a> the type of the control expressio nof the <code>switch</code> statement.</p>
   <p>A <code>switch</code> statement may have at most one <code>default</code> clause.</p>
   <p>If the type of the controlling expression of a <code>switch</code> statement is a built-in integer type, then:</p>
   <ul>
    <li data-md>
     <p>The expression of each <code>case</code> clause must be a compile-time constant expression.</p>
    <li data-md>
     <p>The constant value of the expression for each <code>case</code> clause must not be equal to that of any other <code>case</code> clause in the same <code>switch</code>.</p>
   </ul>
   <p>Each alternative of a <code>switch</code> statement must exit the <code>switch</code> statement via a <code>break</code> or other control transfer statement.
"Fall-through" from one switch case clause to another is not allowed.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Semantically, a <code>switch</code> statement is equivalent to an "<code>if</code> cascade" that compares the value of the conditional expression against each <code>case</code> clause,</p>
   <h3 class="heading settled" data-level="16.6" id="stmt.loop"><span class="secno">16.6. </span><span class="content">Loop Statements</span><a class="self-link" href="#stmt.loop"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="loop-statement">loop statement</dfn> executes a body statement one or more times.</p>
   <h4 class="heading settled" data-level="16.6.1" id="stmt.for"><span class="secno">16.6.1. </span><span class="content">For Statement</span><a class="self-link" href="#stmt.for"></a></h4>
<pre class="language-.syntax">ForStatement :
  `for` `(`
  initial:Statement? `;`
  conditional:Expression? `;`
  sideEffect:Expression? `)`
  body:Statement
</pre>
<pre class="language-.checking">GIVEN init checks in c
GIVEN cond checks against `Bool` in c
GIVEN iter synthesizes type t in c
GIVEN body checks in c
THEN `for(init;cond;iter) body` checks in c
</pre>
   <p class="issue" id="issue-8233eb53"><a class="self-link" href="#issue-8233eb53"></a> The checking judgements above aren’t complete because they don’t handle the case where _cond_ is absent, in which case it should be treated like it was <code>true</code>.</p>
   <h4 class="heading settled" data-level="16.6.2" id="stmt.while"><span class="secno">16.6.2. </span><span class="content">While Statement</span><a class="self-link" href="#stmt.while"></a></h4>
<pre class="language-.syntax">WhileStatement :
  `while` `(`
  conditional:Expression `)`
  body:Statement
</pre>
<pre class="language-.checking">GIVEN cond checks against `Bool` in c
GIVEN body checks in c
THEN `while(cond) body` checks in c
</pre>
   <h4 class="heading settled" data-level="16.6.3" id="stmt.do-while"><span class="secno">16.6.3. </span><span class="content">Do-While Statement</span><a class="self-link" href="#stmt.do-while"></a></h4>
   <p>A do-while statement uses the following form:</p>
<pre class="language-.syntax">DoWhileStatement :
  `do` body:Statement
  `while` `(` conditional:Expression `)` `;`    
</pre>
<pre class="language-.checking">GIVEN body checks in c
GIVEN cond checks againt `Bool` in c
THEN `do body while(cond);` checks in c
</pre>
   <p class="issue" id="issue-ee34b50f"><a class="self-link" href="#issue-ee34b50f"></a> These simplified prose checking rules are leaving out all the subtlties of sub-contexts, etc.</p>
   <h3 class="heading settled" data-level="16.7" id="stmt.control"><span class="secno">16.7. </span><span class="content">Control Transfer Statements</span><a class="self-link" href="#stmt.control"></a></h3>
   <h4 class="heading settled" data-level="16.7.1" id="stmt.break"><span class="secno">16.7.1. </span><span class="content"><code>break</code> Statement</span><a class="self-link" href="#stmt.break"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="break-statement">break statement</dfn> is used to transfer control out of the context of some enclosing statement.
A <a data-link-type="dfn" href="#break-statement" id="ref-for-break-statement">break statement</a> may optionally provide a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="label">label</dfn>, to identify the enclosing statement.</p>
<pre class="language-.syntax">BreakStatement :
  `break` label:Identifier? `;`
</pre>
   <p>A [<a data-link-type="dfn" href="#break-statement" id="ref-for-break-statement①">break statement</a>] without a [<a data-link-type="dfn" href="#label" id="ref-for-label">label</a>] transfers control to after the end of the closest lexically enclosing [<a data-link-type="dfn" href="#switch-statement" id="ref-for-switch-statement">switch statement</a>] or [<a data-link-type="dfn" href="#loop-statement" id="ref-for-loop-statement">loop statement</a>].</p>
   <p>A [<a data-link-type="dfn" href="#break-statement" id="ref-for-break-statement②">break statement</a>] with a [<a data-link-type="dfn" href="#label" id="ref-for-label①">label</a>] transfers control to after the end of the lexically enclosing [<a data-link-type="dfn" href="#switch-statement" id="ref-for-switch-statement①">switch statement</a>] or [<a data-link-type="dfn" href="#loop-statement" id="ref-for-loop-statement①">loop statement</a>] labeled with a matching [<a data-link-type="dfn" href="#label" id="ref-for-label②">label</a>].</p>
<pre class="language-.checking">GIVEN context c
GIVEN lookup of BREAK_LABEL in c yields label l
THEN `break;` checks in context c

GIVEN context c, label l
GIVEN c contains an entry of the form BREAK_LABEL = l
THEN `break l;` checks in context c
</pre>
   <div class="issue" id="issue-ad42b03a">
    <a class="self-link" href="#issue-ad42b03a"></a> Issue: The checking rules for <code>break</code>-able statements should add a suitable item to the context used for checking their body statements, which will be matched by the rules above. 
    <p>We also need to define the context-containment rule that is being used to look up the <code>break</code> item in the context.</p>
   </div>
   <h4 class="heading settled" data-level="16.7.2" id="stmt.continue"><span class="secno">16.7.2. </span><span class="content">Continue Statement</span><a class="self-link" href="#stmt.continue"></a></h4>
<pre class="language-.syntax">ContinueStatement :
  `continue` label:Identifier? `;`
</pre>
   <p>A <code>continue</code> statement transfers control to the start of the next iteration of a loop statement.
In a <code>for</code> statement with a side effect expression, the side effect expression is evaluated when <code>continue</code> is used:</p>
<pre class="language-.checking">GIVEN context c
GIVEN lookup of CONTINUE_LABEL in c yields label l
THEN `continue;` checks in context c

GIVEN context c, label l
GIVEN c contains an entry of the form CONTINUE_LABEL = l
THEN `continue l;` checks in context c
</pre>
   <h4 class="heading settled" data-level="16.7.3" id="stmt.return"><span class="secno">16.7.3. </span><span class="content">Return Statement</span><a class="self-link" href="#stmt.return"></a></h4>
   <p>A <code>return</code> statement transfers control out of the current function.</p>
<pre class="language-.syntax">ReturnStatement :
  `return` Expression? `;`
</pre>
<pre class="language-.checking">GIVEN context c, expression e
GIVEN lookup of RESULT_TYPE in c yields type t
GIVEN e checks against t in c
THEN `return e;` checks in c
</pre>
<pre class="language-.checking">GIVEN context c
GIVEN lookup of RESULT_TYPE in c yield type t
GIVEN `Unit` is a subtype of t
THEN `return;` checks in c
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> A <code>return</code> statement without an expression is equivalent to a <code>return</code> of a value of type <code>Unit</code>.</p>
   <h4 class="heading settled" data-level="16.7.4" id="stmt.discard"><span class="secno">16.7.4. </span><span class="content">Discard Statement</span><a class="self-link" href="#stmt.discard"></a></h4>
<pre class="language-.syntax">DiscardStatement :
  `discard` `;`
</pre>
   <p>A <code>discard</code> statement may only be used in the context of a fragment shader, in which case it causes the current invocation to terminate and the graphics system to discard the corresponding fragment so that it does not get combined with the framebuffer pixel at its coordinates.</p>
   <p>Operations with side effects that were executed by the invocation before a <code>discard</code> will still be performed and their results will become visible according to the rules of the platform.</p>
<pre class="language-.checking">GIVEN context c
GIVEN capability `fragment` is available in c
THEN `discard;` checks in c
</pre>
   <p class="issue" id="issue-d9240fe8"><a class="self-link" href="#issue-d9240fe8"></a> The intent of the above rule is that checking a <code>discard</code> statement will add the <code>fragment</code> capability to the context, so that it can be checked against the capabilities of the surrounding function/context.
However, the way the other statement rules handle the context, they do not allow for anything in the context to flow upward/outward in that fashion.
It may be simplest to have the process of collecting the capabilities required by a function body be a different judgement than the type checking rules.</p>
   <h2 class="heading settled" data-level="17" id="expr"><span class="secno">17. </span><span class="content">Expressions</span><a class="self-link" href="#expr"></a></h2>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="expressions">Expressions</dfn> are terms that can be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="evaluated">evaluated</dfn> to produce values.
This section provides a list of the kinds of expressions that may be used in a Slang program.</p>
   <div class="issue" id="issue-5a6ece04">
    <a class="self-link" href="#issue-5a6ece04"></a> We need a place to define a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="term">term</dfn> and note how it can be either an expression or a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type-expression">type expression</dfn>. 
    <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="specialize-expression">specialize expression</dfn> might occur in either the expression or type expression grammar.</p>
   </div>
   <p>In general, the order of evaluation of a Slang expression proceeds from left to right.
Where specific expressions do not follow this order of evaluation, it will be noted.</p>
   <p>Some expressions can yield <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="l-values">l-values</dfn>, which allows them to be used on the left-hand-side of assignment, or as arguments for <code>out</code> or <code>in out</code> parameters.</p>
   <h3 class="heading settled" data-level="17.1" id="expr.lit"><span class="secno">17.1. </span><span class="content">Literal Expressions</span><a class="self-link" href="#expr.lit"></a></h3>
   <p>Literal expressions are never l-values.</p>
   <h4 class="heading settled" data-level="17.1.1" id="expr.lit.int"><span class="secno">17.1.1. </span><span class="content">Integer Literal Expressions</span><a class="self-link" href="#expr.lit.int"></a></h4>
   <p>An integer literal expression consists of a single IntegerLiteral token.</p>
<pre class="language-.checking">\DerivationRule{
  \begin{trgather}
      \CheckConforms{\ContextVarA,\alpha}{\alpha}{\code{IFromIntegerLiteral}}{\ContextVarB}
  \end{trgather}  
}{
  \SynthExpr{\ContextVarA}{i}{\alpha}{\ContextVarB}
}
</pre>
   <p>To check an unsuffixed integer literal <var>lit</var> against type <var>T</var>:</p>
   <ul>
    <li data-md>
     <p>Validate that <var>T</var> conforms to <code>IFromIntegerLiteral</code>, yielding conformance witness <code>w</code></p>
    <li data-md>
     <p>Let <var>f</var> be a declaration reference to <code>IFromIntegerLiteral.init</code> looked up through <code>w</code></p>
    <li data-md>
     <p>Return the checked expression <var>f</var> <code>(</code> <var>lit</var> <code>) :</code> <var>T</var></p>
   </ul>
   <p class="issue" id="issue-21dc6a97"><a class="self-link" href="#issue-21dc6a97"></a> We need a description of how suffixed integer literals have their type derived from their suffix.</p>
   <h4 class="heading settled" data-level="17.1.2" id="expr.lit.float"><span class="secno">17.1.2. </span><span class="content">Floating-Point Literal Expressions</span><a class="self-link" href="#expr.lit.float"></a></h4>
   <p>A floating-point literal expression consists of a single FloatingPointLiteral token.</p>
<pre class="language-.checking">\DerivationRule{
  \begin{trgather}
      \CheckConforms{\ContextVarA,\alpha}{\alpha}{\code{IFromFloatingPointLiteral}}{\ContextVarB}
  \end{trgather}  
}{
  \SynthExpr{\ContextVarA}{f}{\alpha}{\ContextVarB}
}
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> An unsuffixed floating-point literal synthesizes a type that is a fresh type variable $\alpha$, constrained to conform to \code{IFromFloatingPointLiteral}.</p>
   <p class="issue" id="issue-0ee3125d"><a class="self-link" href="#issue-0ee3125d"></a> We need a description of how suffixed floating-point literals have their type derived from their suffix.</p>
   <h4 class="heading settled" data-level="17.1.3" id="expr.lit.bool"><span class="secno">17.1.3. </span><span class="content">Boolean Literal Expressions</span><a class="self-link" href="#expr.lit.bool"></a></h4>
   <p class="note" role="note"><span class="marker">Note:</span> Boolean literal expressions use the keywords <code>true</code> and <code>false</code>.</p>
<pre class="language-.syntax">BooleanLiteralExpression
      `true` | `false`
</pre>
   <p>The expression <code>true</code> resolves to the typed Boolean value <code>true : Bool</code>.</p>
   <p>The expression <code>false</code> resolves to the typed Boolean value <code>false : Bool</code>.</p>
   <h4 class="heading settled" data-level="17.1.4" id="expr.lit.string"><span class="secno">17.1.4. </span><span class="content">String Literal Expressions</span><a class="self-link" href="#expr.lit.string"></a></h4>
   <p class="note" role="note"><span class="marker">Note:</span> A string literal expressions consists of one or more string literal tokens in a row.</p>
<pre class="language-.syntax">StringLiteralExpression
      StringLiteral+
</pre>
<pre class="language-.checking">\DerivationRule{
}{
  \SynthExpr{\ContextVarA}{\overline{s}}{\code{String}}{\ContextVarA}
}\\
</pre>
   <h3 class="heading settled" data-level="17.2" id="expr.ident"><span class="secno">17.2. </span><span class="content">Identifier Expressions</span><a class="self-link" href="#expr.ident"></a></h3>
<pre class="language-.syntax">IdentifierExpression
      Identifier
      | \code{operator} Operator
</pre>
<pre class="language-.checking">\DerivationRule{
      \SynthLookup{\ContextVarA}{name}{type}
}{
  \SynthExpr{\ContextVarA}{name}{type}{\ContextVarA}
}\vspace{1em}

\DerivationRule{
      \CheckLookup{\ContextVarA}{name}{type}{\ContextVarB}
}{
  \CheckExpr{\ContextVarA}{name}{type}{\ContextVarB}
}\\
</pre>
   <p class="issue" id="issue-8f700738"><a class="self-link" href="#issue-8f700738"></a> This presentation delegates the actual semantics of identifier expressions to the \textsc{Lookup} judgement, which needs to be explained in detail.</p>
   <p>%\begin{verbatim}
%When evaluated, this expression looks up <code>someName</code> in the environment of the %expression and yields the value of a declaration with a matching name.
%
%An identifier expression is an l-value if the declaration it refers to is mutable.
%
% ### Overloading ### {overload}
%
%It is possible for an identifier expression to be _overloaded_, such that it %refers to one or more candidate declarations with the same name.
%If the expression appears in a context where the correct declaration to use can be %disambiguated, then that declaration is used as the result of  the name %expression; otherwise use of an overloaded name is an error at the use site.
%
% ### Implicit Lookup ### {lookup.implicit}
%
%It is possible for a name expression to refer to nested declarations in two ways:
%
%* In the body of a method, a reference to <code>someName</code> may resolve to <code>this.%someName</code>, using the implicit <code>this</code> parameter of the method
%
%* When a global-scope <code>cbuffer</code> or <code>tbuffer</code> declaration is used, <code>someName</code> may %refer to a field declared inside the <code>cbuffer</code> or <code>tbuffer</code> %\end{verbatim}</p>
   <h3 class="heading settled" data-level="17.3" id="expr.member"><span class="secno">17.3. </span><span class="content">Member Expression</span><a class="self-link" href="#expr.member"></a></h3>
<pre class="language-.syntax">MemberExpression}
      Expression `.` Identifier
</pre>
   <div class="issue" id="issue-160c01bf">
    <a class="self-link" href="#issue-160c01bf"></a> 
    <p>The semantics of member lookup are similar in complexity to identifier lookup (and indeed the two share a lot of the same machinery).
In addition to all the complications of ordinary name lookup (including overloading), member expressions also need to deal with:</p>
    <ul>
     <li data-md>
      <p>Implicit dereference of pointer-like types.</p>
     <li data-md>
      <p>Swizzles (vector or matrix).</p>
     <li data-md>
      <p>Static vs. instance members.</p>
    </ul>
   </div>
   <p>In both synthesis and checking modes, the base expression should first synthesize a type, and then lookup of the member should be based on that type.
\end{Incomplete}</p>
   <p>%\begin{verbatim}
%When <code>base</code> is a structure type, this expression looks up the field or other %member named by <code>m</code>.
%Just as for an identifier expression, the result of a member expression may be %overloaded, and might be disambiguated based on how it is used.
%
%A member expression is an l-value if the base expression is an l-value and the %member it refers to is mutable.
%
% ### Implicit Dereference ### {dereference.implicit}
%
%If the base expression of a member reference is a _pointer-like type_ such as %<code>ConstantBuffer&lt;T></code>, then a member reference expression will implicitly %dereference the base expression to refer to the pointed-to value (e.g., in the %case of <code>ConstantBuffer&lt;T></code> this is the buffer contents of type <code>T</code>).
%
% ### Vector Swizzles ### {swizzle.vector}
%
%When the base expression of a member expression is of a vector type <code>vector&lt;T,N></code> %then a member expression is a _vector swizzle expression_.
%The member name must conform to these constraints:
%
%* The member name must comprise between one and four ASCII characters
%* The characters must be come either from the set (<code>x</code>, <code>y</code>, <code>z</code>, <code>w</code>) or (<code>r</code>, %<code>g</code>, <code>b</code>, <code>a</code>), corresponding to element indics of (0, 1, 2, 3)
%* The element index corresponding to each character must be less than <code>N</code> %
%If the member name of a swizzle consists of a single character, then the %expression has type <code>T</code> and is equivalent to a subscript expression with the %corresponding element index.
%
%If the member name of a swizzle consists of <code>M</code> characters, then the result is a %<code>vector&lt;T,M></code> built from the elements of the base vector with the corresponding %indices.
%
%A vector swizzle expression is an l-value if the base expression was an l-value %and the list of indices corresponding to the characeters of the member name %contains no duplicates.
%
% ### Matrix Swizzles ### {swizzle.matrix}
%
%> Note: The Slang implementation currently doesn’t support matrix swizzles.
%
% ### Static Member Expressions ### {member.static}
%
%When the base expression of a member expression is a type instead of a value, the %result is a _static member expression_.
%A static member expression can refer to a static field or static method of a %structure type.
%A static member expression can also refer to a case of an enumeration type.
%
%A static member expression (but not a member expression in general) may use the %token <code>::</code> instead of <code>.</code> to separate the base and member name:
%
%<code>hlsl %// These are equivalent %Color.Red %Color::Red %</code> %\end{verbatim}</p>
   <h3 class="heading settled" data-level="17.4" id="expr.this"><span class="secno">17.4. </span><span class="content">This Expression</span><a class="self-link" href="#expr.this"></a></h3>
<pre class="language-.syntax">ThisExpression
      \code{this
</pre>
<pre class="language-.checking">\DerivationRule{
}{
  \SynthExpr{\ContextVarA}{\code{this}}{\code{This}}{\ContextVarB}
}  
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> In contexts where a <code>this</code> expression is valid, it refers to the implicit instance of the closest enclosing type declaration.
The type of a <code>this</code> expression is always \code{This}.</p>
   <p class="issue" id="issue-b3e124b9"><a class="self-link" href="#issue-b3e124b9"></a> This section needs to deal with the rules for when <code>this</code> is mutable vs. immutable.</p>
   <h3 class="heading settled" data-level="17.5" id="expr.paren"><span class="secno">17.5. </span><span class="content">Parenthesized Expression</span><a class="self-link" href="#expr.paren"></a></h3>
   <p class="note" role="note"><span class="marker">Note:</span> An expression wrapped in parentheses (<code>()</code>) is a parenthesized expression and evaluates to the same value as the wrapped expression.</p>
<pre class="language-.syntax">ParenthesizedExpression := 
      `(` Expression `)`
</pre>
   <p>If expression <var>e</var> resolves to <var>er</var> then the parenthesized expression <code>(</code> <var>e</var> <code>)</code> resolves to <var>er</var>.</p>
   <h3 class="heading settled" data-level="17.6" id="expr.call"><span class="secno">17.6. </span><span class="content">Call Expression</span><a class="self-link" href="#expr.call"></a></h3>
<pre class="language-.syntax">CallExpression
      Expression `(` (Argument `,`)* \code{)

  Argument
      Expression \\
      | NamedArgument

  NamedArgument
      Identifier `:` Expression
</pre>
<pre class="language-.checking">\DerivationRule{
      \CheckCall{\ContextVarA}{f}{\overline{args}}{type}{\ContextVarB}
}{
  \CheckExpr{\ContextVarA}{f `(` \overline{args} `)`}{type}{\ContextVarB}
}\vspace{1em}

\DerivationRule{
      \SynthCall{\ContextVarA}{f}{\overline{args}}{type}{\ContextVarB}
}{
  \SynthExpr{\ContextVarA}{f `(` \overline{args} `)`}{type}{\ContextVarB}
}  
</pre>
   <p class="issue" id="issue-f168c006"><a class="self-link" href="#issue-f168c006"></a> These rules just kick the can down the road and say that synthesis/checking for call expressions bottlenecks through the \textsc{Call} judgements.</p>
   <p>%\begin{verbatim}
%A _call expression_ consists of a base expression and a list of argument %expressions, separated by commas and enclosed in <code>()</code>:
%
%<code>hlsl %myFunction( 1.0f, 20 ) %</code> %
%When the base expression (e.g., <code>myFunction</code>) is overloaded, a call expression can %disambiguate the overloaded expression based on the number and type or arguments %present.
%
%The base expression of a call may be a member reference expression:
%
%<code>hlsl %myObject.myFunc( 1.0f ) %</code> %
%In this case the base expression of the member reference (e.g., <code>myObject</code> in this %case) is used as the argument for the implicit <code>this</code> parameter of the callee.
%
% ### Mutability ### {#expr.call.mutable}
%
%If a <code>[mutating]</code> instance is being called, the argument for the implicit <code>this</code> %parameter must be an l-value.
%
%The argument expressions corresponding to any <code>out</code> or <code>in out</code> parameters of the %callee must be l-values.
%\end{verbatim}</p>
   <h3 class="heading settled" data-level="17.7" id="expr.subscript"><span class="secno">17.7. </span><span class="content">Subscript Expression</span><a class="self-link" href="#expr.subscript"></a></h3>
<pre class="language-.syntax">SubscriptExpression
  Expression \code{[} (Argument `,`)* \code{]}
</pre>
   <div class="issue" id="issue-a18a7ea2">
    <a class="self-link" href="#issue-a18a7ea2"></a> To a first approximation, a subscript expression like \code{base[a0, a1]} is equivalent to something like \code{base.subscript(a0, a1)}.
That is, we look up the <code>subscript</code> members of the \code{base} expression, and then check a call to the result of lookup (which might be overloaded). 
    <p>Unlike simple function calls, a subscript expression can result in an <a data-link-type="dfn" href="#l-values" id="ref-for-l-values">l-value</a>, based on what accessors the <code>subscript</code> declaration that is selected by overload resolution has.</p>
   </div>
   <p>%A subscript expression invokes one of the subscript declarations in the type of %the base expression. Which subscript declaration is invoked is resolved based on %the number and types of the arguments.
%
%A subscript expression is an l-value if the base expression is an l-value and if %the subscript declaration it refers to has a setter or by-reference accessor.
%
%Subscripts may be formed on the built-in vector, matrix, and array types.</p>
   <h3 class="heading settled" data-level="17.8" id="expr.init-list"><span class="secno">17.8. </span><span class="content">Initializer List Expression</span><a class="self-link" href="#expr.init-list"></a></h3>
<pre class="language-.syntax">InitializerListExpression
  `{` (Argument `,`)* `}`
</pre>
   <p>If the sequence of arguments <var>args</var> resolves to <var>resolvedArgs</var>, then the initializer list expression <code>{</code> <var>args</var> <code>}</code> resolves to the resolved initializer list expression <code>{</code> <var>resolvedArgs</var> <code>}</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> An initializer-list expression can only appear in contexts where it will be coerced to an expected type.</p>
   <h3 class="heading settled" data-level="17.9" id="expr.cast"><span class="secno">17.9. </span><span class="content">Cast Expression</span><a class="self-link" href="#expr.cast"></a></h3>
<pre class="language-.syntax">CastExpression
  `(` TypeExpression `)` Expression
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="cast-expression">cast expression</dfn> attempts to coerce an expression to a desired type.</p>
   <p>To resolve a <a data-link-type="dfn" href="#cast-expression" id="ref-for-cast-expression">cast expression</a> <code>(</code> <var>t</var> <code>)</code> <var>e</var>:</p>
   <ul>
    <li data-md>
     <p>Let <var>checkType</var> be the result of checking <var>t</var> as a type</p>
    <li data-md>
     <p>Let <var>checkedExpr</var> be the result of checking <var>e</var> against <var>checkType</var></p>
    <li data-md>
     <p>Return <var>checkedExpr</var></p>
   </ul>
   <div class="issue" id="issue-6276d9df">
    <a class="self-link" href="#issue-6276d9df"></a> The above rule treats a cast exprssion as something closer to a type ascription expression, where it expects the underlying expression to be of the desired type, or something implicitly convertible to it. 
    <p>In contrast, we want a cast expression to be able to invoke \emph{explicit} conversions as well, which are currently not something the formalism encodes.</p>
   </div>
   <p>\begin{Legacy}</p>
   <h4 class="heading settled" data-level="17.9.1" id="expr.cast.compatiblity"><span class="secno">17.9.1. </span><span class="content">Legacy: Compatibility Feature</span><a class="self-link" href="#expr.cast.compatiblity"></a></h4>
   <p>As a compatiblity feature for older code, Slang supports using a cast where the base expression is an integer literal zero and the target type is a user-defined structure type:</p>
<pre>MyStruct s = (MyStruct) 0;    
</pre>
   <p>The semantics of such a cast are equivalent to initialization from an empty initializer list:</p>
<pre>MyStruct s = {};
</pre>
   <p>\end{Legacy}</p>
   <h3 class="heading settled" data-level="17.10" id="expr.assign"><span class="secno">17.10. </span><span class="content">Assignment Expression</span><a class="self-link" href="#expr.assign"></a></h3>
<pre class="language-.syntax">AssignmentExpression
      \SynVar[destination]{Expression} `=` \SynVar[source]{Expression}
</pre>
<pre class="language-.checking">\DerivationRule{
      \begin{trgather}
      \SynthExpr{\ContextVarA}{dst}{`out` type}{\ContextVarB
      \CheckExpr{\ContextVarB}{src}{type}{\ContextVarB
      \end{trgather}
}{
  \SynthExpr{\ContextVarA}{dst `=` src}{`out` type}{\ContextVarB}
}

\DerivationRule{
      \begin{trgather}
      \CheckExpr{\ContextVarA}{dst}{`out` type}{\ContextVarB
      \CheckExpr{\ContextVarB}{src}{type}{\ContextVarB
      \end{trgather}
}{
  \CheckExpr{\ContextVarA}{dst `=` src}{type}{\ContextVarB}
}
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> Assignment expressions support both synthesis and checking judgements.</p>
   <p>In each case, the destination} expression is validated first, and then the source} expression.</p>
   <p class="issue" id="issue-c7654cff"><a class="self-link" href="#issue-c7654cff"></a> The above rules pretend that we can write <code>out</code> before a type to indicate that we mean an l-value of that type.
We will need to expand the formalism to include \emph{qualified} types.</p>
   <h3 class="heading settled" data-level="17.11" id="expr.op"><span class="secno">17.11. </span><span class="content">Operator Expressions</span><a class="self-link" href="#expr.op"></a></h3>
   <h4 class="heading settled" data-level="17.11.1" id="expr.op.prefix"><span class="secno">17.11.1. </span><span class="content">Prefix Operator Expressions</span><a class="self-link" href="#expr.op.prefix"></a></h4>
   <div class="issue" id="issue-810bcb60"><a class="self-link" href="#issue-810bcb60"></a> This section defines the terms: <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="prefix-operator">prefix operator</dfn>. </div>
<pre class="language-.syntax">PrefixOperatorExpression
      PrefixOperator Expression

  PrefixOperator
      \code{+} // identity
      | `-` // arithmetic negation
      | \code{\~} // bit\-wise Boolean negation
      | \code{!} // Boolean negation
      | \code{++} // increment in place
      | \code{--} // decrement in place
</pre>
<pre class="language-.checking">\DerivationRule{
      \begin{trgather}
      \SynthCall{\ContextVarA}{\code{operator}op}{expr}{type}{\ContextVarB
      \end{trgather}
}{
  \SynthExpr{\ContextVarA}{op\ expr}{type}{\ContextVarB}
}

\DerivationRule{
      \begin{trgather}
          \CheckCall{\ContextVarA}{\code{operator}op}{expr}{type}{\ContextVarB
      \end{trgather}
}{
  \CheckExpr{\ContextVarA}{op\ expr}{type}{\ContextVarB}
}
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> A prefix operator expression is semantically equivalent to a call expression to a function matching the operator, except that lookup for the function name only considers function declarations marked with the \code{prefix} modifier.</p>
   <p class="issue" id="issue-6038f0cb"><a class="self-link" href="#issue-6038f0cb"></a> The notation here needs a way to express the restrictions on lookup that are used for prefix/postfix operator names.</p>
   <h3 class="heading settled" data-level="17.12" id="expr.op.postfix"><span class="secno">17.12. </span><span class="content">Postfix Operator Expressions</span><a class="self-link" href="#expr.op.postfix"></a></h3>
<pre class="language-.syntax">PostfixOperatorExprssion
      Expression PostfixOperator}

  PostfixOperator
      | \code{++} // increment in place
      | \code{--} // decrement in place
</pre>
<pre class="language-.checking">\DerivationRule{
      \begin{trgather}
      \SynthCall{\ContextVarA}{\code{operator}op}{expr}{type}{\ContextVarB
      \end{trgather}
}{
  \SynthExpr{\ContextVarA}{expr op}{type}{\ContextVarB}
}

\DerivationRule{
      \begin{trgather}
          \CheckCall{\ContextVarA}{\code{operator}op}{expr}{type}{\ContextVarB
      \end{trgather}
}{
  \CheckExpr{\ContextVarA}{expr op}{type}{\ContextVarB}
}
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> Postfix operator expressions have similar rules to prefix operator expressions, except that in this case the lookup of the operator name will only consider declarations marked with the \code{postfix} modifier.</p>
   <h4 class="heading settled" data-level="17.12.1" id="expr.op.infix"><span class="secno">17.12.1. </span><span class="content">Infix Operator Expressions</span><a class="self-link" href="#expr.op.infix"></a></h4>
   <div class="issue" id="issue-ecd5a10b"><a class="self-link" href="#issue-ecd5a10b"></a> The syntax here should introduce the term: <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="infix-expression">infix expression</dfn>. </div>
<pre class="language-.syntax">  InfixOperatorExpression
        Expression InfixOperator Expression

    InfixOperator
        | \code{*} // multiplication
        | `/` // division
        | \code{\%} // remainder of division
        | \code{+} // addition
        | `-` // subtraction
        | \code{&lt;&lt;} // left shift
        | \code{>>} // right shift
        | `&lt;` // less than
        | `>` // greater than
        | \code{&lt;=} // less than or equal to
        | \code{>=} // greater than or equal to
        | \code{==} // equal to
        | \code{!=} // not equal to
        | \code{&amp;} // bitwise and
        | \code{^} // bitwise exclusive or
        | \code{|} // bitwise or
        | \code{&amp;&amp;} // logical and
        | \code{||} // logical or
        | \code{+=}    // compound add/assign
        | \code{-=}      // compound subtract/assign
        | \code{*=}      // compound multiply/assign
        | \code{/=}      // compound divide/assign
        | \code{\%=}      // compound remainder/assign
        | \code{&lt;&lt;=}     // compound left shift/assign
        | \code{>>=}     // compound right shift/assign
        | \code{&amp;=}      // compound bitwise and/assign
        | \code{\|=}     // compound bitwise or/assign
        | \code{^=}      // compound bitwise xor/assign
%        | `=`      // assignment
%        | `,`    // sequence

</pre>
   <p>%TODO: need to get the precedence groups from this table into the grammar rules.
%
%| Operator 	| Kind        | Description |
%|-----------|-------------|-------------|
%| <code>*</code> | Multiplicative 	| multiplication |
%| <code>/</code> | Multiplicative 	| division |
%| <code>%</code> | Multiplicative 	| remainder of division |
%| <code>+</code> | Additive 			| addition |
%| <code>-</code> | Additive 			| subtraction |
%| <code>&lt;&lt;</code> | Shift 			| left shift |
%| <code>>></code> | Shift 			| right shift |
%| <code>&lt;</code> | Relational 		| less than |
%| <code>></code> | Relational 		| greater than |
%| <code>&lt;=</code> | Relational 		| less than or equal to |
%| <code>>=</code> | Relational 		| greater than or equal to |
%| <code>==</code> | Equality 			| equal to |
%| <code>!=</code> | Equality 			| not equal to |
%| <code>&amp;</code> | BitAnd 			| bitwise and |
%| <code>^</code> | BitXor			| bitwise exclusive or |
%| <code>\|</code> | BitOr 			| bitwise or |
%| <code>&amp;&amp;</code> | And 				| logical and |
%| <code>\|\|</code> | Or 				| logical or |
%| <code>+=</code> | Assignment  		| compound add/assign |
%| <code>-=</code> | Assignment  		| compound subtract/assign |
%| <code>*=</code> | Assignment  		| compound multiply/assign |
%| <code>/=</code> | Assignment  		| compound divide/assign |
%| <code>%=</code> | Assignment  		| compound remainder/assign |
%| <code>&lt;&lt;=</code> | Assignment  		| compound left shift/assign |
%| <code>>>=</code> | Assignment  		| compound right shift/assign |
%| <code>&amp;=</code> | Assignment  		| compound bitwise and/assign |
%| <code>\|=</code> | Assignment  		| compound bitwise or/assign |
%| <code>^=</code> | Assignment  		| compound bitwise xor/assign |
%| <code>=</code> | Assignment  		| assignment |
%| <code>,</code> | Sequencing  		| sequence |</p>
<pre class="language-.checking">\DerivationRule{
      \begin{trgather}
      \SynthCall{\ContextVarA}{\code{operator}op}{left right}{type}{\ContextVarB
      \end{trgather}
}{
  \SynthExpr{\ContextVarA}{left op right}{type}{\ContextVarB}
}

\DerivationRule{
      \begin{trgather}
          \CheckCall{\ContextVarA}{\code{operator}op}{left right}{type}{\ContextVarB
      \end{trgather}
}{
  \CheckExpr{\ContextVarA}{left op right}{type}{\ContextVarB}
}
</pre>
   <p>With the exception of the assignment operator (<code>=</code>), an infix operator expression like <code>left + right</code> is equivalent to a call expression to a function of the matching name <code>operator+(left, right)</code>.</p>
   <h4 class="heading settled" data-level="17.12.2" id="expr.op.cond"><span class="secno">17.12.2. </span><span class="content">Conditional Expression</span><a class="self-link" href="#expr.op.cond"></a></h4>
<pre class="language-.syntax">ConditionalExpression
      \SynVar[condition]{Expression} \code{?} \SynVar[then]{Expression} `:` \SynVar[else]{Expression}
</pre>
   <p>To check the conditional expression <var>cond</var> <code>?</code> <var>t</var> <code>:</code> <var>e</var> against expected type <var>T</var>:</p>
   <ul>
    <li data-md>
     <p>Let <var>checkedCond</var> be the result of checking <var>cond</var> against <code>Bool</code></p>
    <li data-md>
     <p>Let <var>checkedThen</var> be the result of checking <var>t</var> against <var>T</var></p>
    <li data-md>
     <p>Let <var>checkedElse</var> be the result of checking <var>e</var> against <var>T</var></p>
    <li data-md>
     <p>Return the checked expression <var>checkedCond</var> <code>?</code> <var>checkedThen</var> <code>:</code> <var>checkedElse</var></p>
   </ul>
   <p>To check the conditional expression <var>ce</var>:</p>
   <ul>
    <li data-md>
     <p>Extend the context with a fresh type variable <var>T</var></p>
    <li data-md>
     <p>Return the result of checking <var>ce</var> against <var>T</var></p>
   </ul>
   <h2 class="heading settled" data-level="18" id="attribute"><span class="secno">18. </span><span class="content">Attributes</span><a class="self-link" href="#attribute"></a></h2>
   <p class="issue" id="issue-825e7e43"><a class="self-link" href="#issue-825e7e43"></a> This chapter needs to list the built-in attributes that impact the language semantics, and also to specify the rules for how user-define attributes are defined and used.</p>
   <h2 class="heading settled" data-level="19" id="vis"><span class="secno">19. </span><span class="content">Visibility Control</span><a class="self-link" href="#vis"></a></h2>
   <div class="issue" id="issue-7828c441">
    <a class="self-link" href="#issue-7828c441"></a> This chapter needs to explain the rules for: 
    <ul>
     <li data-md>
      <p>What declarations in a module are visible to modules that <code>import</code> it?</p>
     <li data-md>
      <p>What are the modifiers that can be used to control visibility (<code>public</code>, <code>internal</code>, <code>private</code>), and what are their semantics.</p>
     <li data-md>
      <p>What is the inferred visibility of a declaration without an explicit modifier?</p>
     <li data-md>
      <p>What are the rules about what modifiers are legal in what contexts?</p>
     <li data-md>
      <p>E.g., a <code>public</code> field should not be allowed in an <code>internal</code> type.</p>
     <li data-md>
      <p>E.g., a <code>public</code> function should not be allowed to have a non-<code>public</code> type used in its signature.</p>
     <li data-md>
      <p>How is visibility controlled for interface conformances?</p>
    </ul>
   </div>
   <h2 class="heading settled" data-level="20" id="linearization"><span class="secno">20. </span><span class="content">Type Linearization</span><a class="self-link" href="#linearization"></a></h2>
   <div class="issue" id="issue-848d0302">
    <a class="self-link" href="#issue-848d0302"></a> 
    <p>This chapter needs to explain how, given a type, an implementation should derive the \emph{linearization} of that type into an ordered list of \emph{facets}.
Each facet corresponds to some DeclBody, and thus has a set of declarations in it that may bind certain names.</p>
    <p>The linearization of a type should include:</p>
    <ul>
     <li data-md>
      <p>A facet for the type itself, which will include the declarations explicitly written inside the body of that type’s DeclBody.</p>
     <li data-md>
      <p>One facet for each transitive base of the type, including both concrete types it inherits from and <code>interface</code>s it conforms to.</p>
     <li data-md>
      <p>One facet for each <code>extension</code> that is both visible in the context where linearization is being performed \emph{and} applicable to the type.</p>
    </ul>
    <p>Note that base facets are included even for bases that are introduced via an <code>extension</code>.
Similarly, extension facets are included for extensions that might apply to the type through one of its bases.</p>
    <p>The set of facets for a type will always be a subset of those for each of its bases.</p>
    <p>The order of facets is significant, because it affects the relative priority of the bindings in those facets for lookup.
In the simplest terms, facets earlier in the list will be prioritized over those later in the list.
Thus, derived types should always appear before their bases.
In general, facets for extensions should appear after the facet for the type declaration that the extension applies to.</p>
    <p>(It is possible that a simple \emph{sequence} of facets will not actually be sufficient, and a DAG representation might be needed, if forcing a total ordering on facets would risk unintuitive lookup results)</p>
    <p>There is good precedent in the PL world for this kind of linearization, which is sometimes referred to as the \emph{method resolution order} (MRO).
A particular solution, known as the \emph{C3 linearization algorithm} is often recommended as the one to use, and it is what the Slang compiler currently implements.</p>
   </div>
   <h2 class="heading settled" data-level="21" id="SECTION.interface"><span class="secno">21. </span><span class="content">Interfaces</span><a class="self-link" href="#SECTION.interface"></a></h2>
   <div class="issue" id="issue-e713f78f">
    <a class="self-link" href="#issue-e713f78f"></a> This chapter needs to document the rules for what it means for a type to \emph{conform} to an interface, and how the compiler should check for conformance. 
    <p>The biggest challenge in specifying the rules for conformance is that the Slang compiler does not require an \emph{exact} match between the requirement in an <code>interface</code> and the concrete declaration that satisfies it:</p>
    <ul>
     <li data-md>
      <p>A field can satisfy a <code>property</code> requirement.</p>
     <li data-md>
      <p>A non-\code{throws} function can satisfy a \code{throws} requirement</p>
     <li data-md>
      <p>A non-<code>[mutating]</code> function can satisfy a <code>[mutating]</code> requirement</p>
     <li data-md>
      <p>A function with default arguments can satisfy a requirement without those arguments</p>
     <li data-md>
      <p>A generic function may satisfy a non-generic requirement</p>
     <li data-md>
      <p>A generic declaration with fewer constraints may satisfy a generic requirement with more constraints</p>
    </ul>
    <p>In the limit, we can say that a type satisfies a requirement if a \emph{synthesized} declaration that exactly matches the requirement signature would type-check successfully.
The body of a synthesized <code>get</code> accessor for a property \code{p} would consist of something like \code{return this.p;}.
Similarly, the body of a synthesized <code>func</code> for a function \code{f} would consist of something like \code{return this.f(a0, a1, ...);} where the values \code{a0}, etc., are the declared parameters of the synthesized function.</p>
    <p>The main place where the above approach runs into wrinkles is around synthesis for generic requirements, where subtle semantic choices need to be made.</p>
    <p>Ideally, checking of conformances is something that can be done after checking of all explicit function bodies (statements/expressions) in a module.
Other checking rules can \emph{assume} that a type conforms to an interface if it is declared to, knowing that the error will be caught later if it doesn’t.</p>
    <p>The important case where conformances can’t be checked late is if we support inference (not just synthesis) of declarations to satisfy requirements.
Basically, if we want to support inference of <code>associatedtype</code>s, then only way to infer that type is by looking for the declarations that satisfy other requirements.</p>
    <p>(Conveniently, checking of requirements also doesn’t require looking at function bodies: only signatures)</p>
    <p>This chapter is probably also the right place to define the rules for canonicalization of interface conjunctions.</p>
   </div>
   <h2 class="heading settled" data-level="22" id="section.generic"><span class="secno">22. </span><span class="content">Generics</span><a class="self-link" href="#section.generic"></a></h2>
   <div class="issue" id="issue-78397113">
    <a class="self-link" href="#issue-78397113"></a> This chapter needs to define the key semantic-checking operations that relate to generics, including: 
    <ul>
     <li data-md>
      <p>Inference of \emph{implied constraints} on a generic declaration, based on the signature of that declaration.</p>
     <li data-md>
      <p>Validation and canonicalization of constraints on generic declarations.</p>
     <li data-md>
      <p>Validation of explicit specialization of a generic (e.g., <code>G&lt;A,B></code>), which includes validating that the constraints on the generic are satisfied by the parameters.</p>
     <li data-md>
      <p>Inference of generic arguments in contexts where a generic function is called on value arguments (without first specializing it).</p>
    </ul>
   </div>
   <h2 class="heading settled" data-level="23" id="lookup"><span class="secno">23. </span><span class="content">Lookup</span><a class="self-link" href="#lookup"></a></h2>
   <div class="issue" id="issue-c90c48cc">
    <a class="self-link" href="#issue-c90c48cc"></a> 
    <p>This chapter needs to document the rules for how names are looked up in two cases:</p>
    <ul>
     <li data-md>
      <p>Looking up a standalone Identifier as an expression or type expression, we need to look up in the current context.</p>
     <li data-md>
      <p>When looking up a name in some type, whether explicitly as part of a MemberExpression}, or implicitly as part of lookup through <code>this</code> inside a type body.</p>
    </ul>
    <p>The first kind of lookup is easily expressed as a recursion over the structure of contexts, but will often bottleneck through lookup in the context of some type (since code is so often nested under a type).
This kind of lookup also needs to deal with <code>import</code> declarations and the visibility rules for <a data-link-type="dfn" href="#source-unit" id="ref-for-source-unit④②">source units</a> in the same module as one another.</p>
    <p>The second kind of lookup requires access to a linearization of the type.
It potentially needs to deal with performing substitutions on the type/signature of a declaration that is found, so that it is adjusted for the \code{This} type it has been looked up through.</p>
    <p>Both kinds of lookup need to deal with the possibility that a name will be \emph{overloaded}.
At this level, lookup should probably return the full set of all \emph{candidates} when overloading occurs, but retain enough structure in the lookup results that overload resolution can evaluate which should be prioritized over the others, based (e.g., picking members from a more-derived type over those from a base type).</p>
    <p>The lookup rules here should be able to handle lookup of <code>init</code>, and <code>subscript</code> declaration via a synthesized name that cannot conflict with other identifiers (in case, e.g., a user has a struct with an ordinary field named \texttt{subscript}).</p>
    <p>Lookup will also need to interact with visibility, by stripping out non-<code>public</code> bindings from <code>import</code>ed modules.</p>
    <p>Note that this chapter does not need to deal with <code>extension</code> declarations, as they are handled as part of type linearization.</p>
    <p>One important kind of subtlety to lookup is that upon finding a \emph{first} in-scope declaration of a name, we can inspect the category of that declaration to determine if overloading is even possible.
That is, if the first declaration found is in a category of declaration that doesn’t support overloading (basically anything other than a <code>func</code>, <code>init</code>, or <code>subscript</code>), then that result can be used as-is as the result of lookup.</p>
   </div>
   <h2 class="heading settled" data-level="24" id="overload"><span class="secno">24. </span><span class="content">Overload Resolution</span><a class="self-link" href="#overload"></a></h2>
   <div class="issue" id="issue-0f700136">
    <a class="self-link" href="#issue-0f700136"></a> This chapter needs to describe how to disambiguate an overloaded lookup result.
Overload resolution comes up primarily in two places: 
    <ul>
     <li data-md>
      <p>When the typing rules attempt to coerce an overloaded expression to some type.</p>
     <li data-md>
      <p>When attempting to call an overloaded expression as a function.</p>
    </ul>
    <p>(Hypothetically it can also arise for a generic specialization <code>F&lt;A,B,...></code> as well, so the rules need to be ready for that case)</p>
    <p>The first of the two cases is the easier one by far, with an outline of it’s semantics being:</p>
    <ul>
     <li data-md>
      <p>\emph{Filter} the candidates to only those that can be coerced successfully to the desired type.</p>
     <li data-md>
      <p>Select the best candidate among the remaining ones, based on priority.</p>
     <li data-md>
      <p>The relative "distance" of declarations needs to factor in (more derived vs. more base, imported vs. local, etc.)</p>
     <li data-md>
      <p>Additionally, the relative cost of the type conversions applied (if any) may be relevant.</p>
    </ul>
    <p>The second case (overloaded calls) is superficially similar, in that we can filter the candidates to the applicable ones and then pick the best.
The definition of <code>best'' for an overloaded call is more subtle and needs care to not mess up developer expectations for things like simple infix expressions (since event infix \code{operator+} is handled as an overloaded call, semantically).  A few basic principles that guide intuition:   * For every candidate we should know the conversion/cost associated with each argument position, as well as the conversion/cost associated with the function result position (if we are in a checking rather than synthesis context). * One overload candidate is strictly better than another if it is better at at least one position (one argument, or the function result), and not worse at any position. * When choosing between candidates that are equally good, a few factors play in:   *  The relative "distance" of declarations (as determined by lookup)   *  Which candidates required defaulting of arguments (and how many)   *  Candidates that required implicit specialization of a generic vs. those that didn’t   *  For two candidates that required implicit specialization of a generic, which of them is </code>more general'' than the other.</p>
    <p>Generally, a function $f$ is ``more general'' than another function $g$ if for every set of arguments that $g$ is applicable to, $f$ is also applicable, but not vice versa.</p>
    <p>Also: it doesn’t exactly belong in this chapter, but something needs to document the rules for when two function declarations are considered to have the same signature (or at least conflicting signatures), so that errors can be diagnosed when trying to redefine a function.</p>
   </div>
   <h2 class="heading settled" data-level="25" id="subtype"><span class="secno">25. </span><span class="content">Subtyping</span><a class="self-link" href="#subtype"></a></h2>
   <div class="issue" id="issue-63a40c8b">
    <a class="self-link" href="#issue-63a40c8b"></a> 
    <p>This chapter needs to define what the subtyping rules are, as something distinct from the conversion/coercion rules (which need their own chapter).</p>
    <p>At the most basic, we want to have a guarantee that if \code{T} is a subtype of \code{S}, then it is safe and meaningful to read an \code{S} from a memory location that holds a \code{T}.
Beyond that, we need to decide whether it a subtype (in the formal semantics) must have the same size and stride as the supertype, or it if is allowed to be larger.</p>
    <p>The key reason to have the subtyping rules kept distinct from the conversion/coercion rules is that many built-in types (as well as the conceptual/intermediate types that are needed for semantic checking) are covariant type constructors, where the covariance must be defined in terms of true subtyping and not just convertability. E.g., a <code>borrow</code> T} can be converted to a <code>borrow</code> S} only if \code{T} is truly a subtype of \code{S}, and not just convertible to it.</p>
    <p>Note that the <code>is-a-subtype-of'' relationship between two types is distinct from the </code>conforms-to'' relationship between a proper type and an interface type.
The ``conforms-to'' relationship might need to be documented in this chapter as well, just because it shares a lot of structurally similar machinery.</p>
    <p>(In fact, it may be best to have a judgement that is parameterized over the type relationship that is being checked: conformance, subtyping, implicit coercion, explicit conversion.)</p>
   </div>
   <h2 class="heading settled" data-level="26" id="conv"><span class="secno">26. </span><span class="content">Type Conversions</span><a class="self-link" href="#conv"></a></h2>
   <div class="issue" id="issue-f629939f">
    <a class="self-link" href="#issue-f629939f"></a> Broadly this chapter needs to do two things: 
    <ul>
     <li data-md>
      <p>Define the semantic rules for implicit type coercion and explicit type conversion.</p>
     <li data-md>
      <p>Specify the implicit coercions that are defined for the basic Slang types, and their costs.</p>
    </ul>
    <p>The latter part (the builtin implicit coercions and their costs) can be a simple table, once the rules are properly defined.</p>
    <p>From a big-picture perspective, the implicit type coercion rules when coercing something of type <code>From</code> to type <code>To</code> are something like:</p>
    <ul>
     <li data-md>
      <p>If <code>From</code> and <code>To</code> are identical types, then coercion succeeds, with no cost.</p>
     <li data-md>
      <p>If <code>From</code> is a subtype of <code>To</code>, then coercion succeeds, with a cost that relates to how "far" apart the types are in an inheritance hierarchy.</p>
     <li data-md>
      <p>If neither of the above applies, look up <code>init</code> declarations on type <code>To</code>, filtered to those that are marked as suitable for implicit coercion, and then perfom overload resolution to pick the best overload. The cost is the cost that was marked on the chosen <code>init</code> declaration.</p>
    </ul>
    <p>The overload resolution rules rely on checking implicit type coercions, and the implicit type coercion rules can end up checking an overloaded <code>init</code> call.
The specification must explain how to avoid the apparant possibility of infinite recursion.
The simplest way to avoid such problems is to specif that the overload resolution for the <code>init</code> call above uses a modified form where only subtyping, and not implicit coercion, is allowed for arguments.</p>
    <p>Explicit type conversion follows the same overall flow as the implicit case, except it does not filter the candidates down to only those marked as usable for implicit coercion.</p>
   </div>
   <h2 class="heading settled" data-level="27" id="autodiff"><span class="secno">27. </span><span class="content">Automatic Differentiation</span><a class="self-link" href="#autodiff"></a></h2>
   <div class="issue" id="issue-a7a8dc86">
    <a class="self-link" href="#issue-a7a8dc86"></a> This chapter needs to specify: 
    <ul>
     <li data-md>
      <p>The built-in types and attributes related to automatic differentiation.</p>
     <li data-md>
      <p>The rules applied when checking the body of a <code>[Differentiable]</code> function.</p>
     <li data-md>
      <p>The semantics of the <code>fwd_diff</code> and <code>bwd_diff</code> operators, including how to determine the signature of the function they return.</p>
     <li data-md>
      <p>The requirements of the <code>IDifferentiable</code> interface, and also the rules used to automatically synthesize conformance for it.</p>
    </ul>
   </div>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note.</p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don't scroll to compensate for the ToC if we're above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don't know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn't exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn't standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don't have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we're at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can't find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#abstract-storage-access">abstract storage access</a><span>, in § 9.3</span>
   <li><a href="#abstract-storage-access-mode">abstract storage access mode</a><span>, in § 9.4</span>
   <li><a href="#abstract-storage-location">abstract storage location</a><span>, in § 9.2</span>
   <li><a href="#abstract-storage-reference-type">abstract storage reference type</a><span>, in § 9.5</span>
   <li><a href="#activation-record">activation record</a><span>, in § 11.2</span>
   <li><a href="#address-space">address space</a><span>, in § 7.1</span>
   <li><a href="#aggregate-type-declaration">aggregate type declaration</a><span>, in § 15.4.1</span>
   <li><a href="#alternatives">alternatives</a><span>, in § 16.5.2</span>
   <li><a href="#any-type">any type</a><span>, in § 5.17</span>
   <li><a href="#architectures">architectures</a><span>, in § 11</span>
   <li><a href="#arguments">arguments</a><span>, in § 5.18</span>
   <li><a href="#array">array</a><span>, in § 5.5</span>
   <li><a href="#array-type">array type</a><span>, in § 5.5</span>
   <li><a href="#associated-record-types">associated record types</a><span>, in § 12.1.1.1</span>
   <li><a href="#associated-type">associated type</a><span>, in § 5.15</span>
   <li><a href="#associated-type-declaration">associated type declaration</a><span>, in § 15.4.5</span>
   <li><a href="#balanced">balanced</a><span>, in § 4.2.2</span>
   <li><a href="#balanced-tokens">Balanced tokens</a><span>, in § 4.2.2</span>
   <li><a href="#bases">bases</a><span>, in § 15.4.2</span>
   <li><a href="#binary">binary</a><span>, in § 10.2</span>
   <li><a href="#binary-literal">binary literal</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#binding">binding</a><span>, in § 15</span>
   <li><a href="#bindings">bindings</a><span>, in § 6.1</span>
   <li><a href="#binds">binds</a><span>, in § 6.1</span>
   <li><a href="#block">block</a><span>, in § 12.1.3.1</span>
   <li><a href="#block-comment">block comment</a><span>, in § 2.4.1.2</span>
   <li><a href="#block-shape">block shape</a><span>, in § 12.1.3.1</span>
   <li><a href="#block-statement">block statement</a><span>, in § 16.3</span>
   <li><a href="#body">body</a><span>, in § 15.7.2</span>
   <li><a href="#breaks-out-of">breaks out of</a><span>, in § 11.4.1</span>
   <li><a href="#break-statement">break statement</a><span>, in § 16.7.1</span>
   <li><a href="#bundle">bundle</a><span>, in § 10.5</span>
   <li><a href="#callouts">callouts</a><span>, in § 1.4.7</span>
   <li><a href="#case-declarations">case declarations</a><span>, in § 15.4.3.1</span>
   <li><a href="#cast-expression">cast expression</a><span>, in § 17.9</span>
   <li><a href="#chain-production">chain production</a><span>, in § 1.5</span>
   <li><a href="#character">character</a><span>, in § 2.1</span>
   <li><a href="#characteristic">characteristic</a><span>, in § 1.4.6</span>
   <li><a href="#character-literal">character literal</a><span>, in § 2.4.3.2</span>
   <li><a href="#checking-judgement">checking judgement</a><span>, in § 6.2.2</span>
   <li><a href="#checks">checks</a><span>, in § 6.3</span>
   <li><a href="#checks-against">checks against</a><span>, in § 6.2.2</span>
   <li><a href="#class-type">class type</a><span>, in § 5.12</span>
   <li><a href="#collective">collective</a><span>, in § 11.4</span>
   <li><a href="#column-count">column count</a><span>, in § 5.7</span>
   <li><a href="#column-type">column type</a><span>, in § 5.7</span>
   <li><a href="#commands">commands</a><span>, in § 12.1</span>
   <li><a href="#comment">comment</a><span>, in § 2.4.1.2</span>
   <li><a href="#compiler">compiler</a><span>, in § 10.1</span>
   <li><a href="#compute-dispatch">compute dispatch</a><span>, in § 12.1.3.1</span>
   <li><a href="#compute-pipeline">compute pipeline</a><span>, in § 12.1.3.1</span>
   <li><a href="#concrete-storage-location">concrete storage location</a><span>, in § 9.1</span>
   <li><a href="#constructor-declaration">constructor declaration</a><span>, in § 15.8</span>
   <li><a href="#context">context</a><span>, in § 6.1</span>
   <li><a href="#context-entries">context entries</a><span>, in § 6.1</span>
   <li><a href="#context-free-grammar">context-free grammar</a><span>, in § 1.5</span>
   <li><a href="#control-flow-region">control-flow region</a><span>, in § 11.4.1</span>
   <li><a href="#decimal-literal">decimal literal</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#declaration">declaration</a><span>, in § 15</span>
   <li><a href="#declaration-bodies">declaration bodies</a><span>, in § 15.1.1</span>
   <li><a href="#declaration-reference">declaration reference</a><span>, in § 5.9</span>
   <li><a href="#declaration-statement">declaration statement</a><span>, in § 16.2</span>
   <li><a href="#dependent-function-type">dependent function type</a><span>, in § 5.19</span>
   <li><a href="#devices">devices</a><span>, in § 11</span>
   <li><a href="#digits">digits</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#direct-declaration-reference">direct declaration reference</a><span>, in § 5.9.1</span>
   <li><a href="#direction">direction</a><span>, in § 15.1.3.1</span>
   <li><a href="#direct-members">direct members</a><span>, in § 15.4.1</span>
   <li><a href="#dispatch">dispatch</a><span>, in § 12.1</span>
   <li><a href="#dispatch-parameters">dispatch parameters</a><span>, in § 12.1.1.1</span>
   <li><a href="#duck">duck</a><span>, in § 1.4.2</span>
   <li><a href="#dynamic-library">dynamic library</a><span>, in § 10.2</span>
   <li><a href="#effects">effects</a><span>, in § 5.18</span>
   <li><a href="#element-count">element count</a><span>, in § 5.4</span>
   <li><a href="#element-type">element type</a><span>, in § 5.4</span>
   <li><a href="#empty-environment">empty environment</a><span>, in § 15</span>
   <li><a href="#entry-point-declaration">entry point declaration</a><span>, in § 15.7.4</span>
   <li><a href="#enum-declaration">enum declaration</a><span>, in § 15.4.3</span>
   <li><a href="#enum-type">enum type</a><span>, in § 5.13</span>
   <li><a href="#environment">environment</a><span>, in § 15</span>
   <li><a href="#escaped-line-break">escaped line break</a><span>, in § 2.4.1.1.1</span>
   <li><a href="#evaluated">evaluated</a><span>, in § 17</span>
   <li><a href="#executable">executable</a><span>, in § 10.2</span>
   <li><a href="#existential-value">existential value</a><span>, in § 5.17</span>
   <li><a href="#exponent">exponent</a><span>, in § 2.4.2.4</span>
   <li><a href="#expressions">Expressions</a><span>, in § 17</span>
   <li><a href="#expression-statement">expression statement</a><span>, in § 16.1</span>
   <li><a href="#fields">fields</a><span>, in § 15.4.1.2</span>
   <li><a href="#fixed-function">fixed-function</a><span>, in § 12.1.2.1</span>
   <li><a href="#fixed-function-parameters">fixed-function parameters</a><span>, in § 12.1.2.1</span>
   <li><a href="#floating-point-literal">floating-point literal</a><span>, in § 2.4.2.4</span>
   <li><a href="#floating-point-types">floating-point types</a><span>, in § 5.3.3.2</span>
   <li><a href="#fragile">fragile</a><span>, in § 13</span>
   <li><a href="#fully-specialized">fully specialized</a><span>, in § 5.9.4</span>
   <li><a href="#function">function</a><span>, in § 5.18</span>
   <li><a href="#function-declaration">function declaration</a><span>, in § 15.7</span>
   <li><a href="#function-definition">function definition</a><span>, in § 15.7.2</span>
   <li><a href="#function-scope">function scope</a><span>, in § 15.6.3</span>
   <li><a href="#function-scope-constant">function-scope constant</a><span>, in § 15.6.3.1</span>
   <li><a href="#function-scope-static-variable">function-scope static variable</a><span>, in § 15.6.3.2</span>
   <li><a href="#function-type">function type</a><span>, in § 5.18</span>
   <li><a href="#generic">generic</a><span>, in § 5.19</span>
   <li><a href="#generic-arguments">generic arguments</a><span>, in § 15.12.2</span>
   <li><a href="#generic-parameter-list">generic parameter list</a><span>, in § 15.12</span>
   <li><a href="#generic-parameters">generic parameters</a><span>, in § 15.12.1</span>
   <li><a href="#generic-type-parameter">generic type parameter</a><span>, in § 15.12.1</span>
   <li><a href="#generic-value-parameter">generic value parameter</a><span>, in § 15.12.1</span>
   <li><a href="#global-constant">global constant</a><span>, in § 15.6.2.1</span>
   <li><a href="#global-shader-parameter">global shader parameter</a><span>, in § 15.6.2.3</span>
   <li><a href="#grid">grid</a><span>, in § 12.1.3.1</span>
   <li><a href="#grid-shape">grid shape</a><span>, in § 12.1.3.1</span>
   <li><a href="#hexadecimal-literal">hexadecimal literal</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#horizontal-whitespace">Horizontal whitespace</a><span>, in § 2.4.1.1</span>
   <li><a href="#host">host</a><span>, in § 11</span>
   <li><a href="#identifier">identifier</a><span>, in § 2.4.2.1</span>
   <li><a href="#if-statement">if statement</a><span>, in § 16.5.1</span>
   <li><a href="#implementing-declaration">implementing declaration</a><span>, in § 14.2.2</span>
   <li><a href="#implicit-specialization">implicit specialization</a><span>, in § 15.12.3</span>
   <li><a href="#include-declarations">include declarations</a><span>, in § 14.2.1</span>
   <li><a href="#infix-expression">infix expression</a><span>, in § 17.12.1</span>
   <li><a href="#initial-context">initial context</a><span>, in § 4.1</span>
   <li><a href="#input-environment">input environment</a><span>, in § 15</span>
   <li><a href="#instance-members">instance members</a><span>, in § 15.4.1.1</span>
   <li><a href="#instances">instances</a><span>, in § 5</span>
   <li><a href="#int64">Int64</a><span>, in § 5.3.3.1</span>
   <li><a href="#integer-literal">integer literal</a><span>, in § 2.4.2.3</span>
   <li><a href="#integer-types">integer types</a><span>, in § 5.3.3.1</span>
   <li><a href="#interface">interface</a><span>, in § 5.16</span>
   <li><a href="#interface-declaration">interface declaration</a><span>, in § 15.4.1</span>
   <li><a href="#introduces">introduces</a><span>, in § 15</span>
   <li><a href="#invocable">invocable</a><span>, in § 15.1.5</span>
   <li><a href="#kernel">kernel</a><span>, in § 10.5</span>
   <li><a href="#kind">kind</a><span>, in § 5.2</span>
   <li><a href="#label">label</a><span>, in § 16.7.1</span>
   <li><a href="#lane-id">lane ID</a><span>, in § 11.3</span>
   <li><a href="#launched">launched</a><span>, in § 11.1</span>
   <li><a href="#layout">layout</a><span>, in § 8</span>
   <li><a href="#left-hand-side">left-hand side</a><span>, in § 1.5</span>
   <li><a href="#legacy">legacy</a><span>, in § 1.4.8</span>
   <li><a href="#level">level</a><span>, in § 5.1</span>
   <li><a href="#lex">lex</a><span>, in § 2.4</span>
   <li><a href="#lexeme">lexeme</a><span>, in § 2.4</span>
   <li><a href="#line-break">line break</a><span>, in § 2.4.1.1.1</span>
   <li><a href="#line-comment">line comment</a><span>, in § 2.4.1.2</span>
   <li><a href="#lines">lines</a><span>, in § 2.4.1.1.1</span>
   <li><a href="#linker">linker</a><span>, in § 10.2</span>
   <li><a href="#literal">literal</a><span>, in § 2.4.2.2</span>
   <li><a href="#loadable-code">loadable code</a><span>, in § 10.2</span>
   <li><a href="#loading">loading</a><span>, in § 10.3</span>
   <li><a href="#local-scope">local scope</a><span>, in § 15</span>
   <li><a href="#local-variable">local variable</a><span>, in § 15.6.3.3</span>
   <li><a href="#loop-statement">loop statement</a><span>, in § 16.6</span>
   <li><a href="#l-values">l-values</a><span>, in § 17</span>
   <li><a href="#matrix">matrix</a><span>, in § 5.7</span>
   <li><a href="#matrix-type">matrix type</a><span>, in § 5.7</span>
   <li><a href="#member-declaration-reference">member declaration reference</a><span>, in § 5.9.2</span>
   <li><a href="#memory-access">memory access</a><span>, in § 7.2</span>
   <li><a href="#memory-access-mode">memory access mode</a><span>, in § 7.2.1</span>
   <li><a href="#memory-locations">memory locations</a><span>, in § 7.1</span>
   <li><a href="#merge-point">merge point</a><span>, in § 11.4.1</span>
   <li><a href="#meta-pattern">meta-pattern</a><span>, in § 1.4.5</span>
   <li><a href="#meta-type">meta-type</a><span>, in § 1.4.3</span>
   <li><a href="#meta-values">meta-values</a><span>, in § 1.4.3</span>
   <li><a href="#meta-variable">meta-variable</a><span>, in § 1.4.4</span>
   <li><a href="#methods">methods</a><span>, in § 15.4.1.3</span>
   <li><a href="#mirror">mirror</a><span>, in § 10.4</span>
   <li><a href="#module">module</a><span>, in § 14</span>
   <li><a href="#module-declaration">module declaration</a><span>, in § 14.1</span>
   <li><a href="#nominal-type">nominal type</a><span>, in § 5.10</span>
   <li><a href="#nonterminal">nonterminal</a><span>, in § 1.5</span>
   <li><a href="#numeric-literal">numeric literal</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#numeric-literal-suffix">numeric literal suffix</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#object">object</a><span>, in § 5.12</span>
   <li><a href="#object-code">object code</a><span>, in § 10.1</span>
   <li><a href="#ordered">ordered</a><span>, in § 4.2.1</span>
   <li><a href="#output-environment">output environment</a><span>, in § 15</span>
   <li><a href="#parameter-declarations">parameter declarations</a><span>, in § 15.1.3</span>
   <li><a href="#parameters">parameters</a><span>, in § 5.18</span>
   <li><a href="#parent-environment">parent environment</a><span>, in § 15</span>
   <li><a href="#parsing">Parsing</a><span>, in § 4</span>
   <li><a href="#participate">participate</a><span>, in § 11.4</span>
   <li><a href="#pipeline-instance">pipeline instance</a><span>, in § 12.1.1</span>
   <li><a href="#pipeline-type">pipeline type</a><span>, in § 12.1.1.1</span>
   <li><a href="#prefix-operator">prefix operator</a><span>, in § 17.11.1</span>
   <li><a href="#primary-source-unit">primary source unit</a><span>, in § 14.1</span>
   <li><a href="#process">process</a><span>, in § 11</span>
   <li><a href="#production">production</a><span>, in § 1.5</span>
   <li><a href="#programmable">programmable</a><span>, in § 12.1.2.1</span>
   <li><a href="#property-declaration">property declaration</a><span>, in § 15.9</span>
   <li><a href="#proper-type">proper type</a><span>, in § 5.2</span>
   <li><a href="#proposition">proposition</a><span>, in § 5.20</span>
   <li><a href="#radix-specifier">radix specifier</a><span>, in § 2.4.2.2.1</span>
   <li><a href="#rasterization-pipeline">rasterization pipeline</a><span>, in § 12.1.3.2</span>
   <li><a href="#ray-tracing-pipeline">ray-tracing pipeline</a><span>, in § 12.1.3.3</span>
   <li><a href="#record">record</a><span>, in § 12.1.3</span>
   <li><a href="#reference-type">reference type</a><span>, in § 9.1.1</span>
   <li><a href="#resolved-expression">resolved expression</a><span>, in § 6.2.1</span>
   <li><a href="#result-type">result type</a><span>, in § 5.18</span>
   <li><a href="#retroactive-conformance">retroactive conformance</a><span>, in § 15.11</span>
   <li><a href="#right-hand-side">right-hand side</a><span>, in § 1.5</span>
   <li><a href="#row-count">row count</a><span>, in § 5.7</span>
   <li><a href="#rows">rows</a><span>, in § 5.7</span>
   <li><a href="#row-type">row type</a><span>, in § 5.7</span>
   <li><a href="#runtime-session">runtime session</a><span>, in § 11</span>
   <li><a href="#scalar-type">scalar type</a><span>, in § 5.7</span>
   <li><a href="#scope">scope</a><span>, in § 15</span>
   <li><a href="#secondary-source-units">secondary source units</a><span>, in § 14.2</span>
   <li><a href="#sign">sign</a><span>, in § 2.4.2.4</span>
   <li><a href="#sort">sort</a><span>, in § 5.2</span>
   <li><a href="#source-unit">source unit</a><span>, in § 2.1</span>
   <li><a href="#specialized">specialized</a><span>, in § 15.12.2</span>
   <li><a href="#specialized-declaration-reference">specialized declaration reference</a><span>, in § 5.9.3</span>
   <li><a href="#specialize-expression">specialize expression</a><span>, in § 17</span>
   <li><a href="#stage-instance">stage instance</a><span>, in § 12.1.2</span>
   <li><a href="#stage-type">stage type</a><span>, in § 12.1.2.1</span>
   <li><a href="#statement">statement</a><span>, in § 16</span>
   <li><a href="#static-global-variable">static global variable</a><span>, in § 15.6.2.2</span>
   <li><a href="#static-library">static library</a><span>, in § 10.2</span>
   <li><a href="#static-members">static members</a><span>, in § 15.4.1.1</span>
   <li><a href="#storable">storable</a><span>, in § 7</span>
   <li><a href="#strand">strand</a><span>, in § 11.1</span>
   <li><a href="#string-literal">string literal</a><span>, in § 2.4.3.1</span>
   <li><a href="#struct-type">struct type</a><span>, in § 5.11</span>
   <li><a href="#structured-region">structured region</a><span>, in § 11.4.1</span>
   <li><a href="#subscript-declaration">subscript declaration</a><span>, in § 15.10</span>
   <li><a href="#switch-statement">switch statement</a><span>, in § 16.5.2</span>
   <li><a href="#tangle">tangle</a><span>, in § 11.4.1</span>
   <li><a href="#term">term</a><span>, in § 17</span>
   <li><a href="#terminal">terminal</a><span>, in § 1.5</span>
   <li><a href="#tokens">Tokens</a><span>, in § 2.4.2</span>
   <li><a href="#traditional">traditional</a><span>, in § 1.4.8</span>
   <li><a href="#traditional-buffer-declaration">traditional buffer declaration</a><span>, in § 15.13</span>
   <li><a href="#traditional-function-declaration">traditional function declaration</a><span>, in § 15.7.3</span>
   <li><a href="#traditional-type-alias-declaration">traditional type alias declaration</a><span>, in § 15.4.4.1</span>
   <li><a href="#trivia">Trivia</a><span>, in § 2.4.1</span>
   <li><a href="#trivial-production">trivial production</a><span>, in § 1.5</span>
   <li><a href="#type">type</a><span>, in § 5</span>
   <li><a href="#type-alias">type alias</a><span>, in § 5.14</span>
   <li><a href="#type-alias-declaration">type alias declaration</a><span>, in § 15.4.4</span>
   <li><a href="#type-declaration">type declaration</a><span>, in § 15.4</span>
   <li><a href="#type-expression">type expression</a><span>, in § 17</span>
   <li><a href="#type-specifiers">type specifiers</a><span>, in § 15.1</span>
   <li><a href="#underlying-type">underlying type</a><span>, in § 15.4.3</span>
   <li><a href="#underlying-value">underlying value</a><span>, in § 15.4.3.1</span>
   <li><a href="#uniform-shader-parameters">uniform shader parameters</a><span>, in § 15.6.2.3</span>
   <li><a href="#unit-type">unit type</a><span>, in § 5.3.1</span>
   <li><a href="#unit-value">unit value</a><span>, in § 5.3.1</span>
   <li><a href="#unordered">unordered</a><span>, in § 4.2.2</span>
   <li><a href="#unspecialized">unspecialized</a><span>, in § 5.9.4</span>
   <li><a href="#values">values</a><span>, in § 5</span>
   <li><a href="#variable">variable</a><span>, in § 15.6</span>
   <li><a href="#variable-declaration">variable declaration</a><span>, in § 15.6</span>
   <li><a href="#vector">vector</a><span>, in § 5.6</span>
   <li><a href="#vector-type">vector type</a><span>, in § 5.6</span>
   <li><a href="#wave">wave</a><span>, in § 11.3</span>
   <li><a href="#wave-size">wave size</a><span>, in § 11.3</span>
   <li><a href="#whitespace">Whitespace</a><span>, in § 2.4.1.1</span>
   <li><a href="#witness">witness</a><span>, in § 5.20</span>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-unicode">[Unicode]
   <dd><a href="https://www.unicode.org/versions/latest/"><cite>The Unicode Standard</cite></a>. URL: <a href="https://www.unicode.org/versions/latest/">https://www.unicode.org/versions/latest/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Need to turn that into a link. <a class="issue-return" href="#issue-cebba3e7" title="Jump to section">↵</a></div>
   <div class="issue">List the cases we end up using here <a class="issue-return" href="#issue-9b59a80d" title="Jump to section">↵</a></div>
   <div class="issue"> Need to write this up. <a class="issue-return" href="#issue-0aca773b" title="Jump to section">↵</a></div>
   <div class="issue"> Need to document supported escape sequences. <a class="issue-return" href="#issue-9b572b04" title="Jump to section">↵</a></div>
   <div class="issue"> We should define lexing in terms of producing a sequence of tokens-with-trivia instead of just lexemes. <a class="issue-return" href="#issue-86d596e4" title="Jump to section">↵</a></div>
   <div class="issue"> We should probably make a dedicated <strong>EOF</strong> be part of the alphabet for input source units, so that the <em>LexicalSourceUnit</em> can be simpler to define.
E.g., "The alphabet of the lexical grammar comprises all Unicode scalar values, as well as the unique meta-value <strong>EOF</strong>." <a class="issue-return" href="#issue-f4fa2ee1" title="Jump to section">↵</a></div>
   <div class="issue"> We either need to pick a normative reference here for some existing preprocessor (and thus bind ourselves to eventually supporting the semantics of that normative reference), or we need to take the time to fully document what the semantics of our current preprocessor are. <a class="issue-return" href="#issue-c15d86ec" title="Jump to section">↵</a></div>
   <div class="issue"> At the very least we need to document support for the GLSL <code>#version</code> directive, if we intend to keep it. <a class="issue-return" href="#issue-29446511" title="Jump to section">↵</a></div>
   <div class="issue">
     The intention of this chapter is to establish the overall rules for the recursive-descent <a data-link-type="dfn" href="#parsing">parsing</a> strategy needed for Slang’s grammar. 
    <p>Slang attempts to thread the needle by supporting the familiar C-like syntax of existing shading languages, while also support out-of-order declarations.
The parsing strategy is necessarily complicated as a result, but we hope to isolate most of the details to this chapter so that the grammar for each construct can be presented in its simplest possible fashion.</p>
     <a class="issue-return" href="#issue-29cd4b9f" title="Jump to section">↵</a>
   </div>
   <div class="issue">
    <ul>
     <li data-md>
      <p>An integer value</p>
     <li data-md>
      <p>A floating-point value</p>
     <li data-md>
      <p>A string value</p>
     <li data-md>
      <p>A code point value</p>
     <li data-md>
      <p>A Boolean value</p>
    </ul>
    <p>A composite value is one of:</p>
    <ul>
     <li data-md>
      <p>A tuple value</p>
     <li data-md>
      <p>An array-like value</p>
     <li data-md>
      <p>A structure value</p>
     <li data-md>
      <p>An <code>enum</code> value</p>
    </ul>
     <a class="issue-return" href="#issue-822bf595" title="Jump to section">↵</a>
   </div>
   <div class="issue"> Need to write this section. <a class="issue-return" href="#issue-639bc216" title="Jump to section">↵</a></div>
   <div class="issue"> Need to write this section. <a class="issue-return" href="#issue-639bc216①" title="Jump to section">↵</a></div>
   <div class="issue"> Need to write this section. <a class="issue-return" href="#issue-639bc216②" title="Jump to section">↵</a></div>
   <div class="issue">
     We need to do some work to define what a fully-qualified declaration reference is, since some parts of the semantics want it. 
    <p>A direct declaration reference is fully qualified if it is to a module, a parameter (generic or value), or a local declaration.</p>
    <p>A member declaration reference is fully qualified if its base is.
A specialization is fully qualified if its base is.</p>
     <a class="issue-return" href="#issue-644ae6fb" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     A witness that <em>t</em> <code>implements</code> <em>i</em> is a witness table. 
    <p>Given:</p>
    <ul>
     <li data-md>
      <p>an interface <em>i</em></p>
     <li data-md>
      <p>a requirement of <em>i</em>, represented as a direct member declaration of <em>r</em></p>
     <li data-md>
      <p>a type <em>t</em></p>
     <li data-md>
      <p>a witness table <em>w</em>, of type <em>t</em> <code>implements</code> <em>i</em></p>
    </ul>
    <p>then looking up the witness value for <em>r</em> should basically amount to a (static) member reference into <em>w</em>.</p>
    <p>This would all be easier if Slang followed the approach of something like Haskell, where the <code>This</code> parameter is basically explicit.</p>
    <p>Basically this amounts to saying that <em>t</em> <code>implements</code> <em>i</em> acts as a declaration reference to <em>i</em>, and that a declaration reference to an <code>interface</code> is not "fully specialized" (in the sense that members can be looked up) without that added parameter.</p>
    <p>(<em>t</em> <code>implements</code> <em>i</em>)::<em>r</em></p>
    <p>So... I need to do that.</p>
     <a class="issue-return" href="#issue-287dffd1" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     The intention of this chapter is to establish the formalisms and notations that will be used for expressing typing judgements and other semantic-checking rules in this specification. 
    <p>The notation being used here is aligned with how papers in the PLT world on type theory, semantics, etc. present a language.</p>
     <a class="issue-return" href="#issue-60092464" title="Jump to section">↵</a>
   </div>
   <div class="issue"> We need to describe here the process by which an identifier resolves to a <a data-link-type="dfn" href="#binding">binding</a>, including overloaded, etc.
The discussion here will have to be a forward reference to the algorithms to be given later. <a class="issue-return" href="#issue-0b447306" title="Jump to section">↵</a></div>
   <div class="issue">
     We need to define what checked expressions, resolved expressions, and (parsed) expressions are. 
    <p>A parsed expression is what you get out of the relevant parsing rules for <code>Expression</code>.</p>
    <p>A checked expression is a limited subset of forms that includes stuff like:</p>
    <ul>
     <li data-md>
      <p>typed values</p>
     <li data-md>
      <p>declaration references</p>
     <li data-md>
      <p>calls</p>
    </ul>
    <p>A typed value evaluates to itself, with no side effects.</p>
    <p>A resolved expression is either a checked expression <em>or</em> one of a few cases that need further context:</p>
    <ul>
     <li data-md>
      <p>overloaded declaration references</p>
     <li data-md>
      <p>overloaded calls</p>
     <li data-md>
      <p>initializer lists</p>
    </ul>
    <p>We also need to drill into the representation of types and values...</p>
     <a class="issue-return" href="#issue-7932f304" title="Jump to section">↵</a>
   </div>
   <div class="issue"> We need to find an existing formal memory model to reference and use. <a class="issue-return" href="#issue-394787aa" title="Jump to section">↵</a></div>
   <div class="issue"> We clearly need a chapter on the guarantees Slang makes about memory layout. <a class="issue-return" href="#issue-01a05192" title="Jump to section">↵</a></div>
   <div class="issue"> How do we get layout involved here? <a class="issue-return" href="#issue-009cfc6e" title="Jump to section">↵</a></div>
   <div class="issue">
     Some of the access types imply others, and it is inconvenient to have to write all explicitly in those cases.
For example: 
    <ul>
     <li data-md>
      <p>If you have <code>read</code> access, you can also perform a <code>get</code> (if the stored type is copyable).</p>
     <li data-md>
      <p>If you have <code>modify</code> access, you can also perform a <code>write</code>.</p>
     <li data-md>
      <p>If you hae <code>modify</code> or <code>write</code> access, you can also perform a <code>set</code> (if the stored type is copyable).</p>
    </ul>
    <p>(Having <code>modify</code> access doesn’t let you perform a <code>read</code> or <code>get</code>, because it implies the possibility of write-back which could in principle conflict with other accesses)</p>
     <a class="issue-return" href="#issue-30a06830" title="Jump to section">↵</a>
   </div>
   <div class="issue"> This text really belongs in the relevant sections about type-checking each of these expression forms. <a class="issue-return" href="#issue-3ba2c367" title="Jump to section">↵</a></div>
   <div class="issue"> This concept needs a proper name. <a class="issue-return" href="#issue-8a73695b" title="Jump to section">↵</a></div>
   <div class="issue"> We need to define what it means to "execute" statements and to "evaluate" expressions... <a class="issue-return" href="#issue-c7ca9480" title="Jump to section">↵</a></div>
   <div class="issue"> This section needs to define what it means for something to be _stable_ vs. <span>fragile</span>. <a class="issue-return" href="#issue-1af69862" title="Jump to section">↵</a></div>
   <div class="issue"> We need to define concepts that are used by traditional-style declarations, including <span>type specifiers</span>. <a class="issue-return" href="#issue-2d8048fe" title="Jump to section">↵</a></div>
   <div class="issue"> We need to define that there are two kinds of bodies: <span>declaration bodies</span> and _statement bodies_. <a class="issue-return" href="#issue-9cc4a13a" title="Jump to section">↵</a></div>
   <div class="issue"> The above desugaring logic is ignoring modifiers.
It also isn’t making sure to use a <code>let</code> declaration where possible (because <var>t</var> ends up being <code>const</code>). <a class="issue-return" href="#issue-f5fe1593" title="Jump to section">↵</a></div>
   <div class="issue"> Need a section to define what a "compile-time constant expression" is. <a class="issue-return" href="#issue-d245d890" title="Jump to section">↵</a></div>
   <div class="issue"> The checking judgements above aren’t complete because they don’t handle the case where _cond_ is absent, in which case it should be treated like it was <code>true</code>. <a class="issue-return" href="#issue-8233eb53" title="Jump to section">↵</a></div>
   <div class="issue"> These simplified prose checking rules are leaving out all the subtlties of sub-contexts, etc. <a class="issue-return" href="#issue-ee34b50f" title="Jump to section">↵</a></div>
   <div class="issue">
     Issue: The checking rules for <code>break</code>-able statements should add a suitable item to the context used for checking their body statements, which will be matched by the rules above. 
    <p>We also need to define the context-containment rule that is being used to look up the <code>break</code> item in the context.</p>
     <a class="issue-return" href="#issue-ad42b03a" title="Jump to section">↵</a>
   </div>
   <div class="issue"> The intent of the above rule is that checking a <code>discard</code> statement will add the <code>fragment</code> capability to the context, so that it can be checked against the capabilities of the surrounding function/context.
However, the way the other statement rules handle the context, they do not allow for anything in the context to flow upward/outward in that fashion.
It may be simplest to have the process of collecting the capabilities required by a function body be a different judgement than the type checking rules. <a class="issue-return" href="#issue-d9240fe8" title="Jump to section">↵</a></div>
   <div class="issue">
     We need a place to define a <span>term</span> and note how it can be either an expression or a <span>type expression</span>. 
    <p>A <span>specialize expression</span> might occur in either the expression or type expression grammar.</p>
     <a class="issue-return" href="#issue-5a6ece04" title="Jump to section">↵</a>
   </div>
   <div class="issue"> We need a description of how suffixed integer literals have their type derived from their suffix. <a class="issue-return" href="#issue-21dc6a97" title="Jump to section">↵</a></div>
   <div class="issue"> We need a description of how suffixed floating-point literals have their type derived from their suffix. <a class="issue-return" href="#issue-0ee3125d" title="Jump to section">↵</a></div>
   <div class="issue"> This presentation delegates the actual semantics of identifier expressions to the \textsc{Lookup} judgement, which needs to be explained in detail. <a class="issue-return" href="#issue-8f700738" title="Jump to section">↵</a></div>
   <div class="issue">
    <p>The semantics of member lookup are similar in complexity to identifier lookup (and indeed the two share a lot of the same machinery).
In addition to all the complications of ordinary name lookup (including overloading), member expressions also need to deal with:</p>
    <ul>
     <li data-md>
      <p>Implicit dereference of pointer-like types.</p>
     <li data-md>
      <p>Swizzles (vector or matrix).</p>
     <li data-md>
      <p>Static vs. instance members.</p>
    </ul>
     <a class="issue-return" href="#issue-160c01bf" title="Jump to section">↵</a>
   </div>
   <div class="issue"> This section needs to deal with the rules for when <code>this</code> is mutable vs. immutable. <a class="issue-return" href="#issue-b3e124b9" title="Jump to section">↵</a></div>
   <div class="issue"> These rules just kick the can down the road and say that synthesis/checking for call expressions bottlenecks through the \textsc{Call} judgements. <a class="issue-return" href="#issue-f168c006" title="Jump to section">↵</a></div>
   <div class="issue">
     To a first approximation, a subscript expression like \code{base[a0, a1]} is equivalent to something like \code{base.subscript(a0, a1)}.
That is, we look up the <code>subscript</code> members of the \code{base} expression, and then check a call to the result of lookup (which might be overloaded). 
    <p>Unlike simple function calls, a subscript expression can result in an <a data-link-type="dfn" href="#l-values">l-value</a>, based on what accessors the <code>subscript</code> declaration that is selected by overload resolution has.</p>
     <a class="issue-return" href="#issue-a18a7ea2" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     The above rule treats a cast exprssion as something closer to a type ascription expression, where it expects the underlying expression to be of the desired type, or something implicitly convertible to it. 
    <p>In contrast, we want a cast expression to be able to invoke \emph{explicit} conversions as well, which are currently not something the formalism encodes.</p>
     <a class="issue-return" href="#issue-6276d9df" title="Jump to section">↵</a>
   </div>
   <div class="issue"> The above rules pretend that we can write <code>out</code> before a type to indicate that we mean an l-value of that type.
We will need to expand the formalism to include \emph{qualified} types. <a class="issue-return" href="#issue-c7654cff" title="Jump to section">↵</a></div>
   <div class="issue"> This section defines the terms: <span>prefix operator</span>. <a class="issue-return" href="#issue-810bcb60" title="Jump to section">↵</a></div>
   <div class="issue"> The notation here needs a way to express the restrictions on lookup that are used for prefix/postfix operator names. <a class="issue-return" href="#issue-6038f0cb" title="Jump to section">↵</a></div>
   <div class="issue"> The syntax here should introduce the term: <span>infix expression</span>. <a class="issue-return" href="#issue-ecd5a10b" title="Jump to section">↵</a></div>
   <div class="issue"> This chapter needs to list the built-in attributes that impact the language semantics, and also to specify the rules for how user-define attributes are defined and used. <a class="issue-return" href="#issue-825e7e43" title="Jump to section">↵</a></div>
   <div class="issue">
     This chapter needs to explain the rules for: 
    <ul>
     <li data-md>
      <p>What declarations in a module are visible to modules that <code>import</code> it?</p>
     <li data-md>
      <p>What are the modifiers that can be used to control visibility (<code>public</code>, <code>internal</code>, <code>private</code>), and what are their semantics.</p>
     <li data-md>
      <p>What is the inferred visibility of a declaration without an explicit modifier?</p>
     <li data-md>
      <p>What are the rules about what modifiers are legal in what contexts?</p>
     <li data-md>
      <p>E.g., a <code>public</code> field should not be allowed in an <code>internal</code> type.</p>
     <li data-md>
      <p>E.g., a <code>public</code> function should not be allowed to have a non-<code>public</code> type used in its signature.</p>
     <li data-md>
      <p>How is visibility controlled for interface conformances?</p>
    </ul>
     <a class="issue-return" href="#issue-7828c441" title="Jump to section">↵</a>
   </div>
   <div class="issue">
    <p>This chapter needs to explain how, given a type, an implementation should derive the \emph{linearization} of that type into an ordered list of \emph{facets}.
Each facet corresponds to some DeclBody, and thus has a set of declarations in it that may bind certain names.</p>
    <p>The linearization of a type should include:</p>
    <ul>
     <li data-md>
      <p>A facet for the type itself, which will include the declarations explicitly written inside the body of that type’s DeclBody.</p>
     <li data-md>
      <p>One facet for each transitive base of the type, including both concrete types it inherits from and <code>interface</code>s it conforms to.</p>
     <li data-md>
      <p>One facet for each <code>extension</code> that is both visible in the context where linearization is being performed \emph{and} applicable to the type.</p>
    </ul>
    <p>Note that base facets are included even for bases that are introduced via an <code>extension</code>.
Similarly, extension facets are included for extensions that might apply to the type through one of its bases.</p>
    <p>The set of facets for a type will always be a subset of those for each of its bases.</p>
    <p>The order of facets is significant, because it affects the relative priority of the bindings in those facets for lookup.
In the simplest terms, facets earlier in the list will be prioritized over those later in the list.
Thus, derived types should always appear before their bases.
In general, facets for extensions should appear after the facet for the type declaration that the extension applies to.</p>
    <p>(It is possible that a simple \emph{sequence} of facets will not actually be sufficient, and a DAG representation might be needed, if forcing a total ordering on facets would risk unintuitive lookup results)</p>
    <p>There is good precedent in the PL world for this kind of linearization, which is sometimes referred to as the \emph{method resolution order} (MRO).
A particular solution, known as the \emph{C3 linearization algorithm} is often recommended as the one to use, and it is what the Slang compiler currently implements.</p>
     <a class="issue-return" href="#issue-848d0302" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     This chapter needs to document the rules for what it means for a type to \emph{conform} to an interface, and how the compiler should check for conformance. 
    <p>The biggest challenge in specifying the rules for conformance is that the Slang compiler does not require an \emph{exact} match between the requirement in an <code>interface</code> and the concrete declaration that satisfies it:</p>
    <ul>
     <li data-md>
      <p>A field can satisfy a <code>property</code> requirement.</p>
     <li data-md>
      <p>A non-\code{throws} function can satisfy a \code{throws} requirement</p>
     <li data-md>
      <p>A non-<code>[mutating]</code> function can satisfy a <code>[mutating]</code> requirement</p>
     <li data-md>
      <p>A function with default arguments can satisfy a requirement without those arguments</p>
     <li data-md>
      <p>A generic function may satisfy a non-generic requirement</p>
     <li data-md>
      <p>A generic declaration with fewer constraints may satisfy a generic requirement with more constraints</p>
    </ul>
    <p>In the limit, we can say that a type satisfies a requirement if a \emph{synthesized} declaration that exactly matches the requirement signature would type-check successfully.
The body of a synthesized <code>get</code> accessor for a property \code{p} would consist of something like \code{return this.p;}.
Similarly, the body of a synthesized <code>func</code> for a function \code{f} would consist of something like \code{return this.f(a0, a1, ...);} where the values \code{a0}, etc., are the declared parameters of the synthesized function.</p>
    <p>The main place where the above approach runs into wrinkles is around synthesis for generic requirements, where subtle semantic choices need to be made.</p>
    <p>Ideally, checking of conformances is something that can be done after checking of all explicit function bodies (statements/expressions) in a module.
Other checking rules can \emph{assume} that a type conforms to an interface if it is declared to, knowing that the error will be caught later if it doesn’t.</p>
    <p>The important case where conformances can’t be checked late is if we support inference (not just synthesis) of declarations to satisfy requirements.
Basically, if we want to support inference of <code>associatedtype</code>s, then only way to infer that type is by looking for the declarations that satisfy other requirements.</p>
    <p>(Conveniently, checking of requirements also doesn’t require looking at function bodies: only signatures)</p>
    <p>This chapter is probably also the right place to define the rules for canonicalization of interface conjunctions.</p>
     <a class="issue-return" href="#issue-e713f78f" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     This chapter needs to define the key semantic-checking operations that relate to generics, including: 
    <ul>
     <li data-md>
      <p>Inference of \emph{implied constraints} on a generic declaration, based on the signature of that declaration.</p>
     <li data-md>
      <p>Validation and canonicalization of constraints on generic declarations.</p>
     <li data-md>
      <p>Validation of explicit specialization of a generic (e.g., <code>G&lt;A,B></code>), which includes validating that the constraints on the generic are satisfied by the parameters.</p>
     <li data-md>
      <p>Inference of generic arguments in contexts where a generic function is called on value arguments (without first specializing it).</p>
    </ul>
     <a class="issue-return" href="#issue-78397113" title="Jump to section">↵</a>
   </div>
   <div class="issue">
    <p>This chapter needs to document the rules for how names are looked up in two cases:</p>
    <ul>
     <li data-md>
      <p>Looking up a standalone Identifier as an expression or type expression, we need to look up in the current context.</p>
     <li data-md>
      <p>When looking up a name in some type, whether explicitly as part of a MemberExpression}, or implicitly as part of lookup through <code>this</code> inside a type body.</p>
    </ul>
    <p>The first kind of lookup is easily expressed as a recursion over the structure of contexts, but will often bottleneck through lookup in the context of some type (since code is so often nested under a type).
This kind of lookup also needs to deal with <code>import</code> declarations and the visibility rules for <a data-link-type="dfn" href="#source-unit">source units</a> in the same module as one another.</p>
    <p>The second kind of lookup requires access to a linearization of the type.
It potentially needs to deal with performing substitutions on the type/signature of a declaration that is found, so that it is adjusted for the \code{This} type it has been looked up through.</p>
    <p>Both kinds of lookup need to deal with the possibility that a name will be \emph{overloaded}.
At this level, lookup should probably return the full set of all \emph{candidates} when overloading occurs, but retain enough structure in the lookup results that overload resolution can evaluate which should be prioritized over the others, based (e.g., picking members from a more-derived type over those from a base type).</p>
    <p>The lookup rules here should be able to handle lookup of <code>init</code>, and <code>subscript</code> declaration via a synthesized name that cannot conflict with other identifiers (in case, e.g., a user has a struct with an ordinary field named \texttt{subscript}).</p>
    <p>Lookup will also need to interact with visibility, by stripping out non-<code>public</code> bindings from <code>import</code>ed modules.</p>
    <p>Note that this chapter does not need to deal with <code>extension</code> declarations, as they are handled as part of type linearization.</p>
    <p>One important kind of subtlety to lookup is that upon finding a \emph{first} in-scope declaration of a name, we can inspect the category of that declaration to determine if overloading is even possible.
That is, if the first declaration found is in a category of declaration that doesn’t support overloading (basically anything other than a <code>func</code>, <code>init</code>, or <code>subscript</code>), then that result can be used as-is as the result of lookup.</p>
     <a class="issue-return" href="#issue-c90c48cc" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     This chapter needs to describe how to disambiguate an overloaded lookup result.
Overload resolution comes up primarily in two places: 
    <ul>
     <li data-md>
      <p>When the typing rules attempt to coerce an overloaded expression to some type.</p>
     <li data-md>
      <p>When attempting to call an overloaded expression as a function.</p>
    </ul>
    <p>(Hypothetically it can also arise for a generic specialization <code>F&lt;A,B,...></code> as well, so the rules need to be ready for that case)</p>
    <p>The first of the two cases is the easier one by far, with an outline of it’s semantics being:</p>
    <ul>
     <li data-md>
      <p>\emph{Filter} the candidates to only those that can be coerced successfully to the desired type.</p>
     <li data-md>
      <p>Select the best candidate among the remaining ones, based on priority.</p>
     <li data-md>
      <p>The relative "distance" of declarations needs to factor in (more derived vs. more base, imported vs. local, etc.)</p>
     <li data-md>
      <p>Additionally, the relative cost of the type conversions applied (if any) may be relevant.</p>
    </ul>
    <p>The second case (overloaded calls) is superficially similar, in that we can filter the candidates to the applicable ones and then pick the best.
The definition of <code>best'' for an overloaded call is more subtle and needs care to not mess up developer expectations for things like simple infix expressions (since event infix \code{operator+} is handled as an overloaded call, semantically).  A few basic principles that guide intuition:   * For every candidate we should know the conversion/cost associated with each argument position, as well as the conversion/cost associated with the function result position (if we are in a checking rather than synthesis context). * One overload candidate is strictly better than another if it is better at at least one position (one argument, or the function result), and not worse at any position. * When choosing between candidates that are equally good, a few factors play in:   *  The relative "distance" of declarations (as determined by lookup)   *  Which candidates required defaulting of arguments (and how many)   *  Candidates that required implicit specialization of a generic vs. those that didn’t   *  For two candidates that required implicit specialization of a generic, which of them is </code>more general'' than the other.</p>
    <p>Generally, a function $f$ is ``more general'' than another function $g$ if for every set of arguments that $g$ is applicable to, $f$ is also applicable, but not vice versa.</p>
    <p>Also: it doesn’t exactly belong in this chapter, but something needs to document the rules for when two function declarations are considered to have the same signature (or at least conflicting signatures), so that errors can be diagnosed when trying to redefine a function.</p>
     <a class="issue-return" href="#issue-0f700136" title="Jump to section">↵</a>
   </div>
   <div class="issue">
    <p>This chapter needs to define what the subtyping rules are, as something distinct from the conversion/coercion rules (which need their own chapter).</p>
    <p>At the most basic, we want to have a guarantee that if \code{T} is a subtype of \code{S}, then it is safe and meaningful to read an \code{S} from a memory location that holds a \code{T}.
Beyond that, we need to decide whether it a subtype (in the formal semantics) must have the same size and stride as the supertype, or it if is allowed to be larger.</p>
    <p>The key reason to have the subtyping rules kept distinct from the conversion/coercion rules is that many built-in types (as well as the conceptual/intermediate types that are needed for semantic checking) are covariant type constructors, where the covariance must be defined in terms of true subtyping and not just convertability. E.g., a <code>borrow</code> T} can be converted to a <code>borrow</code> S} only if \code{T} is truly a subtype of \code{S}, and not just convertible to it.</p>
    <p>Note that the <code>is-a-subtype-of'' relationship between two types is distinct from the </code>conforms-to'' relationship between a proper type and an interface type.
The ``conforms-to'' relationship might need to be documented in this chapter as well, just because it shares a lot of structurally similar machinery.</p>
    <p>(In fact, it may be best to have a judgement that is parameterized over the type relationship that is being checked: conformance, subtyping, implicit coercion, explicit conversion.)</p>
     <a class="issue-return" href="#issue-63a40c8b" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     Broadly this chapter needs to do two things: 
    <ul>
     <li data-md>
      <p>Define the semantic rules for implicit type coercion and explicit type conversion.</p>
     <li data-md>
      <p>Specify the implicit coercions that are defined for the basic Slang types, and their costs.</p>
    </ul>
    <p>The latter part (the builtin implicit coercions and their costs) can be a simple table, once the rules are properly defined.</p>
    <p>From a big-picture perspective, the implicit type coercion rules when coercing something of type <code>From</code> to type <code>To</code> are something like:</p>
    <ul>
     <li data-md>
      <p>If <code>From</code> and <code>To</code> are identical types, then coercion succeeds, with no cost.</p>
     <li data-md>
      <p>If <code>From</code> is a subtype of <code>To</code>, then coercion succeeds, with a cost that relates to how "far" apart the types are in an inheritance hierarchy.</p>
     <li data-md>
      <p>If neither of the above applies, look up <code>init</code> declarations on type <code>To</code>, filtered to those that are marked as suitable for implicit coercion, and then perfom overload resolution to pick the best overload. The cost is the cost that was marked on the chosen <code>init</code> declaration.</p>
    </ul>
    <p>The overload resolution rules rely on checking implicit type coercions, and the implicit type coercion rules can end up checking an overloaded <code>init</code> call.
The specification must explain how to avoid the apparant possibility of infinite recursion.
The simplest way to avoid such problems is to specif that the overload resolution for the <code>init</code> call above uses a modified form where only subtyping, and not implicit coercion, is allowed for arguments.</p>
    <p>Explicit type conversion follows the same overall flow as the implicit case, except it does not filter the candidates down to only those marked as usable for implicit coercion.</p>
     <a class="issue-return" href="#issue-f629939f" title="Jump to section">↵</a>
   </div>
   <div class="issue">
     This chapter needs to specify: 
    <ul>
     <li data-md>
      <p>The built-in types and attributes related to automatic differentiation.</p>
     <li data-md>
      <p>The rules applied when checking the body of a <code>[Differentiable]</code> function.</p>
     <li data-md>
      <p>The semantics of the <code>fwd_diff</code> and <code>bwd_diff</code> operators, including how to determine the signature of the function they return.</p>
     <li data-md>
      <p>The requirements of the <code>IDifferentiable</code> interface, and also the rules used to automatically synthesize conformance for it.</p>
    </ul>
     <a class="issue-return" href="#issue-a7a8dc86" title="Jump to section">↵</a>
   </div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"abstract-storage-access": {"dfnID":"abstract-storage-access","dfnText":"abstract storage access","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-storage-access"}],"title":"9.3. Abstract Storage Access"},{"refs":[{"id":"ref-for-abstract-storage-access\u2460"},{"id":"ref-for-abstract-storage-access\u2461"},{"id":"ref-for-abstract-storage-access\u2462"},{"id":"ref-for-abstract-storage-access\u2463"}],"title":"9.6.1. Conflicts"}],"url":"#abstract-storage-access"},
"abstract-storage-access-mode": {"dfnID":"abstract-storage-access-mode","dfnText":"abstract storage access mode","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-storage-access-mode"}],"title":"9.3. Abstract Storage Access"},{"refs":[{"id":"ref-for-abstract-storage-access-mode\u2460"}],"title":"9.5. Abstract Storage References"}],"url":"#abstract-storage-access-mode"},
"abstract-storage-location": {"dfnID":"abstract-storage-location","dfnText":"abstract storage location","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-storage-location"},{"id":"ref-for-abstract-storage-location\u2460"}],"title":"9.2. Abstract Storage Locations"},{"refs":[{"id":"ref-for-abstract-storage-location\u2461"}],"title":"9.3. Abstract Storage Access"},{"refs":[{"id":"ref-for-abstract-storage-location\u2462"}],"title":"9.6. Containment"},{"refs":[{"id":"ref-for-abstract-storage-location\u2463"},{"id":"ref-for-abstract-storage-location\u2464"}],"title":"9.6.1. Conflicts"},{"refs":[{"id":"ref-for-abstract-storage-location\u2465"}],"title":"15.6. Variables"}],"url":"#abstract-storage-location"},
"abstract-storage-reference-type": {"dfnID":"abstract-storage-reference-type","dfnText":"abstract storage reference type","external":false,"refSections":[{"refs":[{"id":"ref-for-abstract-storage-reference-type"}],"title":"9.2. Abstract Storage Locations"},{"refs":[{"id":"ref-for-abstract-storage-reference-type\u2460"},{"id":"ref-for-abstract-storage-reference-type\u2461"},{"id":"ref-for-abstract-storage-reference-type\u2462"},{"id":"ref-for-abstract-storage-reference-type\u2463"},{"id":"ref-for-abstract-storage-reference-type\u2464"}],"title":"9.5.1. Type Conversion"}],"url":"#abstract-storage-reference-type"},
"activation-record": {"dfnID":"activation-record","dfnText":"activation record","external":false,"refSections":[{"refs":[{"id":"ref-for-activation-record"}],"title":"11.1. Strands"},{"refs":[{"id":"ref-for-activation-record\u2460"}],"title":"11.2. Activation Records"}],"url":"#activation-record"},
"address-space": {"dfnID":"address-space","dfnText":"address space","external":false,"refSections":[{"refs":[{"id":"ref-for-address-space"}],"title":"7.2. Memory Accesses"},{"refs":[{"id":"ref-for-address-space\u2460"}],"title":"9.1. Concrete Storage Locations"}],"url":"#address-space"},
"aggregate-type-declaration": {"dfnID":"aggregate-type-declaration","dfnText":"aggregate type declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-aggregate-type-declaration"}],"title":"15.4.1. Aggregate Types"}],"url":"#aggregate-type-declaration"},
"alternatives": {"dfnID":"alternatives","dfnText":"alternatives","external":false,"refSections":[{"refs":[{"id":"ref-for-alternatives"}],"title":"16.5.2. Switch Statement"}],"url":"#alternatives"},
"any-type": {"dfnID":"any-type","dfnText":"any type","external":false,"refSections":[{"refs":[{"id":"ref-for-any-type"}],"title":"5.17. any Types"}],"url":"#any-type"},
"architectures": {"dfnID":"architectures","dfnText":"architectures","external":false,"refSections":[{"refs":[{"id":"ref-for-architectures"},{"id":"ref-for-architectures\u2460"}],"title":"11.1. Strands"}],"url":"#architectures"},
"arguments": {"dfnID":"arguments","dfnText":"arguments","external":false,"refSections":[{"refs":[{"id":"ref-for-arguments"}],"title":"5.18. Functions"},{"refs":[{"id":"ref-for-arguments\u2460"},{"id":"ref-for-arguments\u2461"}],"title":"5.19. Generics"}],"url":"#arguments"},
"array": {"dfnID":"array","dfnText":"array","external":false,"refSections":[{"refs":[{"id":"ref-for-array"}],"title":"5.5. Array Types"}],"url":"#array"},
"array-type": {"dfnID":"array-type","dfnText":"array type","external":false,"refSections":[{"refs":[{"id":"ref-for-array-type"}],"title":"5.5. Array Types"}],"url":"#array-type"},
"associated-record-types": {"dfnID":"associated-record-types","dfnText":"associated record types","external":false,"refSections":[{"refs":[{"id":"ref-for-associated-record-types"},{"id":"ref-for-associated-record-types\u2460"},{"id":"ref-for-associated-record-types\u2461"},{"id":"ref-for-associated-record-types\u2462"},{"id":"ref-for-associated-record-types\u2463"}],"title":"12.1.3. Records"}],"url":"#associated-record-types"},
"associated-type": {"dfnID":"associated-type","dfnText":"associated type","external":false,"refSections":[{"refs":[{"id":"ref-for-associated-type"}],"title":"5.15. Associated Types"}],"url":"#associated-type"},
"associated-type-declaration": {"dfnID":"associated-type-declaration","dfnText":"associated type declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-associated-type-declaration"}],"title":"15.4.5. Associated Types"}],"url":"#associated-type-declaration"},
"balanced": {"dfnID":"balanced","dfnText":"balanced","external":false,"refSections":[{"refs":[{"id":"ref-for-balanced"}],"title":"4.2.2. Unordered"}],"url":"#balanced"},
"balanced-tokens": {"dfnID":"balanced-tokens","dfnText":"Balanced tokens","external":false,"refSections":[{"refs":[{"id":"ref-for-balanced-tokens"}],"title":"4.2.2. Unordered"}],"url":"#balanced-tokens"},
"bases": {"dfnID":"bases","dfnText":"bases","external":false,"refSections":[{"refs":[{"id":"ref-for-bases"}],"title":"15.4.2. Bases"}],"url":"#bases"},
"binary": {"dfnID":"binary","dfnText":"binary","external":false,"refSections":[{"refs":[{"id":"ref-for-binary"}],"title":"10.2. Linking"},{"refs":[{"id":"ref-for-binary\u2460"},{"id":"ref-for-binary\u2461"}],"title":"10.3. Loading"}],"url":"#binary"},
"binary-literal": {"dfnID":"binary-literal","dfnText":"binary literal","external":false,"refSections":[{"refs":[{"id":"ref-for-binary-literal"}],"title":"2.4.2.2.1. Numeric Literals"}],"url":"#binary-literal"},
"binding": {"dfnID":"binding","dfnText":"binding","external":false,"refSections":[{"refs":[{"id":"ref-for-binding"}],"title":"6.1. Contexts"}],"url":"#binding"},
"bindings": {"dfnID":"bindings","dfnText":"bindings","external":false,"refSections":[{"refs":[{"id":"ref-for-bindings"}],"title":"6.1. Contexts"}],"url":"#bindings"},
"binds": {"dfnID":"binds","dfnText":"binds","external":false,"refSections":[{"refs":[{"id":"ref-for-binds"}],"title":"15.6. Variables"}],"url":"#binds"},
"block": {"dfnID":"block","dfnText":"block","external":false,"refSections":[{"refs":[{"id":"ref-for-block"}],"title":"12.1.3.1. Compute"}],"url":"#block"},
"block-comment": {"dfnID":"block-comment","dfnText":"block comment","external":false,"refSections":[{"refs":[{"id":"ref-for-block-comment"},{"id":"ref-for-block-comment\u2460"},{"id":"ref-for-block-comment\u2461"},{"id":"ref-for-block-comment\u2462"},{"id":"ref-for-block-comment\u2463"}],"title":"2.4.1.2. Comments"}],"url":"#block-comment"},
"block-shape": {"dfnID":"block-shape","dfnText":"block shape","external":false,"refSections":[{"refs":[{"id":"ref-for-block-shape"}],"title":"12.1.3.1. Compute"}],"url":"#block-shape"},
"block-statement": {"dfnID":"block-statement","dfnText":"block statement","external":false,"refSections":[{"refs":[{"id":"ref-for-block-statement"},{"id":"ref-for-block-statement\u2460"}],"title":"1.4.5. Patterns"},{"refs":[{"id":"ref-for-block-statement\u2461"}],"title":"16.3. Block Statement"}],"url":"#block-statement"},
"body": {"dfnID":"body","dfnText":"body","external":false,"refSections":[{"refs":[{"id":"ref-for-body"}],"title":"11.2. Activation Records"},{"refs":[{"id":"ref-for-body\u2460"}],"title":"15.7.2. Body"}],"url":"#body"},
"break-statement": {"dfnID":"break-statement","dfnText":"break statement","external":false,"refSections":[{"refs":[{"id":"ref-for-break-statement"},{"id":"ref-for-break-statement\u2460"},{"id":"ref-for-break-statement\u2461"}],"title":"16.7.1. break Statement"}],"url":"#break-statement"},
"breaks-out-of": {"dfnID":"breaks-out-of","dfnText":"breaks out of","external":false,"refSections":[{"refs":[{"id":"ref-for-breaks-out-of"}],"title":"11.4.1. Tangle"}],"url":"#breaks-out-of"},
"bundle": {"dfnID":"bundle","dfnText":"bundle","external":false,"refSections":[{"refs":[{"id":"ref-for-bundle"}],"title":"10.5. Bundling"},{"refs":[{"id":"ref-for-bundle\u2460"},{"id":"ref-for-bundle\u2461"}],"title":"12.1.1. Pipeline Instance"}],"url":"#bundle"},
"callouts": {"dfnID":"callouts","dfnText":"callouts","external":false,"refSections":[{"refs":[{"id":"ref-for-callouts"}],"title":"1.4.7. Callouts"}],"url":"#callouts"},
"case-declarations": {"dfnID":"case-declarations","dfnText":"case declarations","external":false,"refSections":[{"refs":[{"id":"ref-for-case-declarations"}],"title":"15.4.3.1. Cases"}],"url":"#case-declarations"},
"cast-expression": {"dfnID":"cast-expression","dfnText":"cast expression","external":false,"refSections":[{"refs":[{"id":"ref-for-cast-expression"}],"title":"17.9. Cast Expression"}],"url":"#cast-expression"},
"chain-production": {"dfnID":"chain-production","dfnText":"chain production","external":false,"refSections":[{"refs":[{"id":"ref-for-chain-production"}],"title":"1.5. Context-Free Grammars"}],"url":"#chain-production"},
"character": {"dfnID":"character","dfnText":"character","external":false,"refSections":[{"refs":[{"id":"ref-for-character"}],"title":"2.1. Source Units"},{"refs":[{"id":"ref-for-character\u2460"}],"title":"2.3. Phases"},{"refs":[{"id":"ref-for-character\u2461"}],"title":"2.4.1.1.1. Line Breaks"},{"refs":[{"id":"ref-for-character\u2462"}],"title":"2.4.1.2. Comments"}],"url":"#character"},
"character-literal": {"dfnID":"character-literal","dfnText":"character literal","external":false,"refSections":[{"refs":[{"id":"ref-for-character-literal"}],"title":"2.4.3.2. Character Literals"}],"url":"#character-literal"},
"characteristic": {"dfnID":"characteristic","dfnText":"characteristic","external":false,"refSections":[],"url":"#characteristic"},
"checking-judgement": {"dfnID":"checking-judgement","dfnText":"checking judgement","external":false,"refSections":[{"refs":[{"id":"ref-for-checking-judgement"}],"title":"6.3. Statements"},{"refs":[{"id":"ref-for-checking-judgement\u2460"}],"title":"6.4. Declarations"}],"url":"#checking-judgement"},
"checks": {"dfnID":"checks","dfnText":"checks","external":false,"refSections":[{"refs":[{"id":"ref-for-checks"}],"title":"6.4. Declarations"}],"url":"#checks"},
"checks-against": {"dfnID":"checks-against","dfnText":"checks against","external":false,"refSections":[{"refs":[{"id":"ref-for-checks-against"}],"title":"16.5.2. Switch Statement"}],"url":"#checks-against"},
"class-type": {"dfnID":"class-type","dfnText":"class type","external":false,"refSections":[{"refs":[{"id":"ref-for-class-type"},{"id":"ref-for-class-type\u2460"}],"title":"5.12. class Types"}],"url":"#class-type"},
"collective": {"dfnID":"collective","dfnText":"collective","external":false,"refSections":[{"refs":[{"id":"ref-for-collective"}],"title":"11.4. Uniformity"}],"url":"#collective"},
"column-count": {"dfnID":"column-count","dfnText":"column count","external":false,"refSections":[{"refs":[{"id":"ref-for-column-count"}],"title":"5.7. Matrices"}],"url":"#column-count"},
"column-type": {"dfnID":"column-type","dfnText":"column type","external":false,"refSections":[],"url":"#column-type"},
"commands": {"dfnID":"commands","dfnText":"commands","external":false,"refSections":[{"refs":[{"id":"ref-for-commands"}],"title":"12.1. Dispatches"}],"url":"#commands"},
"comment": {"dfnID":"comment","dfnText":"comment","external":false,"refSections":[{"refs":[{"id":"ref-for-comment"}],"title":"2.4.1. Trivia"}],"url":"#comment"},
"compiler": {"dfnID":"compiler","dfnText":"compiler","external":false,"refSections":[{"refs":[{"id":"ref-for-compiler"},{"id":"ref-for-compiler\u2460"}],"title":"10.1. Compilation"}],"url":"#compiler"},
"compute-dispatch": {"dfnID":"compute-dispatch","dfnText":"compute dispatch","external":false,"refSections":[{"refs":[{"id":"ref-for-compute-dispatch"}],"title":"12.1.3.1. Compute"}],"url":"#compute-dispatch"},
"compute-pipeline": {"dfnID":"compute-pipeline","dfnText":"compute pipeline","external":false,"refSections":[{"refs":[{"id":"ref-for-compute-pipeline"}],"title":"12.1.1.1. Pipeline Types"},{"refs":[{"id":"ref-for-compute-pipeline\u2460"}],"title":"12.1.3.1. Compute"}],"url":"#compute-pipeline"},
"concrete-storage-location": {"dfnID":"concrete-storage-location","dfnText":"concrete storage location","external":false,"refSections":[{"refs":[{"id":"ref-for-concrete-storage-location"}],"title":"9.2. Abstract Storage Locations"}],"url":"#concrete-storage-location"},
"constructor-declaration": {"dfnID":"constructor-declaration","dfnText":"constructor declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-constructor-declaration"}],"title":"15.8. Constructors"}],"url":"#constructor-declaration"},
"context": {"dfnID":"context","dfnText":"context","external":false,"refSections":[{"refs":[{"id":"ref-for-context"}],"title":"4.1. Contexts"},{"refs":[{"id":"ref-for-context\u2460"}],"title":"6.2.2. Checking"},{"refs":[{"id":"ref-for-context\u2461"}],"title":"6.3. Statements"},{"refs":[{"id":"ref-for-context\u2462"}],"title":"6.4. Declarations"}],"url":"#context"},
"context-entries": {"dfnID":"context-entries","dfnText":"context entries","external":false,"refSections":[{"refs":[{"id":"ref-for-context-entries"}],"title":"6.1. Contexts"}],"url":"#context-entries"},
"context-free-grammar": {"dfnID":"context-free-grammar","dfnText":"context-free grammar","external":false,"refSections":[{"refs":[{"id":"ref-for-context-free-grammar"},{"id":"ref-for-context-free-grammar\u2460"}],"title":"1.5. Context-Free Grammars"},{"refs":[{"id":"ref-for-context-free-grammar\u2461"}],"title":"1.5.1. Notation"}],"url":"#context-free-grammar"},
"control-flow-region": {"dfnID":"control-flow-region","dfnText":"control-flow region","external":false,"refSections":[{"refs":[{"id":"ref-for-control-flow-region"}],"title":"11.4.1. Tangle"}],"url":"#control-flow-region"},
"decimal-literal": {"dfnID":"decimal-literal","dfnText":"decimal literal","external":false,"refSections":[{"refs":[{"id":"ref-for-decimal-literal"}],"title":"2.4.2.2.1. Numeric Literals"}],"url":"#decimal-literal"},
"declaration": {"dfnID":"declaration","dfnText":"declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-declaration"}],"title":"4.2.1. Ordered"},{"refs":[{"id":"ref-for-declaration\u2460"}],"title":"4.2.2. Unordered"},{"refs":[{"id":"ref-for-declaration\u2461"}],"title":"5.9. Declaration References"},{"refs":[{"id":"ref-for-declaration\u2462"}],"title":"5.9.1. Direct Declaration References"},{"refs":[{"id":"ref-for-declaration\u2463"}],"title":"5.9.2. Member Declaration Reference"},{"refs":[{"id":"ref-for-declaration\u2464"}],"title":"6.4. Declarations"}],"url":"#declaration"},
"declaration-bodies": {"dfnID":"declaration-bodies","dfnText":"declaration bodies","external":false,"refSections":[{"refs":[{"id":"ref-for-declaration-bodies"}],"title":"4.2.1. Ordered"}],"url":"#declaration-bodies"},
"declaration-reference": {"dfnID":"declaration-reference","dfnText":"declaration reference","external":false,"refSections":[{"refs":[{"id":"ref-for-declaration-reference"}],"title":"5.9.2. Member Declaration Reference"},{"refs":[{"id":"ref-for-declaration-reference\u2460"},{"id":"ref-for-declaration-reference\u2461"},{"id":"ref-for-declaration-reference\u2462"}],"title":"5.9.4. Fully-Specialized Declaration References"}],"url":"#declaration-reference"},
"declaration-statement": {"dfnID":"declaration-statement","dfnText":"declaration statement","external":false,"refSections":[{"refs":[{"id":"ref-for-declaration-statement"}],"title":"16.2. Declaration Statement"}],"url":"#declaration-statement"},
"dependent-function-type": {"dfnID":"dependent-function-type","dfnText":"dependent function type","external":false,"refSections":[],"url":"#dependent-function-type"},
"devices": {"dfnID":"devices","dfnText":"devices","external":false,"refSections":[{"refs":[{"id":"ref-for-devices"},{"id":"ref-for-devices\u2460"}],"title":"11. Execution"}],"url":"#devices"},
"digits": {"dfnID":"digits","dfnText":"digits","external":false,"refSections":[{"refs":[{"id":"ref-for-digits"},{"id":"ref-for-digits\u2460"},{"id":"ref-for-digits\u2461"}],"title":"2.4.2.2.1. Numeric Literals"}],"url":"#digits"},
"direct-declaration-reference": {"dfnID":"direct-declaration-reference","dfnText":"direct declaration reference","external":false,"refSections":[],"url":"#direct-declaration-reference"},
"direct-members": {"dfnID":"direct-members","dfnText":"direct members","external":false,"refSections":[{"refs":[{"id":"ref-for-direct-members"}],"title":"15.4.1. Aggregate Types"}],"url":"#direct-members"},
"direction": {"dfnID":"direction","dfnText":"direction","external":false,"refSections":[{"refs":[{"id":"ref-for-direction"}],"title":"15.1.3.1. Directions"}],"url":"#direction"},
"dispatch": {"dfnID":"dispatch","dfnText":"dispatch","external":false,"refSections":[{"refs":[{"id":"ref-for-dispatch"},{"id":"ref-for-dispatch\u2460"}],"title":"11.3. Waves"},{"refs":[{"id":"ref-for-dispatch\u2461"}],"title":"12.1.3.1. Compute"}],"url":"#dispatch"},
"dispatch-parameters": {"dfnID":"dispatch-parameters","dfnText":"dispatch parameters","external":false,"refSections":[{"refs":[{"id":"ref-for-dispatch-parameters"}],"title":"12.1. Dispatches"}],"url":"#dispatch-parameters"},
"duck": {"dfnID":"duck","dfnText":"duck","external":false,"refSections":[{"refs":[{"id":"ref-for-duck"},{"id":"ref-for-duck\u2460"}],"title":"1.4.2. Typographical Conventions"}],"url":"#duck"},
"dynamic-library": {"dfnID":"dynamic-library","dfnText":"dynamic library","external":false,"refSections":[{"refs":[{"id":"ref-for-dynamic-library"}],"title":"10.2. Linking"}],"url":"#dynamic-library"},
"effects": {"dfnID":"effects","dfnText":"effects","external":false,"refSections":[{"refs":[{"id":"ref-for-effects"}],"title":"5.18. Functions"}],"url":"#effects"},
"element-count": {"dfnID":"element-count","dfnText":"element count","external":false,"refSections":[{"refs":[{"id":"ref-for-element-count"}],"title":"5.5. Array Types"},{"refs":[{"id":"ref-for-element-count\u2460"}],"title":"5.6. Vectors"},{"refs":[{"id":"ref-for-element-count\u2461"},{"id":"ref-for-element-count\u2462"}],"title":"5.7. Matrices"}],"url":"#element-count"},
"element-type": {"dfnID":"element-type","dfnText":"element type","external":false,"refSections":[{"refs":[{"id":"ref-for-element-type"}],"title":"5.4. Finite Sequences"},{"refs":[{"id":"ref-for-element-type\u2460"}],"title":"5.6. Vectors"},{"refs":[{"id":"ref-for-element-type\u2461"},{"id":"ref-for-element-type\u2462"},{"id":"ref-for-element-type\u2463"},{"id":"ref-for-element-type\u2464"}],"title":"5.7. Matrices"}],"url":"#element-type"},
"empty-environment": {"dfnID":"empty-environment","dfnText":"empty environment","external":false,"refSections":[{"refs":[{"id":"ref-for-empty-environment"}],"title":"15. Declarations"}],"url":"#empty-environment"},
"entry-point-declaration": {"dfnID":"entry-point-declaration","dfnText":"entry point declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-point-declaration"}],"title":"15.7.4. Entry Points"}],"url":"#entry-point-declaration"},
"enum-declaration": {"dfnID":"enum-declaration","dfnText":"enum declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-enum-declaration"},{"id":"ref-for-enum-declaration\u2460"},{"id":"ref-for-enum-declaration\u2461"},{"id":"ref-for-enum-declaration\u2462"},{"id":"ref-for-enum-declaration\u2463"},{"id":"ref-for-enum-declaration\u2464"}],"title":"15.4.3. enum Declarations"},{"refs":[{"id":"ref-for-enum-declaration\u2465"},{"id":"ref-for-enum-declaration\u2466"},{"id":"ref-for-enum-declaration\u2467"}],"title":"15.4.3.1. Cases"}],"url":"#enum-declaration"},
"enum-type": {"dfnID":"enum-type","dfnText":"enum type","external":false,"refSections":[{"refs":[{"id":"ref-for-enum-type"}],"title":"5.13. enum Types"}],"url":"#enum-type"},
"environment": {"dfnID":"environment","dfnText":"environment","external":false,"refSections":[{"refs":[{"id":"ref-for-environment"}],"title":"15. Declarations"}],"url":"#environment"},
"escaped-line-break": {"dfnID":"escaped-line-break","dfnText":"escaped line break","external":false,"refSections":[{"refs":[{"id":"ref-for-escaped-line-break"},{"id":"ref-for-escaped-line-break\u2460"}],"title":"2.3. Phases"}],"url":"#escaped-line-break"},
"evaluated": {"dfnID":"evaluated","dfnText":"evaluated","external":false,"refSections":[{"refs":[{"id":"ref-for-evaluated"}],"title":"15.6.2.2. Static Global Variables"}],"url":"#evaluated"},
"executable": {"dfnID":"executable","dfnText":"executable","external":false,"refSections":[{"refs":[{"id":"ref-for-executable"}],"title":"10.2. Linking"}],"url":"#executable"},
"existential-value": {"dfnID":"existential-value","dfnText":"existential value","external":false,"refSections":[],"url":"#existential-value"},
"exponent": {"dfnID":"exponent","dfnText":"exponent","external":false,"refSections":[{"refs":[{"id":"ref-for-exponent"}],"title":"2.4.2.4. Floating-Point Literals"}],"url":"#exponent"},
"expression-statement": {"dfnID":"expression-statement","dfnText":"expression statement","external":false,"refSections":[{"refs":[{"id":"ref-for-expression-statement"}],"title":"16.1. Expression Statement"}],"url":"#expression-statement"},
"expressions": {"dfnID":"expressions","dfnText":"Expressions","external":false,"refSections":[{"refs":[{"id":"ref-for-expressions"}],"title":"1.4.4. Meta-Variables"},{"refs":[{"id":"ref-for-expressions\u2460"},{"id":"ref-for-expressions\u2461"},{"id":"ref-for-expressions\u2462"}],"title":"4.2.1. Ordered"},{"refs":[{"id":"ref-for-expressions\u2463"},{"id":"ref-for-expressions\u2464"}],"title":"6.2.1. Resolving"},{"refs":[{"id":"ref-for-expressions\u2465"},{"id":"ref-for-expressions\u2466"}],"title":"6.2.2. Checking"}],"url":"#expressions"},
"fields": {"dfnID":"fields","dfnText":"fields","external":false,"refSections":[{"refs":[{"id":"ref-for-fields"}],"title":"9.6. Containment"}],"url":"#fields"},
"fixed-function": {"dfnID":"fixed-function","dfnText":"fixed-function","external":false,"refSections":[{"refs":[{"id":"ref-for-fixed-function"}],"title":"12.1.3.2.2. Vertex Fetch"},{"refs":[{"id":"ref-for-fixed-function\u2460"}],"title":"12.1.3.2.8. Rasterizer"}],"url":"#fixed-function"},
"fixed-function-parameters": {"dfnID":"fixed-function-parameters","dfnText":"fixed-function parameters","external":false,"refSections":[{"refs":[{"id":"ref-for-fixed-function-parameters"}],"title":"12.1.2. Stage Instances"}],"url":"#fixed-function-parameters"},
"floating-point-literal": {"dfnID":"floating-point-literal","dfnText":"floating-point literal","external":false,"refSections":[{"refs":[{"id":"ref-for-floating-point-literal"}],"title":"2.4.2.2.1. Numeric Literals"}],"url":"#floating-point-literal"},
"floating-point-types": {"dfnID":"floating-point-types","dfnText":"floating-point types","external":false,"refSections":[{"refs":[{"id":"ref-for-floating-point-types"},{"id":"ref-for-floating-point-types\u2460"}],"title":"5.3.3.2. Floating-Point Numbers"}],"url":"#floating-point-types"},
"fragile": {"dfnID":"fragile","dfnText":"fragile","external":false,"refSections":[{"refs":[{"id":"ref-for-fragile"}],"title":"10.1. Compilation"},{"refs":[{"id":"ref-for-fragile\u2460"},{"id":"ref-for-fragile\u2461"}],"title":"10.2. Linking"}],"url":"#fragile"},
"fully-specialized": {"dfnID":"fully-specialized","dfnText":"fully specialized","external":false,"refSections":[{"refs":[{"id":"ref-for-fully-specialized"}],"title":"5.9.4. Fully-Specialized Declaration References"}],"url":"#fully-specialized"},
"function": {"dfnID":"function","dfnText":"function","external":false,"refSections":[{"refs":[{"id":"ref-for-function"}],"title":"5.18. Functions"}],"url":"#function"},
"function-declaration": {"dfnID":"function-declaration","dfnText":"function declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-function-declaration"}],"title":"15.4.1.3. Methods"}],"url":"#function-declaration"},
"function-definition": {"dfnID":"function-definition","dfnText":"function definition","external":false,"refSections":[{"refs":[{"id":"ref-for-function-definition"}],"title":"15.7.2. Body"}],"url":"#function-definition"},
"function-scope": {"dfnID":"function-scope","dfnText":"function scope","external":false,"refSections":[{"refs":[{"id":"ref-for-function-scope"}],"title":"15.6.3.1. Function-Scope Constants"}],"url":"#function-scope"},
"function-scope-constant": {"dfnID":"function-scope-constant","dfnText":"function-scope constant","external":false,"refSections":[{"refs":[{"id":"ref-for-function-scope-constant"}],"title":"15.6.3.1. Function-Scope Constants"}],"url":"#function-scope-constant"},
"function-scope-static-variable": {"dfnID":"function-scope-static-variable","dfnText":"function-scope static variable","external":false,"refSections":[{"refs":[{"id":"ref-for-function-scope-static-variable"}],"title":"15.6.3.2. Function-Scope Static Variables"}],"url":"#function-scope-static-variable"},
"function-type": {"dfnID":"function-type","dfnText":"function type","external":false,"refSections":[],"url":"#function-type"},
"generic": {"dfnID":"generic","dfnText":"generic","external":false,"refSections":[{"refs":[{"id":"ref-for-generic"}],"title":"5.19. Generics"},{"refs":[{"id":"ref-for-generic\u2460"},{"id":"ref-for-generic\u2461"}],"title":"15.12. Generics"}],"url":"#generic"},
"generic-arguments": {"dfnID":"generic-arguments","dfnText":"generic arguments","external":false,"refSections":[{"refs":[{"id":"ref-for-generic-arguments"}],"title":"4.3.1.2. Unordered Mode"},{"refs":[{"id":"ref-for-generic-arguments\u2460"}],"title":"4.3.2. Closing Angle Brackets"}],"url":"#generic-arguments"},
"generic-parameter-list": {"dfnID":"generic-parameter-list","dfnText":"generic parameter list","external":false,"refSections":[{"refs":[{"id":"ref-for-generic-parameter-list"}],"title":"15.12.1. Generic Parameters"}],"url":"#generic-parameter-list"},
"generic-parameters": {"dfnID":"generic-parameters","dfnText":"generic parameters","external":false,"refSections":[{"refs":[{"id":"ref-for-generic-parameters"}],"title":"4.3.2. Closing Angle Brackets"},{"refs":[{"id":"ref-for-generic-parameters\u2460"}],"title":"15.12.1. Generic Parameters"}],"url":"#generic-parameters"},
"generic-type-parameter": {"dfnID":"generic-type-parameter","dfnText":"generic type parameter","external":false,"refSections":[{"refs":[{"id":"ref-for-generic-type-parameter"}],"title":"15.12.1. Generic Parameters"}],"url":"#generic-type-parameter"},
"generic-value-parameter": {"dfnID":"generic-value-parameter","dfnText":"generic value parameter","external":false,"refSections":[{"refs":[{"id":"ref-for-generic-value-parameter"}],"title":"15.12.1. Generic Parameters"}],"url":"#generic-value-parameter"},
"global-constant": {"dfnID":"global-constant","dfnText":"global constant","external":false,"refSections":[{"refs":[{"id":"ref-for-global-constant"}],"title":"15.6.2.1. Global Constants"}],"url":"#global-constant"},
"global-shader-parameter": {"dfnID":"global-shader-parameter","dfnText":"global shader parameter","external":false,"refSections":[{"refs":[{"id":"ref-for-global-shader-parameter"}],"title":"15.6.2.3. Global Shader Parameters"}],"url":"#global-shader-parameter"},
"grid": {"dfnID":"grid","dfnText":"grid","external":false,"refSections":[{"refs":[{"id":"ref-for-grid"}],"title":"12.1.3.1. Compute"}],"url":"#grid"},
"grid-shape": {"dfnID":"grid-shape","dfnText":"grid shape","external":false,"refSections":[{"refs":[{"id":"ref-for-grid-shape"}],"title":"12.1.3.1. Compute"}],"url":"#grid-shape"},
"hexadecimal-literal": {"dfnID":"hexadecimal-literal","dfnText":"hexadecimal literal","external":false,"refSections":[{"refs":[{"id":"ref-for-hexadecimal-literal"}],"title":"2.4.2.2.1. Numeric Literals"}],"url":"#hexadecimal-literal"},
"horizontal-whitespace": {"dfnID":"horizontal-whitespace","dfnText":"Horizontal whitespace","external":false,"refSections":[{"refs":[{"id":"ref-for-horizontal-whitespace"}],"title":"2.4.1.1. Whitespace"}],"url":"#horizontal-whitespace"},
"host": {"dfnID":"host","dfnText":"host","external":false,"refSections":[{"refs":[{"id":"ref-for-host"},{"id":"ref-for-host\u2460"}],"title":"10.3. Loading"},{"refs":[{"id":"ref-for-host\u2461"}],"title":"11. Execution"},{"refs":[{"id":"ref-for-host\u2462"}],"title":"15.6.2.3. Global Shader Parameters"}],"url":"#host"},
"identifier": {"dfnID":"identifier","dfnText":"identifier","external":false,"refSections":[{"refs":[{"id":"ref-for-identifier"}],"title":"4.3.1.2. Unordered Mode"},{"refs":[{"id":"ref-for-identifier\u2460"}],"title":"6.1. Contexts"}],"url":"#identifier"},
"if-statement": {"dfnID":"if-statement","dfnText":"if statement","external":false,"refSections":[{"refs":[{"id":"ref-for-if-statement"},{"id":"ref-for-if-statement\u2460"}],"title":"1.4.3. Meta-Values and Meta-Types"},{"refs":[{"id":"ref-for-if-statement\u2461"}],"title":"16.5.1. If Statement"}],"url":"#if-statement"},
"implementing-declaration": {"dfnID":"implementing-declaration","dfnText":"implementing declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-implementing-declaration"},{"id":"ref-for-implementing-declaration\u2460"},{"id":"ref-for-implementing-declaration\u2461"},{"id":"ref-for-implementing-declaration\u2462"}],"title":"14.2.2. Implementing Declarations"}],"url":"#implementing-declaration"},
"implicit-specialization": {"dfnID":"implicit-specialization","dfnText":"implicit specialization","external":false,"refSections":[{"refs":[{"id":"ref-for-implicit-specialization"}],"title":"15.12.3. Implicit Specialization"}],"url":"#implicit-specialization"},
"include-declarations": {"dfnID":"include-declarations","dfnText":"include declarations","external":false,"refSections":[{"refs":[{"id":"ref-for-include-declarations"},{"id":"ref-for-include-declarations\u2460"},{"id":"ref-for-include-declarations\u2461"}],"title":"14.2.1. Include Declarations"}],"url":"#include-declarations"},
"infix-expression": {"dfnID":"infix-expression","dfnText":"infix expression","external":false,"refSections":[{"refs":[{"id":"ref-for-infix-expression"},{"id":"ref-for-infix-expression\u2460"}],"title":"4.3.1.1. Ordered Mode"},{"refs":[{"id":"ref-for-infix-expression\u2461"},{"id":"ref-for-infix-expression\u2462"}],"title":"4.3.1.2. Unordered Mode"}],"url":"#infix-expression"},
"initial-context": {"dfnID":"initial-context","dfnText":"initial context","external":false,"refSections":[{"refs":[{"id":"ref-for-initial-context"}],"title":"4.1. Contexts"}],"url":"#initial-context"},
"input-environment": {"dfnID":"input-environment","dfnText":"input environment","external":false,"refSections":[{"refs":[{"id":"ref-for-input-environment"}],"title":"15. Declarations"}],"url":"#input-environment"},
"instance-members": {"dfnID":"instance-members","dfnText":"instance members","external":false,"refSections":[{"refs":[{"id":"ref-for-instance-members"}],"title":"15.4.1.1. Instance and Static Members"}],"url":"#instance-members"},
"instances": {"dfnID":"instances","dfnText":"instances","external":false,"refSections":[{"refs":[{"id":"ref-for-instances"}],"title":"5. Types and Values"},{"refs":[{"id":"ref-for-instances\u2460"}],"title":"5.16. Interfaces"},{"refs":[{"id":"ref-for-instances\u2461"}],"title":"5.20. Witnesses"}],"url":"#instances"},
"int64": {"dfnID":"int64","dfnText":"Int64","external":false,"refSections":[],"url":"#int64"},
"integer-literal": {"dfnID":"integer-literal","dfnText":"integer literal","external":false,"refSections":[{"refs":[{"id":"ref-for-integer-literal"}],"title":"2.4.2.2.1. Numeric Literals"}],"url":"#integer-literal"},
"integer-types": {"dfnID":"integer-types","dfnText":"integer types","external":false,"refSections":[{"refs":[{"id":"ref-for-integer-types"}],"title":"5.3.3.1. Integers"}],"url":"#integer-types"},
"interface": {"dfnID":"interface","dfnText":"interface","external":false,"refSections":[{"refs":[{"id":"ref-for-interface"},{"id":"ref-for-interface\u2460"}],"title":"5.16. Interfaces"},{"refs":[{"id":"ref-for-interface\u2461"}],"title":"5.17. any Types"},{"refs":[{"id":"ref-for-interface\u2462"}],"title":"5.20. Witnesses"}],"url":"#interface"},
"interface-declaration": {"dfnID":"interface-declaration","dfnText":"interface declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-interface-declaration"}],"title":"15.4.2. Bases"},{"refs":[{"id":"ref-for-interface-declaration\u2460"},{"id":"ref-for-interface-declaration\u2461"}],"title":"15.4.5. Associated Types"}],"url":"#interface-declaration"},
"introduces": {"dfnID":"introduces","dfnText":"introduces","external":false,"refSections":[{"refs":[{"id":"ref-for-introduces"}],"title":"15.4. Type Declarations"}],"url":"#introduces"},
"invocable": {"dfnID":"invocable","dfnText":"invocable","external":false,"refSections":[{"refs":[{"id":"ref-for-invocable"}],"title":"11.1. Strands"},{"refs":[{"id":"ref-for-invocable\u2460"},{"id":"ref-for-invocable\u2461"}],"title":"11.2. Activation Records"}],"url":"#invocable"},
"kernel": {"dfnID":"kernel","dfnText":"kernel","external":false,"refSections":[{"refs":[{"id":"ref-for-kernel"}],"title":"11.3. Waves"},{"refs":[{"id":"ref-for-kernel\u2460"}],"title":"12.1.1. Pipeline Instance"},{"refs":[{"id":"ref-for-kernel\u2461"}],"title":"12.1.2. Stage Instances"}],"url":"#kernel"},
"kind": {"dfnID":"kind","dfnText":"kind","external":false,"refSections":[{"refs":[{"id":"ref-for-kind"},{"id":"ref-for-kind\u2460"},{"id":"ref-for-kind\u2461"}],"title":"5.2. Types of Types"}],"url":"#kind"},
"l-values": {"dfnID":"l-values","dfnText":"l-values","external":false,"refSections":[{"refs":[{"id":"ref-for-l-values"}],"title":"17.7. Subscript Expression"}],"url":"#l-values"},
"label": {"dfnID":"label","dfnText":"label","external":false,"refSections":[{"refs":[{"id":"ref-for-label"},{"id":"ref-for-label\u2460"},{"id":"ref-for-label\u2461"}],"title":"16.7.1. break Statement"}],"url":"#label"},
"lane-id": {"dfnID":"lane-id","dfnText":"lane ID","external":false,"refSections":[{"refs":[{"id":"ref-for-lane-id"}],"title":"11.3. Waves"}],"url":"#lane-id"},
"launched": {"dfnID":"launched","dfnText":"launched","external":false,"refSections":[{"refs":[{"id":"ref-for-launched"}],"title":"11.3. Waves"}],"url":"#launched"},
"layout": {"dfnID":"layout","dfnText":"layout","external":false,"refSections":[{"refs":[{"id":"ref-for-layout"}],"title":"8. Layout"}],"url":"#layout"},
"left-hand-side": {"dfnID":"left-hand-side","dfnText":"left-hand side","external":false,"refSections":[{"refs":[{"id":"ref-for-left-hand-side"},{"id":"ref-for-left-hand-side\u2460"}],"title":"1.5. Context-Free Grammars"}],"url":"#left-hand-side"},
"legacy": {"dfnID":"legacy","dfnText":"legacy","external":false,"refSections":[{"refs":[{"id":"ref-for-legacy"},{"id":"ref-for-legacy\u2460"}],"title":"1.4.8. Traditional and Legacy Features"}],"url":"#legacy"},
"level": {"dfnID":"level","dfnText":"level","external":false,"refSections":[{"refs":[{"id":"ref-for-level"}],"title":"5.1. Level"},{"refs":[{"id":"ref-for-level\u2460"},{"id":"ref-for-level\u2461"},{"id":"ref-for-level\u2462"},{"id":"ref-for-level\u2463"}],"title":"5.2. Types of Types"},{"refs":[{"id":"ref-for-level\u2464"}],"title":"5.3. Scalars"},{"refs":[{"id":"ref-for-level\u2465"}],"title":"5.4. Finite Sequences"},{"refs":[{"id":"ref-for-level\u2466"},{"id":"ref-for-level\u2467"}],"title":"5.17. any Types"}],"url":"#level"},
"lex": {"dfnID":"lex","dfnText":"Lexing","external":false,"refSections":[{"refs":[{"id":"ref-for-lex"}],"title":"2.3. Phases"}],"url":"#lex"},
"lexeme": {"dfnID":"lexeme","dfnText":"lexeme","external":false,"refSections":[{"refs":[{"id":"ref-for-lexeme"}],"title":"2. Lexical Structure"},{"refs":[{"id":"ref-for-lexeme\u2460"},{"id":"ref-for-lexeme\u2461"}],"title":"2.4. Lexemes"},{"refs":[{"id":"ref-for-lexeme\u2462"},{"id":"ref-for-lexeme\u2463"}],"title":"2.4.1. Trivia"}],"url":"#lexeme"},
"line-break": {"dfnID":"line-break","dfnText":"line break","external":false,"refSections":[{"refs":[{"id":"ref-for-line-break"}],"title":"2.3. Phases"},{"refs":[{"id":"ref-for-line-break\u2460"}],"title":"2.4.1.1. Whitespace"},{"refs":[{"id":"ref-for-line-break\u2461"},{"id":"ref-for-line-break\u2462"}],"title":"2.4.1.1.1. Line Breaks"},{"refs":[{"id":"ref-for-line-break\u2463"},{"id":"ref-for-line-break\u2464"},{"id":"ref-for-line-break\u2465"}],"title":"2.4.1.2. Comments"}],"url":"#line-break"},
"line-comment": {"dfnID":"line-comment","dfnText":"line comment","external":false,"refSections":[{"refs":[{"id":"ref-for-line-comment"},{"id":"ref-for-line-comment\u2460"}],"title":"2.4.1.2. Comments"}],"url":"#line-comment"},
"lines": {"dfnID":"lines","dfnText":"lines","external":false,"refSections":[{"refs":[{"id":"ref-for-lines"}],"title":"2.4.1.1.1. Line Breaks"}],"url":"#lines"},
"linker": {"dfnID":"linker","dfnText":"linker","external":false,"refSections":[{"refs":[{"id":"ref-for-linker"}],"title":"10.2. Linking"}],"url":"#linker"},
"literal": {"dfnID":"literal","dfnText":"literal","external":false,"refSections":[{"refs":[{"id":"ref-for-literal"}],"title":"4.3.1.2. Unordered Mode"}],"url":"#literal"},
"loadable-code": {"dfnID":"loadable-code","dfnText":"loadable code","external":false,"refSections":[{"refs":[{"id":"ref-for-loadable-code"}],"title":"10.2. Linking"}],"url":"#loadable-code"},
"loading": {"dfnID":"loading","dfnText":"loading","external":false,"refSections":[{"refs":[{"id":"ref-for-loading"},{"id":"ref-for-loading\u2460"}],"title":"10.3. Loading"}],"url":"#loading"},
"local-scope": {"dfnID":"local-scope","dfnText":"local scope","external":false,"refSections":[{"refs":[{"id":"ref-for-local-scope"}],"title":"15. Declarations"}],"url":"#local-scope"},
"local-variable": {"dfnID":"local-variable","dfnText":"local variable","external":false,"refSections":[{"refs":[{"id":"ref-for-local-variable"}],"title":"15.6.3.3. Local Variables"}],"url":"#local-variable"},
"loop-statement": {"dfnID":"loop-statement","dfnText":"loop statement","external":false,"refSections":[{"refs":[{"id":"ref-for-loop-statement"},{"id":"ref-for-loop-statement\u2460"}],"title":"16.7.1. break Statement"}],"url":"#loop-statement"},
"matrix": {"dfnID":"matrix","dfnText":"matrix","external":false,"refSections":[{"refs":[{"id":"ref-for-matrix"}],"title":"5.7. Matrices"}],"url":"#matrix"},
"matrix-type": {"dfnID":"matrix-type","dfnText":"matrix type","external":false,"refSections":[],"url":"#matrix-type"},
"member-declaration-reference": {"dfnID":"member-declaration-reference","dfnText":"member declaration reference","external":false,"refSections":[{"refs":[{"id":"ref-for-member-declaration-reference"}],"title":"5.9.2. Member Declaration Reference"}],"url":"#member-declaration-reference"},
"memory-access": {"dfnID":"memory-access","dfnText":"memory access","external":false,"refSections":[{"refs":[{"id":"ref-for-memory-access"}],"title":"7.2. Memory Accesses"}],"url":"#memory-access"},
"memory-access-mode": {"dfnID":"memory-access-mode","dfnText":"memory access mode","external":false,"refSections":[{"refs":[{"id":"ref-for-memory-access-mode"}],"title":"7.2. Memory Accesses"},{"refs":[{"id":"ref-for-memory-access-mode\u2460"}],"title":"9.1.1. Reference Types"},{"refs":[{"id":"ref-for-memory-access-mode\u2461"}],"title":"9.4. Access Mode"}],"url":"#memory-access-mode"},
"memory-locations": {"dfnID":"memory-locations","dfnText":"memory locations","external":false,"refSections":[{"refs":[{"id":"ref-for-memory-locations"}],"title":"7.1. Memory Locations"},{"refs":[{"id":"ref-for-memory-locations\u2460"}],"title":"7.2. Memory Accesses"},{"refs":[{"id":"ref-for-memory-locations\u2461"}],"title":"9.1. Concrete Storage Locations"}],"url":"#memory-locations"},
"merge-point": {"dfnID":"merge-point","dfnText":"merge point","external":false,"refSections":[{"refs":[{"id":"ref-for-merge-point"}],"title":"11.4.1. Tangle"}],"url":"#merge-point"},
"meta-pattern": {"dfnID":"meta-pattern","dfnText":"meta-pattern","external":false,"refSections":[{"refs":[{"id":"ref-for-meta-pattern"}],"title":"1.4.5. Patterns"},{"refs":[{"id":"ref-for-meta-pattern\u2460"}],"title":"1.5.1.3. Nonterminals"}],"url":"#meta-pattern"},
"meta-type": {"dfnID":"meta-type","dfnText":"meta-type","external":false,"refSections":[{"refs":[{"id":"ref-for-meta-type"}],"title":"1.4.4. Meta-Variables"},{"refs":[{"id":"ref-for-meta-type\u2460"}],"title":"1.5. Context-Free Grammars"},{"refs":[{"id":"ref-for-meta-type\u2461"}],"title":"1.5.1.3. Nonterminals"}],"url":"#meta-type"},
"meta-values": {"dfnID":"meta-values","dfnText":"meta-values","external":false,"refSections":[{"refs":[{"id":"ref-for-meta-values"},{"id":"ref-for-meta-values\u2460"},{"id":"ref-for-meta-values\u2461"},{"id":"ref-for-meta-values\u2462"},{"id":"ref-for-meta-values\u2463"},{"id":"ref-for-meta-values\u2464"},{"id":"ref-for-meta-values\u2465"}],"title":"1.4.3. Meta-Values and Meta-Types"},{"refs":[{"id":"ref-for-meta-values\u2466"}],"title":"1.4.4. Meta-Variables"},{"refs":[{"id":"ref-for-meta-values\u2467"}],"title":"1.4.5. Patterns"},{"refs":[{"id":"ref-for-meta-values\u2468"}],"title":"1.4.6. Characteristics of Meta-Values"},{"refs":[{"id":"ref-for-meta-values\u2460\u24ea"}],"title":"1.5. Context-Free Grammars"},{"refs":[{"id":"ref-for-meta-values\u2460\u2460"}],"title":"1.5.1.2. Terminals"}],"url":"#meta-values"},
"meta-variable": {"dfnID":"meta-variable","dfnText":"meta-variable","external":false,"refSections":[{"refs":[{"id":"ref-for-meta-variable"},{"id":"ref-for-meta-variable\u2460"},{"id":"ref-for-meta-variable\u2461"},{"id":"ref-for-meta-variable\u2462"}],"title":"1.4.4. Meta-Variables"},{"refs":[{"id":"ref-for-meta-variable\u2463"},{"id":"ref-for-meta-variable\u2464"},{"id":"ref-for-meta-variable\u2465"},{"id":"ref-for-meta-variable\u2466"},{"id":"ref-for-meta-variable\u2467"},{"id":"ref-for-meta-variable\u2468"}],"title":"1.4.5. Patterns"},{"refs":[{"id":"ref-for-meta-variable\u2460\u24ea"}],"title":"1.5.1.3. Nonterminals"}],"url":"#meta-variable"},
"methods": {"dfnID":"methods","dfnText":"methods","external":false,"refSections":[{"refs":[{"id":"ref-for-methods"}],"title":"15.11. Extensions"}],"url":"#methods"},
"mirror": {"dfnID":"mirror","dfnText":"mirror","external":false,"refSections":[{"refs":[{"id":"ref-for-mirror"}],"title":"10.3. Loading"},{"refs":[{"id":"ref-for-mirror\u2460"},{"id":"ref-for-mirror\u2461"},{"id":"ref-for-mirror\u2462"},{"id":"ref-for-mirror\u2463"},{"id":"ref-for-mirror\u2464"},{"id":"ref-for-mirror\u2465"},{"id":"ref-for-mirror\u2466"}],"title":"10.4. Runtime Reflection"},{"refs":[{"id":"ref-for-mirror\u2467"}],"title":"10.5. Bundling"}],"url":"#mirror"},
"module": {"dfnID":"module","dfnText":"module","external":false,"refSections":[{"refs":[{"id":"ref-for-module"}],"title":"5.21. Module Values"},{"refs":[{"id":"ref-for-module\u2460"}],"title":"10.3. Loading"},{"refs":[{"id":"ref-for-module\u2461"},{"id":"ref-for-module\u2462"},{"id":"ref-for-module\u2463"}],"title":"10.4. Runtime Reflection"},{"refs":[{"id":"ref-for-module\u2464"}],"title":"14.2.1. Include Declarations"}],"url":"#module"},
"module-declaration": {"dfnID":"module-declaration","dfnText":"module declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-module-declaration"},{"id":"ref-for-module-declaration\u2460"},{"id":"ref-for-module-declaration\u2461"},{"id":"ref-for-module-declaration\u2462"}],"title":"14.1. Primary Source Unit"},{"refs":[{"id":"ref-for-module-declaration\u2463"}],"title":"14.2.2. Implementing Declarations"}],"url":"#module-declaration"},
"nominal-type": {"dfnID":"nominal-type","dfnText":"nominal type","external":false,"refSections":[],"url":"#nominal-type"},
"nonterminal": {"dfnID":"nonterminal","dfnText":"nonterminal","external":false,"refSections":[{"refs":[{"id":"ref-for-nonterminal"},{"id":"ref-for-nonterminal\u2460"},{"id":"ref-for-nonterminal\u2461"},{"id":"ref-for-nonterminal\u2462"},{"id":"ref-for-nonterminal\u2463"},{"id":"ref-for-nonterminal\u2464"},{"id":"ref-for-nonterminal\u2465"},{"id":"ref-for-nonterminal\u2466"},{"id":"ref-for-nonterminal\u2467"},{"id":"ref-for-nonterminal\u2468"},{"id":"ref-for-nonterminal\u2460\u24ea"}],"title":"1.5. Context-Free Grammars"},{"refs":[{"id":"ref-for-nonterminal\u2460\u2460"},{"id":"ref-for-nonterminal\u2460\u2461"}],"title":"1.5.1.9. Characteristics"}],"url":"#nonterminal"},
"numeric-literal": {"dfnID":"numeric-literal","dfnText":"numeric literal","external":false,"refSections":[{"refs":[{"id":"ref-for-numeric-literal"}],"title":"2.4.2.2. Literals"}],"url":"#numeric-literal"},
"numeric-literal-suffix": {"dfnID":"numeric-literal-suffix","dfnText":"numeric literal suffix","external":false,"refSections":[{"refs":[{"id":"ref-for-numeric-literal-suffix"}],"title":"2.4.2.3. Integer Literals"}],"url":"#numeric-literal-suffix"},
"object": {"dfnID":"object","dfnText":"object","external":false,"refSections":[],"url":"#object"},
"object-code": {"dfnID":"object-code","dfnText":"object code","external":false,"refSections":[{"refs":[{"id":"ref-for-object-code"}],"title":"10.2. Linking"}],"url":"#object-code"},
"ordered": {"dfnID":"ordered","dfnText":"ordered","external":false,"refSections":[{"refs":[{"id":"ref-for-ordered"}],"title":"4.2. Strategies"}],"url":"#ordered"},
"output-environment": {"dfnID":"output-environment","dfnText":"output environment","external":false,"refSections":[{"refs":[{"id":"ref-for-output-environment"}],"title":"15. Declarations"}],"url":"#output-environment"},
"parameter-declarations": {"dfnID":"parameter-declarations","dfnText":"parameter declarations","external":false,"refSections":[{"refs":[{"id":"ref-for-parameter-declarations"}],"title":"15.1.3. Parameters"}],"url":"#parameter-declarations"},
"parameters": {"dfnID":"parameters","dfnText":"parameters","external":false,"refSections":[{"refs":[{"id":"ref-for-parameters"}],"title":"5.18. Functions"},{"refs":[{"id":"ref-for-parameters\u2460"}],"title":"5.19. Generics"}],"url":"#parameters"},
"parent-environment": {"dfnID":"parent-environment","dfnText":"parent environment","external":false,"refSections":[{"refs":[{"id":"ref-for-parent-environment"}],"title":"15. Declarations"}],"url":"#parent-environment"},
"parsing": {"dfnID":"parsing","dfnText":"Parsing","external":false,"refSections":[{"refs":[{"id":"ref-for-parsing"}],"title":"4. Parsing"}],"url":"#parsing"},
"participate": {"dfnID":"participate","dfnText":"participate","external":false,"refSections":[{"refs":[{"id":"ref-for-participate"}],"title":"11.4.1. Tangle"}],"url":"#participate"},
"pipeline-instance": {"dfnID":"pipeline-instance","dfnText":"pipeline instance","external":false,"refSections":[{"refs":[{"id":"ref-for-pipeline-instance"},{"id":"ref-for-pipeline-instance\u2460"}],"title":"12.1. Dispatches"},{"refs":[{"id":"ref-for-pipeline-instance\u2461"},{"id":"ref-for-pipeline-instance\u2462"}],"title":"12.1.1. Pipeline Instance"},{"refs":[{"id":"ref-for-pipeline-instance\u2463"}],"title":"12.1.1.1. Pipeline Types"},{"refs":[{"id":"ref-for-pipeline-instance\u2464"}],"title":"12.1.2.1. Stage Types"},{"refs":[{"id":"ref-for-pipeline-instance\u2465"},{"id":"ref-for-pipeline-instance\u2466"},{"id":"ref-for-pipeline-instance\u2467"}],"title":"12.1.3. Records"},{"refs":[{"id":"ref-for-pipeline-instance\u2468"}],"title":"12.1.3.1. Compute"},{"refs":[{"id":"ref-for-pipeline-instance\u2460\u24ea"}],"title":"12.1.3.2. Rasterization"}],"url":"#pipeline-instance"},
"pipeline-type": {"dfnID":"pipeline-type","dfnText":"pipeline type","external":false,"refSections":[{"refs":[{"id":"ref-for-pipeline-type"}],"title":"12.1.1. Pipeline Instance"},{"refs":[{"id":"ref-for-pipeline-type\u2460"}],"title":"12.1.1.1. Pipeline Types"},{"refs":[{"id":"ref-for-pipeline-type\u2461"}],"title":"12.1.2.1. Stage Types"},{"refs":[{"id":"ref-for-pipeline-type\u2462"},{"id":"ref-for-pipeline-type\u2463"}],"title":"12.1.3. Records"}],"url":"#pipeline-type"},
"prefix-operator": {"dfnID":"prefix-operator","dfnText":"prefix operator","external":false,"refSections":[{"refs":[{"id":"ref-for-prefix-operator"}],"title":"4.3.1.2. Unordered Mode"}],"url":"#prefix-operator"},
"primary-source-unit": {"dfnID":"primary-source-unit","dfnText":"primary source unit","external":false,"refSections":[{"refs":[{"id":"ref-for-primary-source-unit"},{"id":"ref-for-primary-source-unit\u2460"},{"id":"ref-for-primary-source-unit\u2461"},{"id":"ref-for-primary-source-unit\u2462"}],"title":"14.1. Primary Source Unit"},{"refs":[{"id":"ref-for-primary-source-unit\u2463"}],"title":"14.2. Seconary Source Units"}],"url":"#primary-source-unit"},
"process": {"dfnID":"process","dfnText":"process","external":false,"refSections":[{"refs":[{"id":"ref-for-process"}],"title":"10.3. Loading"},{"refs":[{"id":"ref-for-process\u2460"}],"title":"11. Execution"}],"url":"#process"},
"production": {"dfnID":"production","dfnText":"production","external":false,"refSections":[{"refs":[{"id":"ref-for-production"},{"id":"ref-for-production\u2460"},{"id":"ref-for-production\u2461"},{"id":"ref-for-production\u2462"},{"id":"ref-for-production\u2463"},{"id":"ref-for-production\u2464"},{"id":"ref-for-production\u2465"}],"title":"1.5. Context-Free Grammars"},{"refs":[{"id":"ref-for-production\u2466"},{"id":"ref-for-production\u2467"}],"title":"1.5.1.9. Characteristics"}],"url":"#production"},
"programmable": {"dfnID":"programmable","dfnText":"programmable","external":false,"refSections":[{"refs":[{"id":"ref-for-programmable"}],"title":"12.1.1. Pipeline Instance"},{"refs":[{"id":"ref-for-programmable\u2460"}],"title":"12.1.2. Stage Instances"},{"refs":[{"id":"ref-for-programmable\u2461"}],"title":"12.1.3.1. Compute"},{"refs":[{"id":"ref-for-programmable\u2462"}],"title":"12.1.3.2.3. Vertex Shader"}],"url":"#programmable"},
"proper-type": {"dfnID":"proper-type","dfnText":"proper type","external":false,"refSections":[{"refs":[{"id":"ref-for-proper-type"},{"id":"ref-for-proper-type\u2460"},{"id":"ref-for-proper-type\u2461"}],"title":"5.2. Types of Types"},{"refs":[{"id":"ref-for-proper-type\u2462"}],"title":"5.11. struct Types"},{"refs":[{"id":"ref-for-proper-type\u2463"}],"title":"5.12. class Types"},{"refs":[{"id":"ref-for-proper-type\u2464"}],"title":"5.13. enum Types"},{"refs":[{"id":"ref-for-proper-type\u2465"}],"title":"5.14. Type Aliases"},{"refs":[{"id":"ref-for-proper-type\u2466"}],"title":"5.15. Associated Types"},{"refs":[{"id":"ref-for-proper-type\u2467"}],"title":"5.16. Interfaces"}],"url":"#proper-type"},
"property-declaration": {"dfnID":"property-declaration","dfnText":"property declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-property-declaration"}],"title":"15.9. Properties"}],"url":"#property-declaration"},
"proposition": {"dfnID":"proposition","dfnText":"proposition","external":false,"refSections":[{"refs":[{"id":"ref-for-proposition"},{"id":"ref-for-proposition\u2460"},{"id":"ref-for-proposition\u2461"},{"id":"ref-for-proposition\u2462"},{"id":"ref-for-proposition\u2463"}],"title":"5.20. Witnesses"}],"url":"#proposition"},
"radix-specifier": {"dfnID":"radix-specifier","dfnText":"radix specifier","external":false,"refSections":[{"refs":[{"id":"ref-for-radix-specifier"},{"id":"ref-for-radix-specifier\u2460"}],"title":"2.4.2.4. Floating-Point Literals"}],"url":"#radix-specifier"},
"rasterization-pipeline": {"dfnID":"rasterization-pipeline","dfnText":"rasterization pipeline","external":false,"refSections":[{"refs":[{"id":"ref-for-rasterization-pipeline"}],"title":"12.1.1.1. Pipeline Types"}],"url":"#rasterization-pipeline"},
"ray-tracing-pipeline": {"dfnID":"ray-tracing-pipeline","dfnText":"ray-tracing pipeline","external":false,"refSections":[{"refs":[{"id":"ref-for-ray-tracing-pipeline"}],"title":"12.1.1.1. Pipeline Types"}],"url":"#ray-tracing-pipeline"},
"record": {"dfnID":"record","dfnText":"record","external":false,"refSections":[{"refs":[{"id":"ref-for-record"}],"title":"12.1.3. Records"}],"url":"#record"},
"reference-type": {"dfnID":"reference-type","dfnText":"reference type","external":false,"refSections":[{"refs":[{"id":"ref-for-reference-type"},{"id":"ref-for-reference-type\u2460"},{"id":"ref-for-reference-type\u2461"}],"title":"9.5.1. Type Conversion"}],"url":"#reference-type"},
"resolved-expression": {"dfnID":"resolved-expression","dfnText":"resolved expression","external":false,"refSections":[{"refs":[{"id":"ref-for-resolved-expression"}],"title":"6.2.2. Checking"}],"url":"#resolved-expression"},
"result-type": {"dfnID":"result-type","dfnText":"result type","external":false,"refSections":[{"refs":[{"id":"ref-for-result-type"}],"title":"15.7.1. Result Type"}],"url":"#result-type"},
"retroactive-conformance": {"dfnID":"retroactive-conformance","dfnText":"retroactive conformance","external":false,"refSections":[{"refs":[{"id":"ref-for-retroactive-conformance"}],"title":"15.11. Extensions"}],"url":"#retroactive-conformance"},
"right-hand-side": {"dfnID":"right-hand-side","dfnText":"right-hand side","external":false,"refSections":[{"refs":[{"id":"ref-for-right-hand-side"},{"id":"ref-for-right-hand-side\u2460"},{"id":"ref-for-right-hand-side\u2461"},{"id":"ref-for-right-hand-side\u2462"},{"id":"ref-for-right-hand-side\u2463"},{"id":"ref-for-right-hand-side\u2464"}],"title":"1.5. Context-Free Grammars"},{"refs":[{"id":"ref-for-right-hand-side\u2465"},{"id":"ref-for-right-hand-side\u2466"}],"title":"1.5.1.9. Characteristics"}],"url":"#right-hand-side"},
"row-count": {"dfnID":"row-count","dfnText":"row count","external":false,"refSections":[],"url":"#row-count"},
"row-type": {"dfnID":"row-type","dfnText":"row type","external":false,"refSections":[{"refs":[{"id":"ref-for-row-type"}],"title":"5.7. Matrices"}],"url":"#row-type"},
"rows": {"dfnID":"rows","dfnText":"rows","external":false,"refSections":[{"refs":[{"id":"ref-for-rows"}],"title":"5.7. Matrices"}],"url":"#rows"},
"runtime-session": {"dfnID":"runtime-session","dfnText":"runtime session","external":false,"refSections":[{"refs":[{"id":"ref-for-runtime-session"}],"title":"10.3. Loading"},{"refs":[{"id":"ref-for-runtime-session\u2460"},{"id":"ref-for-runtime-session\u2461"}],"title":"10.4. Runtime Reflection"},{"refs":[{"id":"ref-for-runtime-session\u2462"},{"id":"ref-for-runtime-session\u2463"},{"id":"ref-for-runtime-session\u2464"},{"id":"ref-for-runtime-session\u2465"}],"title":"11. Execution"}],"url":"#runtime-session"},
"scalar-type": {"dfnID":"scalar-type","dfnText":"scalar type","external":false,"refSections":[{"refs":[{"id":"ref-for-scalar-type"}],"title":"5.7. Matrices"}],"url":"#scalar-type"},
"scope": {"dfnID":"scope","dfnText":"scope","external":false,"refSections":[{"refs":[{"id":"ref-for-scope"}],"title":"15. Declarations"}],"url":"#scope"},
"secondary-source-units": {"dfnID":"secondary-source-units","dfnText":"secondary source units","external":false,"refSections":[{"refs":[{"id":"ref-for-secondary-source-units"},{"id":"ref-for-secondary-source-units\u2460"}],"title":"14.2.2. Implementing Declarations"}],"url":"#secondary-source-units"},
"sign": {"dfnID":"sign","dfnText":"sign","external":false,"refSections":[{"refs":[{"id":"ref-for-sign"}],"title":"2.4.2.4. Floating-Point Literals"}],"url":"#sign"},
"sort": {"dfnID":"sort","dfnText":"sort","external":false,"refSections":[{"refs":[{"id":"ref-for-sort"},{"id":"ref-for-sort\u2460"}],"title":"5.2. Types of Types"},{"refs":[{"id":"ref-for-sort\u2461"},{"id":"ref-for-sort\u2462"}],"title":"5.16. Interfaces"}],"url":"#sort"},
"source-unit": {"dfnID":"source-unit","dfnText":"source unit","external":false,"refSections":[{"refs":[{"id":"ref-for-source-unit"}],"title":"2. Lexical Structure"},{"refs":[{"id":"ref-for-source-unit\u2460"}],"title":"2.1. Source Units"},{"refs":[{"id":"ref-for-source-unit\u2461"},{"id":"ref-for-source-unit\u2462"}],"title":"2.2. Encoding"},{"refs":[{"id":"ref-for-source-unit\u2463"},{"id":"ref-for-source-unit\u2464"}],"title":"2.3. Phases"},{"refs":[{"id":"ref-for-source-unit\u2465"},{"id":"ref-for-source-unit\u2466"}],"title":"2.4. Lexemes"},{"refs":[{"id":"ref-for-source-unit\u2467"},{"id":"ref-for-source-unit\u2468"}],"title":"2.4.1.1.1. Line Breaks"},{"refs":[{"id":"ref-for-source-unit\u2460\u24ea"},{"id":"ref-for-source-unit\u2460\u2460"},{"id":"ref-for-source-unit\u2460\u2461"}],"title":"2.4.1.2. Comments"},{"refs":[{"id":"ref-for-source-unit\u2460\u2462"},{"id":"ref-for-source-unit\u2460\u2463"}],"title":"3. Preprocessor"},{"refs":[{"id":"ref-for-source-unit\u2460\u2464"},{"id":"ref-for-source-unit\u2460\u2465"},{"id":"ref-for-source-unit\u2460\u2466"},{"id":"ref-for-source-unit\u2460\u2467"},{"id":"ref-for-source-unit\u2460\u2468"},{"id":"ref-for-source-unit\u2461\u24ea"}],"title":"14.1. Primary Source Unit"},{"refs":[{"id":"ref-for-source-unit\u2461\u2460"}],"title":"14.2. Seconary Source Units"},{"refs":[{"id":"ref-for-source-unit\u2461\u2461"},{"id":"ref-for-source-unit\u2461\u2462"},{"id":"ref-for-source-unit\u2461\u2463"},{"id":"ref-for-source-unit\u2461\u2464"},{"id":"ref-for-source-unit\u2461\u2465"},{"id":"ref-for-source-unit\u2461\u2466"},{"id":"ref-for-source-unit\u2461\u2467"}],"title":"14.2.1. Include Declarations"},{"refs":[{"id":"ref-for-source-unit\u2461\u2468"},{"id":"ref-for-source-unit\u2462\u24ea"},{"id":"ref-for-source-unit\u2462\u2460"},{"id":"ref-for-source-unit\u2462\u2461"},{"id":"ref-for-source-unit\u2462\u2462"},{"id":"ref-for-source-unit\u2462\u2463"},{"id":"ref-for-source-unit\u2462\u2464"}],"title":"14.2.2. Implementing Declarations"},{"refs":[{"id":"ref-for-source-unit\u2462\u2465"},{"id":"ref-for-source-unit\u2462\u2466"},{"id":"ref-for-source-unit\u2462\u2467"},{"id":"ref-for-source-unit\u2462\u2468"},{"id":"ref-for-source-unit\u2463\u24ea"}],"title":"14.3. Import Declarations"},{"refs":[{"id":"ref-for-source-unit\u2463\u2460"}],"title":"15. Declarations"},{"refs":[{"id":"ref-for-source-unit\u2463\u2461"}],"title":"23. Lookup"}],"url":"#source-unit"},
"specialize-expression": {"dfnID":"specialize-expression","dfnText":"specialize expression","external":false,"refSections":[{"refs":[{"id":"ref-for-specialize-expression"},{"id":"ref-for-specialize-expression\u2460"}],"title":"4.3.1.1. Ordered Mode"},{"refs":[{"id":"ref-for-specialize-expression\u2461"},{"id":"ref-for-specialize-expression\u2462"}],"title":"4.3.1.2. Unordered Mode"}],"url":"#specialize-expression"},
"specialized": {"dfnID":"specialized","dfnText":"specialized","external":false,"refSections":[{"refs":[{"id":"ref-for-specialized"}],"title":"15.12.2. Explicit Specialization"}],"url":"#specialized"},
"specialized-declaration-reference": {"dfnID":"specialized-declaration-reference","dfnText":"specialized declaration reference","external":false,"refSections":[{"refs":[{"id":"ref-for-specialized-declaration-reference"},{"id":"ref-for-specialized-declaration-reference\u2460"}],"title":"5.9.3. Specialized Declaration Reference"},{"refs":[{"id":"ref-for-specialized-declaration-reference\u2461"}],"title":"5.9.4. Fully-Specialized Declaration References"}],"url":"#specialized-declaration-reference"},
"stage-instance": {"dfnID":"stage-instance","dfnText":"stage instance","external":false,"refSections":[{"refs":[{"id":"ref-for-stage-instance"},{"id":"ref-for-stage-instance\u2460"}],"title":"12.1.1. Pipeline Instance"},{"refs":[{"id":"ref-for-stage-instance\u2461"},{"id":"ref-for-stage-instance\u2462"},{"id":"ref-for-stage-instance\u2463"},{"id":"ref-for-stage-instance\u2464"},{"id":"ref-for-stage-instance\u2465"}],"title":"12.1.3. Records"},{"refs":[{"id":"ref-for-stage-instance\u2466"}],"title":"12.1.3.1. Compute"}],"url":"#stage-instance"},
"stage-type": {"dfnID":"stage-type","dfnText":"stage type","external":false,"refSections":[{"refs":[{"id":"ref-for-stage-type"}],"title":"12.1.1.1. Pipeline Types"},{"refs":[{"id":"ref-for-stage-type\u2460"}],"title":"12.1.2. Stage Instances"},{"refs":[{"id":"ref-for-stage-type\u2461"},{"id":"ref-for-stage-type\u2462"},{"id":"ref-for-stage-type\u2463"}],"title":"12.1.2.1. Stage Types"},{"refs":[{"id":"ref-for-stage-type\u2464"},{"id":"ref-for-stage-type\u2465"}],"title":"12.1.3.1. Compute"},{"refs":[{"id":"ref-for-stage-type\u2466"}],"title":"12.1.3.2.3. Vertex Shader"}],"url":"#stage-type"},
"statement": {"dfnID":"statement","dfnText":"statement","external":false,"refSections":[{"refs":[{"id":"ref-for-statement"}],"title":"4.2.1. Ordered"},{"refs":[{"id":"ref-for-statement\u2460"}],"title":"6.3. Statements"}],"url":"#statement"},
"static-global-variable": {"dfnID":"static-global-variable","dfnText":"static global variable","external":false,"refSections":[{"refs":[{"id":"ref-for-static-global-variable"}],"title":"15.6.2.2. Static Global Variables"}],"url":"#static-global-variable"},
"static-library": {"dfnID":"static-library","dfnText":"static library","external":false,"refSections":[{"refs":[{"id":"ref-for-static-library"},{"id":"ref-for-static-library\u2460"}],"title":"10.2. Linking"}],"url":"#static-library"},
"static-members": {"dfnID":"static-members","dfnText":"static members","external":false,"refSections":[{"refs":[{"id":"ref-for-static-members"}],"title":"15.4.1.1. Instance and Static Members"}],"url":"#static-members"},
"storable": {"dfnID":"storable","dfnText":"storable","external":false,"refSections":[{"refs":[{"id":"ref-for-storable"}],"title":"7. Memory"}],"url":"#storable"},
"strand": {"dfnID":"strand","dfnText":"strand","external":false,"refSections":[{"refs":[{"id":"ref-for-strand"}],"title":"7.2. Memory Accesses"},{"refs":[{"id":"ref-for-strand\u2460"}],"title":"9.3. Abstract Storage Access"},{"refs":[{"id":"ref-for-strand\u2461"}],"title":"11.3. Waves"}],"url":"#strand"},
"string-literal": {"dfnID":"string-literal","dfnText":"string literal","external":false,"refSections":[{"refs":[{"id":"ref-for-string-literal"}],"title":"2.4.3.1. String Literals"}],"url":"#string-literal"},
"struct-type": {"dfnID":"struct-type","dfnText":"struct type","external":false,"refSections":[{"refs":[{"id":"ref-for-struct-type"}],"title":"5.11. struct Types"}],"url":"#struct-type"},
"structured-region": {"dfnID":"structured-region","dfnText":"structured region","external":false,"refSections":[{"refs":[{"id":"ref-for-structured-region"}],"title":"11.4.1. Tangle"}],"url":"#structured-region"},
"subscript-declaration": {"dfnID":"subscript-declaration","dfnText":"subscript declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-subscript-declaration"}],"title":"15.10. Subscripts"}],"url":"#subscript-declaration"},
"switch-statement": {"dfnID":"switch-statement","dfnText":"switch statement","external":false,"refSections":[{"refs":[{"id":"ref-for-switch-statement"},{"id":"ref-for-switch-statement\u2460"}],"title":"16.7.1. break Statement"}],"url":"#switch-statement"},
"tangle": {"dfnID":"tangle","dfnText":"tangle","external":false,"refSections":[{"refs":[{"id":"ref-for-tangle"}],"title":"11.4.1. Tangle"}],"url":"#tangle"},
"term": {"dfnID":"term","dfnText":"term","external":false,"refSections":[{"refs":[{"id":"ref-for-term"}],"title":"4.2.1. Ordered"}],"url":"#term"},
"terminal": {"dfnID":"terminal","dfnText":"terminal","external":false,"refSections":[{"refs":[{"id":"ref-for-terminal"},{"id":"ref-for-terminal\u2460"},{"id":"ref-for-terminal\u2461"}],"title":"1.5. Context-Free Grammars"}],"url":"#terminal"},
"tokens": {"dfnID":"tokens","dfnText":"Tokens","external":false,"refSections":[{"refs":[{"id":"ref-for-tokens"},{"id":"ref-for-tokens\u2460"}],"title":"2.3. Phases"},{"refs":[{"id":"ref-for-tokens\u2461"}],"title":"2.4. Lexemes"}],"url":"#tokens"},
"traditional": {"dfnID":"traditional","dfnText":"traditional","external":false,"refSections":[{"refs":[{"id":"ref-for-traditional"},{"id":"ref-for-traditional\u2460"}],"title":"1.4.8. Traditional and Legacy Features"}],"url":"#traditional"},
"traditional-buffer-declaration": {"dfnID":"traditional-buffer-declaration","dfnText":"traditional buffer declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-traditional-buffer-declaration"}],"title":"15.13. Traditional Buffer Declarations"}],"url":"#traditional-buffer-declaration"},
"traditional-function-declaration": {"dfnID":"traditional-function-declaration","dfnText":"traditional function declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-traditional-function-declaration"}],"title":"15.7.3. Traditional Function Declarations"}],"url":"#traditional-function-declaration"},
"traditional-type-alias-declaration": {"dfnID":"traditional-type-alias-declaration","dfnText":"traditional type alias declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-traditional-type-alias-declaration"},{"id":"ref-for-traditional-type-alias-declaration\u2460"}],"title":"15.4.4.1. Traditional Syntax"}],"url":"#traditional-type-alias-declaration"},
"trivia": {"dfnID":"trivia","dfnText":"Trivia","external":false,"refSections":[{"refs":[{"id":"ref-for-trivia"}],"title":"2.4. Lexemes"},{"refs":[{"id":"ref-for-trivia\u2460"}],"title":"2.4.1. Trivia"}],"url":"#trivia"},
"trivial-production": {"dfnID":"trivial-production","dfnText":"trivial production","external":false,"refSections":[],"url":"#trivial-production"},
"type": {"dfnID":"type","dfnText":"type","external":false,"refSections":[{"refs":[{"id":"ref-for-type"}],"title":"1.4.3. Meta-Values and Meta-Types"},{"refs":[{"id":"ref-for-type\u2460"},{"id":"ref-for-type\u2461"}],"title":"1.4.4. Meta-Variables"},{"refs":[{"id":"ref-for-type\u2462"}],"title":"1.4.5. Patterns"},{"refs":[{"id":"ref-for-type\u2463"}],"title":"4.2.1. Ordered"},{"refs":[{"id":"ref-for-type\u2464"}],"title":"5. Types and Values"},{"refs":[{"id":"ref-for-type\u2465"},{"id":"ref-for-type\u2466"},{"id":"ref-for-type\u2467"},{"id":"ref-for-type\u2468"},{"id":"ref-for-type\u2460\u24ea"},{"id":"ref-for-type\u2460\u2460"},{"id":"ref-for-type\u2460\u2461"}],"title":"5.2. Types of Types"},{"refs":[{"id":"ref-for-type\u2460\u2462"}],"title":"5.17. any Types"},{"refs":[{"id":"ref-for-type\u2460\u2463"},{"id":"ref-for-type\u2460\u2464"}],"title":"5.18. Functions"},{"refs":[{"id":"ref-for-type\u2460\u2465"},{"id":"ref-for-type\u2460\u2466"},{"id":"ref-for-type\u2460\u2467"},{"id":"ref-for-type\u2460\u2468"}],"title":"5.20. Witnesses"},{"refs":[{"id":"ref-for-type\u2461\u24ea"}],"title":"6.2.2. Checking"}],"url":"#type"},
"type-alias": {"dfnID":"type-alias","dfnText":"type alias","external":false,"refSections":[{"refs":[{"id":"ref-for-type-alias"}],"title":"5.14. Type Aliases"}],"url":"#type-alias"},
"type-alias-declaration": {"dfnID":"type-alias-declaration","dfnText":"type alias declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-type-alias-declaration"}],"title":"15.4.4. Type Aliases"}],"url":"#type-alias-declaration"},
"type-declaration": {"dfnID":"type-declaration","dfnText":"type declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-type-declaration"}],"title":"5.10. Nominal Types"},{"refs":[{"id":"ref-for-type-declaration\u2460"}],"title":"15.8. Constructors"}],"url":"#type-declaration"},
"type-expression": {"dfnID":"type-expression","dfnText":"type expression","external":false,"refSections":[{"refs":[{"id":"ref-for-type-expression"}],"title":"4.2.1. Ordered"}],"url":"#type-expression"},
"type-specifiers": {"dfnID":"type-specifiers","dfnText":"type specifiers","external":false,"refSections":[{"refs":[{"id":"ref-for-type-specifiers"}],"title":"4.2.2. Unordered"}],"url":"#type-specifiers"},
"underlying-type": {"dfnID":"underlying-type","dfnText":"underlying type","external":false,"refSections":[{"refs":[{"id":"ref-for-underlying-type"}],"title":"15.4.3. enum Declarations"},{"refs":[{"id":"ref-for-underlying-type\u2460"}],"title":"15.4.3.1. Cases"}],"url":"#underlying-type"},
"underlying-value": {"dfnID":"underlying-value","dfnText":"underlying value","external":false,"refSections":[{"refs":[{"id":"ref-for-underlying-value"}],"title":"15.4.3.1. Cases"}],"url":"#underlying-value"},
"uniform-shader-parameters": {"dfnID":"uniform-shader-parameters","dfnText":"uniform shader parameters","external":false,"refSections":[{"refs":[{"id":"ref-for-uniform-shader-parameters"}],"title":"12.1. Dispatches"}],"url":"#uniform-shader-parameters"},
"unit-type": {"dfnID":"unit-type","dfnText":"unit type","external":false,"refSections":[{"refs":[{"id":"ref-for-unit-type"},{"id":"ref-for-unit-type\u2460"},{"id":"ref-for-unit-type\u2461"},{"id":"ref-for-unit-type\u2462"},{"id":"ref-for-unit-type\u2463"},{"id":"ref-for-unit-type\u2464"}],"title":"1.4.3. Meta-Values and Meta-Types"},{"refs":[{"id":"ref-for-unit-type\u2465"}],"title":"5.3.1. Unit"}],"url":"#unit-type"},
"unit-value": {"dfnID":"unit-value","dfnText":"unit value","external":false,"refSections":[],"url":"#unit-value"},
"unordered": {"dfnID":"unordered","dfnText":"unordered","external":false,"refSections":[{"refs":[{"id":"ref-for-unordered"}],"title":"4.2. Strategies"}],"url":"#unordered"},
"unspecialized": {"dfnID":"unspecialized","dfnText":"unspecialized","external":false,"refSections":[{"refs":[{"id":"ref-for-unspecialized"}],"title":"5.9.4. Fully-Specialized Declaration References"}],"url":"#unspecialized"},
"values": {"dfnID":"values","dfnText":"values","external":false,"refSections":[{"refs":[{"id":"ref-for-values"}],"title":"1.4.3. Meta-Values and Meta-Types"},{"refs":[{"id":"ref-for-values\u2460"}],"title":"5. Types and Values"},{"refs":[{"id":"ref-for-values\u2461"}],"title":"5.1. Level"},{"refs":[{"id":"ref-for-values\u2462"},{"id":"ref-for-values\u2463"}],"title":"5.2. Types of Types"},{"refs":[{"id":"ref-for-values\u2464"}],"title":"5.9. Declaration References"},{"refs":[{"id":"ref-for-values\u2465"}],"title":"5.17. any Types"},{"refs":[{"id":"ref-for-values\u2466"}],"title":"5.21. Module Values"}],"url":"#values"},
"variable": {"dfnID":"variable","dfnText":"variable","external":false,"refSections":[{"refs":[{"id":"ref-for-variable"}],"title":"15.6. Variables"}],"url":"#variable"},
"variable-declaration": {"dfnID":"variable-declaration","dfnText":"variable declaration","external":false,"refSections":[{"refs":[{"id":"ref-for-variable-declaration"},{"id":"ref-for-variable-declaration\u2460"}],"title":"15.6. Variables"}],"url":"#variable-declaration"},
"vector": {"dfnID":"vector","dfnText":"vector","external":false,"refSections":[{"refs":[{"id":"ref-for-vector"}],"title":"5.6. Vectors"}],"url":"#vector"},
"vector-type": {"dfnID":"vector-type","dfnText":"vector type","external":false,"refSections":[{"refs":[{"id":"ref-for-vector-type"}],"title":"5.6. Vectors"},{"refs":[{"id":"ref-for-vector-type\u2460"}],"title":"5.7. Matrices"}],"url":"#vector-type"},
"wave": {"dfnID":"wave","dfnText":"wave","external":false,"refSections":[{"refs":[{"id":"ref-for-wave"},{"id":"ref-for-wave\u2460"}],"title":"11.3. Waves"}],"url":"#wave"},
"wave-size": {"dfnID":"wave-size","dfnText":"wave size","external":false,"refSections":[{"refs":[{"id":"ref-for-wave-size"}],"title":"11.3. Waves"}],"url":"#wave-size"},
"whitespace": {"dfnID":"whitespace","dfnText":"Whitespace","external":false,"refSections":[{"refs":[{"id":"ref-for-whitespace"}],"title":"2.4.1. Trivia"}],"url":"#whitespace"},
"witness": {"dfnID":"witness","dfnText":"witness","external":false,"refSections":[{"refs":[{"id":"ref-for-witness"},{"id":"ref-for-witness\u2460"}],"title":"5.20. Witnesses"}],"url":"#witness"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#abstract-storage-access": {"displayText":"abstract storage access","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"abstract storage access","type":"dfn","url":"#abstract-storage-access"},
"#abstract-storage-access-mode": {"displayText":"abstract storage access mode","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"abstract storage access mode","type":"dfn","url":"#abstract-storage-access-mode"},
"#abstract-storage-location": {"displayText":"abstract storage location","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"abstract storage location","type":"dfn","url":"#abstract-storage-location"},
"#abstract-storage-reference-type": {"displayText":"abstract storage reference type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"abstract storage reference type","type":"dfn","url":"#abstract-storage-reference-type"},
"#activation-record": {"displayText":"activation record","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"activation record","type":"dfn","url":"#activation-record"},
"#address-space": {"displayText":"address space","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"address space","type":"dfn","url":"#address-space"},
"#aggregate-type-declaration": {"displayText":"aggregate type declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"aggregate type declaration","type":"dfn","url":"#aggregate-type-declaration"},
"#alternatives": {"displayText":"alternatives","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"alternatives","type":"dfn","url":"#alternatives"},
"#any-type": {"displayText":"any type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"any type","type":"dfn","url":"#any-type"},
"#architectures": {"displayText":"architectures","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"architectures","type":"dfn","url":"#architectures"},
"#arguments": {"displayText":"arguments","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"arguments","type":"dfn","url":"#arguments"},
"#array": {"displayText":"array","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"array","type":"dfn","url":"#array"},
"#array-type": {"displayText":"array type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"array type","type":"dfn","url":"#array-type"},
"#associated-record-types": {"displayText":"associated record types","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"associated record types","type":"dfn","url":"#associated-record-types"},
"#associated-type": {"displayText":"associated type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"associated type","type":"dfn","url":"#associated-type"},
"#associated-type-declaration": {"displayText":"associated type declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"associated type declaration","type":"dfn","url":"#associated-type-declaration"},
"#balanced": {"displayText":"balanced","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"balanced","type":"dfn","url":"#balanced"},
"#balanced-tokens": {"displayText":"balanced tokens","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"balanced tokens","type":"dfn","url":"#balanced-tokens"},
"#bases": {"displayText":"bases","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"bases","type":"dfn","url":"#bases"},
"#binary": {"displayText":"binary","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"binary","type":"dfn","url":"#binary"},
"#binary-literal": {"displayText":"binary literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"binary literal","type":"dfn","url":"#binary-literal"},
"#binding": {"displayText":"binding","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"binding","type":"dfn","url":"#binding"},
"#bindings": {"displayText":"bindings","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"bindings","type":"dfn","url":"#bindings"},
"#binds": {"displayText":"binds","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"binds","type":"dfn","url":"#binds"},
"#block": {"displayText":"block","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"block","type":"dfn","url":"#block"},
"#block-comment": {"displayText":"block comment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"block comment","type":"dfn","url":"#block-comment"},
"#block-shape": {"displayText":"block shape","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"block shape","type":"dfn","url":"#block-shape"},
"#block-statement": {"displayText":"block statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"block statement","type":"dfn","url":"#block-statement"},
"#body": {"displayText":"body","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"body","type":"dfn","url":"#body"},
"#break-statement": {"displayText":"break statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"break statement","type":"dfn","url":"#break-statement"},
"#breaks-out-of": {"displayText":"breaks out of","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"breaks out of","type":"dfn","url":"#breaks-out-of"},
"#bundle": {"displayText":"bundle","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"bundle","type":"dfn","url":"#bundle"},
"#callouts": {"displayText":"callouts","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"callouts","type":"dfn","url":"#callouts"},
"#case-declarations": {"displayText":"case declarations","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"case declarations","type":"dfn","url":"#case-declarations"},
"#cast-expression": {"displayText":"cast expression","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"cast expression","type":"dfn","url":"#cast-expression"},
"#chain-production": {"displayText":"chain production","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"chain production","type":"dfn","url":"#chain-production"},
"#character": {"displayText":"character","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"character","type":"dfn","url":"#character"},
"#character-literal": {"displayText":"character literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"character literal","type":"dfn","url":"#character-literal"},
"#checking-judgement": {"displayText":"checking judgement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"checking judgement","type":"dfn","url":"#checking-judgement"},
"#checks": {"displayText":"checks","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"checks","type":"dfn","url":"#checks"},
"#checks-against": {"displayText":"checks against","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"checks against","type":"dfn","url":"#checks-against"},
"#class-type": {"displayText":"class type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"class type","type":"dfn","url":"#class-type"},
"#collective": {"displayText":"collective","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"collective","type":"dfn","url":"#collective"},
"#column-count": {"displayText":"column count","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"column count","type":"dfn","url":"#column-count"},
"#commands": {"displayText":"commands","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"commands","type":"dfn","url":"#commands"},
"#comment": {"displayText":"comment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"comment","type":"dfn","url":"#comment"},
"#compiler": {"displayText":"compiler","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"compiler","type":"dfn","url":"#compiler"},
"#compute-dispatch": {"displayText":"compute dispatch","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"compute dispatch","type":"dfn","url":"#compute-dispatch"},
"#compute-pipeline": {"displayText":"compute pipeline","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"compute pipeline","type":"dfn","url":"#compute-pipeline"},
"#concrete-storage-location": {"displayText":"concrete storage location","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"concrete storage location","type":"dfn","url":"#concrete-storage-location"},
"#constructor-declaration": {"displayText":"constructor declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"constructor declaration","type":"dfn","url":"#constructor-declaration"},
"#context": {"displayText":"context","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"context","type":"dfn","url":"#context"},
"#context-entries": {"displayText":"context entries","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"context entries","type":"dfn","url":"#context-entries"},
"#context-free-grammar": {"displayText":"context-free grammar","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"context-free grammar","type":"dfn","url":"#context-free-grammar"},
"#control-flow-region": {"displayText":"control-flow region","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"control-flow region","type":"dfn","url":"#control-flow-region"},
"#decimal-literal": {"displayText":"decimal literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"decimal literal","type":"dfn","url":"#decimal-literal"},
"#declaration": {"displayText":"declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"declaration","type":"dfn","url":"#declaration"},
"#declaration-bodies": {"displayText":"declaration bodies","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"declaration bodies","type":"dfn","url":"#declaration-bodies"},
"#declaration-reference": {"displayText":"declaration reference","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"declaration reference","type":"dfn","url":"#declaration-reference"},
"#declaration-statement": {"displayText":"declaration statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"declaration statement","type":"dfn","url":"#declaration-statement"},
"#devices": {"displayText":"devices","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"devices","type":"dfn","url":"#devices"},
"#digits": {"displayText":"digits","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"digits","type":"dfn","url":"#digits"},
"#direct-members": {"displayText":"direct members","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"direct members","type":"dfn","url":"#direct-members"},
"#direction": {"displayText":"direction","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"direction","type":"dfn","url":"#direction"},
"#dispatch": {"displayText":"dispatch","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"dispatch","type":"dfn","url":"#dispatch"},
"#dispatch-parameters": {"displayText":"dispatch parameters","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"dispatch parameters","type":"dfn","url":"#dispatch-parameters"},
"#duck": {"displayText":"duck","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"duck","type":"dfn","url":"#duck"},
"#dynamic-library": {"displayText":"dynamic library","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"dynamic library","type":"dfn","url":"#dynamic-library"},
"#effects": {"displayText":"effects","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"effects","type":"dfn","url":"#effects"},
"#element-count": {"displayText":"element count","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"element count","type":"dfn","url":"#element-count"},
"#element-type": {"displayText":"element type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"element type","type":"dfn","url":"#element-type"},
"#empty-environment": {"displayText":"empty environment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"empty environment","type":"dfn","url":"#empty-environment"},
"#entry-point-declaration": {"displayText":"entry point declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"entry point declaration","type":"dfn","url":"#entry-point-declaration"},
"#enum-declaration": {"displayText":"enum declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"enum declaration","type":"dfn","url":"#enum-declaration"},
"#enum-type": {"displayText":"enum type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"enum type","type":"dfn","url":"#enum-type"},
"#environment": {"displayText":"environment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"environment","type":"dfn","url":"#environment"},
"#escaped-line-break": {"displayText":"escaped line break","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"escaped line break","type":"dfn","url":"#escaped-line-break"},
"#evaluated": {"displayText":"evaluated","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"evaluated","type":"dfn","url":"#evaluated"},
"#executable": {"displayText":"executable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"executable","type":"dfn","url":"#executable"},
"#exponent": {"displayText":"exponent","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"exponent","type":"dfn","url":"#exponent"},
"#expression-statement": {"displayText":"expression statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"expression statement","type":"dfn","url":"#expression-statement"},
"#expressions": {"displayText":"expressions","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"expressions","type":"dfn","url":"#expressions"},
"#fields": {"displayText":"fields","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"fields","type":"dfn","url":"#fields"},
"#fixed-function": {"displayText":"fixed-function","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"fixed-function","type":"dfn","url":"#fixed-function"},
"#fixed-function-parameters": {"displayText":"fixed-function parameters","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"fixed-function parameters","type":"dfn","url":"#fixed-function-parameters"},
"#floating-point-literal": {"displayText":"floating-point literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"floating-point literal","type":"dfn","url":"#floating-point-literal"},
"#floating-point-types": {"displayText":"floating-point types","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"floating-point types","type":"dfn","url":"#floating-point-types"},
"#fragile": {"displayText":"fragile","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"fragile","type":"dfn","url":"#fragile"},
"#fully-specialized": {"displayText":"fully specialized","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"fully specialized","type":"dfn","url":"#fully-specialized"},
"#function": {"displayText":"function","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"function","type":"dfn","url":"#function"},
"#function-declaration": {"displayText":"function declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"function declaration","type":"dfn","url":"#function-declaration"},
"#function-definition": {"displayText":"function definition","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"function definition","type":"dfn","url":"#function-definition"},
"#function-scope": {"displayText":"function scope","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"function scope","type":"dfn","url":"#function-scope"},
"#function-scope-constant": {"displayText":"function-scope constant","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"function-scope constant","type":"dfn","url":"#function-scope-constant"},
"#function-scope-static-variable": {"displayText":"function-scope static variable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"function-scope static variable","type":"dfn","url":"#function-scope-static-variable"},
"#generic": {"displayText":"generic","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"generic","type":"dfn","url":"#generic"},
"#generic-arguments": {"displayText":"generic arguments","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"generic arguments","type":"dfn","url":"#generic-arguments"},
"#generic-parameter-list": {"displayText":"generic parameter list","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"generic parameter list","type":"dfn","url":"#generic-parameter-list"},
"#generic-parameters": {"displayText":"generic parameters","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"generic parameters","type":"dfn","url":"#generic-parameters"},
"#generic-type-parameter": {"displayText":"generic type parameter","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"generic type parameter","type":"dfn","url":"#generic-type-parameter"},
"#generic-value-parameter": {"displayText":"generic value parameter","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"generic value parameter","type":"dfn","url":"#generic-value-parameter"},
"#global-constant": {"displayText":"global constant","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"global constant","type":"dfn","url":"#global-constant"},
"#global-shader-parameter": {"displayText":"global shader parameter","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"global shader parameter","type":"dfn","url":"#global-shader-parameter"},
"#grid": {"displayText":"grid","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"grid","type":"dfn","url":"#grid"},
"#grid-shape": {"displayText":"grid shape","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"grid shape","type":"dfn","url":"#grid-shape"},
"#hexadecimal-literal": {"displayText":"hexadecimal literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"hexadecimal literal","type":"dfn","url":"#hexadecimal-literal"},
"#horizontal-whitespace": {"displayText":"horizontal whitespace","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"horizontal whitespace","type":"dfn","url":"#horizontal-whitespace"},
"#host": {"displayText":"host","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"host","type":"dfn","url":"#host"},
"#identifier": {"displayText":"identifier","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"identifier","type":"dfn","url":"#identifier"},
"#if-statement": {"displayText":"if statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"if statement","type":"dfn","url":"#if-statement"},
"#implementing-declaration": {"displayText":"implementing declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"implementing declaration","type":"dfn","url":"#implementing-declaration"},
"#implicit-specialization": {"displayText":"implicit specialization","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"implicit specialization","type":"dfn","url":"#implicit-specialization"},
"#include-declarations": {"displayText":"include declarations","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"include declarations","type":"dfn","url":"#include-declarations"},
"#infix-expression": {"displayText":"infix expression","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"infix expression","type":"dfn","url":"#infix-expression"},
"#initial-context": {"displayText":"initial context","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"initial context","type":"dfn","url":"#initial-context"},
"#input-environment": {"displayText":"input environment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"input environment","type":"dfn","url":"#input-environment"},
"#instance-members": {"displayText":"instance members","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"instance members","type":"dfn","url":"#instance-members"},
"#instances": {"displayText":"instances","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"instances","type":"dfn","url":"#instances"},
"#integer-literal": {"displayText":"integer literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"integer literal","type":"dfn","url":"#integer-literal"},
"#integer-types": {"displayText":"integer types","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"integer types","type":"dfn","url":"#integer-types"},
"#interface": {"displayText":"interface","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"interface","type":"dfn","url":"#interface"},
"#interface-declaration": {"displayText":"interface declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"interface declaration","type":"dfn","url":"#interface-declaration"},
"#introduces": {"displayText":"introduces","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"introduces","type":"dfn","url":"#introduces"},
"#invocable": {"displayText":"invocable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"invocable","type":"dfn","url":"#invocable"},
"#kernel": {"displayText":"kernel","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"kernel","type":"dfn","url":"#kernel"},
"#kind": {"displayText":"kind","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"kind","type":"dfn","url":"#kind"},
"#l-values": {"displayText":"l-values","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"l-values","type":"dfn","url":"#l-values"},
"#label": {"displayText":"label","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"label","type":"dfn","url":"#label"},
"#lane-id": {"displayText":"lane id","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"lane id","type":"dfn","url":"#lane-id"},
"#launched": {"displayText":"launched","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"launched","type":"dfn","url":"#launched"},
"#layout": {"displayText":"layout","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"layout","type":"dfn","url":"#layout"},
"#left-hand-side": {"displayText":"left-hand side","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"left-hand side","type":"dfn","url":"#left-hand-side"},
"#legacy": {"displayText":"legacy","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"legacy","type":"dfn","url":"#legacy"},
"#level": {"displayText":"level","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"level","type":"dfn","url":"#level"},
"#lex": {"displayText":"lex","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"lex","type":"dfn","url":"#lex"},
"#lexeme": {"displayText":"lexeme","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"lexeme","type":"dfn","url":"#lexeme"},
"#line-break": {"displayText":"line break","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"line break","type":"dfn","url":"#line-break"},
"#line-comment": {"displayText":"line comment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"line comment","type":"dfn","url":"#line-comment"},
"#lines": {"displayText":"lines","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"lines","type":"dfn","url":"#lines"},
"#linker": {"displayText":"linker","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"linker","type":"dfn","url":"#linker"},
"#literal": {"displayText":"literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"literal","type":"dfn","url":"#literal"},
"#loadable-code": {"displayText":"loadable code","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"loadable code","type":"dfn","url":"#loadable-code"},
"#loading": {"displayText":"loading","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"loading","type":"dfn","url":"#loading"},
"#local-scope": {"displayText":"local scope","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"local scope","type":"dfn","url":"#local-scope"},
"#local-variable": {"displayText":"local variable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"local variable","type":"dfn","url":"#local-variable"},
"#loop-statement": {"displayText":"loop statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"loop statement","type":"dfn","url":"#loop-statement"},
"#matrix": {"displayText":"matrix","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"matrix","type":"dfn","url":"#matrix"},
"#member-declaration-reference": {"displayText":"member declaration reference","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"member declaration reference","type":"dfn","url":"#member-declaration-reference"},
"#memory-access": {"displayText":"memory access","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"memory access","type":"dfn","url":"#memory-access"},
"#memory-access-mode": {"displayText":"memory access mode","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"memory access mode","type":"dfn","url":"#memory-access-mode"},
"#memory-locations": {"displayText":"memory locations","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"memory locations","type":"dfn","url":"#memory-locations"},
"#merge-point": {"displayText":"merge point","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"merge point","type":"dfn","url":"#merge-point"},
"#meta-pattern": {"displayText":"meta-pattern","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"meta-pattern","type":"dfn","url":"#meta-pattern"},
"#meta-type": {"displayText":"meta-type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"meta-type","type":"dfn","url":"#meta-type"},
"#meta-values": {"displayText":"meta-values","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"meta-values","type":"dfn","url":"#meta-values"},
"#meta-variable": {"displayText":"meta-variable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"meta-variable","type":"dfn","url":"#meta-variable"},
"#methods": {"displayText":"methods","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"methods","type":"dfn","url":"#methods"},
"#mirror": {"displayText":"mirror","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"mirror","type":"dfn","url":"#mirror"},
"#module": {"displayText":"module","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"module","type":"dfn","url":"#module"},
"#module-declaration": {"displayText":"module declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"module declaration","type":"dfn","url":"#module-declaration"},
"#nonterminal": {"displayText":"nonterminal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"nonterminal","type":"dfn","url":"#nonterminal"},
"#numeric-literal": {"displayText":"numeric literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"numeric literal","type":"dfn","url":"#numeric-literal"},
"#numeric-literal-suffix": {"displayText":"numeric literal suffix","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"numeric literal suffix","type":"dfn","url":"#numeric-literal-suffix"},
"#object-code": {"displayText":"object code","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"object code","type":"dfn","url":"#object-code"},
"#ordered": {"displayText":"ordered","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"ordered","type":"dfn","url":"#ordered"},
"#output-environment": {"displayText":"output environment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"output environment","type":"dfn","url":"#output-environment"},
"#parameter-declarations": {"displayText":"parameter declarations","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"parameter declarations","type":"dfn","url":"#parameter-declarations"},
"#parameters": {"displayText":"parameters","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"parameters","type":"dfn","url":"#parameters"},
"#parent-environment": {"displayText":"parent environment","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"parent environment","type":"dfn","url":"#parent-environment"},
"#parsing": {"displayText":"parsing","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"parsing","type":"dfn","url":"#parsing"},
"#participate": {"displayText":"participate","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"participate","type":"dfn","url":"#participate"},
"#pipeline-instance": {"displayText":"pipeline instance","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"pipeline instance","type":"dfn","url":"#pipeline-instance"},
"#pipeline-type": {"displayText":"pipeline type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"pipeline type","type":"dfn","url":"#pipeline-type"},
"#prefix-operator": {"displayText":"prefix operator","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"prefix operator","type":"dfn","url":"#prefix-operator"},
"#primary-source-unit": {"displayText":"primary source unit","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"primary source unit","type":"dfn","url":"#primary-source-unit"},
"#process": {"displayText":"process","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"process","type":"dfn","url":"#process"},
"#production": {"displayText":"production","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"production","type":"dfn","url":"#production"},
"#programmable": {"displayText":"programmable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"programmable","type":"dfn","url":"#programmable"},
"#proper-type": {"displayText":"proper type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"proper type","type":"dfn","url":"#proper-type"},
"#property-declaration": {"displayText":"property declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"property declaration","type":"dfn","url":"#property-declaration"},
"#proposition": {"displayText":"proposition","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"proposition","type":"dfn","url":"#proposition"},
"#radix-specifier": {"displayText":"radix specifier","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"radix specifier","type":"dfn","url":"#radix-specifier"},
"#rasterization-pipeline": {"displayText":"rasterization pipeline","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"rasterization pipeline","type":"dfn","url":"#rasterization-pipeline"},
"#ray-tracing-pipeline": {"displayText":"ray-tracing pipeline","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"ray-tracing pipeline","type":"dfn","url":"#ray-tracing-pipeline"},
"#record": {"displayText":"record","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"record","type":"dfn","url":"#record"},
"#reference-type": {"displayText":"reference type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"reference type","type":"dfn","url":"#reference-type"},
"#resolved-expression": {"displayText":"resolved expression","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"resolved expression","type":"dfn","url":"#resolved-expression"},
"#result-type": {"displayText":"result type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"result type","type":"dfn","url":"#result-type"},
"#retroactive-conformance": {"displayText":"retroactive conformance","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"retroactive conformance","type":"dfn","url":"#retroactive-conformance"},
"#right-hand-side": {"displayText":"right-hand side","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"right-hand side","type":"dfn","url":"#right-hand-side"},
"#row-type": {"displayText":"row type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"row type","type":"dfn","url":"#row-type"},
"#rows": {"displayText":"rows","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"rows","type":"dfn","url":"#rows"},
"#runtime-session": {"displayText":"runtime session","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"runtime session","type":"dfn","url":"#runtime-session"},
"#scalar-type": {"displayText":"scalar type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"scalar type","type":"dfn","url":"#scalar-type"},
"#scope": {"displayText":"scope","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"scope","type":"dfn","url":"#scope"},
"#secondary-source-units": {"displayText":"secondary source units","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"secondary source units","type":"dfn","url":"#secondary-source-units"},
"#sign": {"displayText":"sign","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"sign","type":"dfn","url":"#sign"},
"#sort": {"displayText":"sort","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"sort","type":"dfn","url":"#sort"},
"#source-unit": {"displayText":"source unit","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"source unit","type":"dfn","url":"#source-unit"},
"#specialize-expression": {"displayText":"specialize expression","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"specialize expression","type":"dfn","url":"#specialize-expression"},
"#specialized": {"displayText":"specialized","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"specialized","type":"dfn","url":"#specialized"},
"#specialized-declaration-reference": {"displayText":"specialized declaration reference","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"specialized declaration reference","type":"dfn","url":"#specialized-declaration-reference"},
"#stage-instance": {"displayText":"stage instance","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"stage instance","type":"dfn","url":"#stage-instance"},
"#stage-type": {"displayText":"stage type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"stage type","type":"dfn","url":"#stage-type"},
"#statement": {"displayText":"statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"statement","type":"dfn","url":"#statement"},
"#static-global-variable": {"displayText":"static global variable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"static global variable","type":"dfn","url":"#static-global-variable"},
"#static-library": {"displayText":"static library","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"static library","type":"dfn","url":"#static-library"},
"#static-members": {"displayText":"static members","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"static members","type":"dfn","url":"#static-members"},
"#storable": {"displayText":"storable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"storable","type":"dfn","url":"#storable"},
"#strand": {"displayText":"strand","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"strand","type":"dfn","url":"#strand"},
"#string-literal": {"displayText":"string literal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"string literal","type":"dfn","url":"#string-literal"},
"#struct-type": {"displayText":"struct type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"struct type","type":"dfn","url":"#struct-type"},
"#structured-region": {"displayText":"structured region","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"structured region","type":"dfn","url":"#structured-region"},
"#subscript-declaration": {"displayText":"subscript declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"subscript declaration","type":"dfn","url":"#subscript-declaration"},
"#switch-statement": {"displayText":"switch statement","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"switch statement","type":"dfn","url":"#switch-statement"},
"#tangle": {"displayText":"tangle","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"tangle","type":"dfn","url":"#tangle"},
"#term": {"displayText":"term","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"term","type":"dfn","url":"#term"},
"#terminal": {"displayText":"terminal","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"terminal","type":"dfn","url":"#terminal"},
"#tokens": {"displayText":"tokens","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"tokens","type":"dfn","url":"#tokens"},
"#traditional": {"displayText":"traditional","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"traditional","type":"dfn","url":"#traditional"},
"#traditional-buffer-declaration": {"displayText":"traditional buffer declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"traditional buffer declaration","type":"dfn","url":"#traditional-buffer-declaration"},
"#traditional-function-declaration": {"displayText":"traditional function declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"traditional function declaration","type":"dfn","url":"#traditional-function-declaration"},
"#traditional-type-alias-declaration": {"displayText":"traditional type alias declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"traditional type alias declaration","type":"dfn","url":"#traditional-type-alias-declaration"},
"#trivia": {"displayText":"trivia","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"trivia","type":"dfn","url":"#trivia"},
"#type": {"displayText":"type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"type","type":"dfn","url":"#type"},
"#type-alias": {"displayText":"type alias","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"type alias","type":"dfn","url":"#type-alias"},
"#type-alias-declaration": {"displayText":"type alias declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"type alias declaration","type":"dfn","url":"#type-alias-declaration"},
"#type-declaration": {"displayText":"type declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"type declaration","type":"dfn","url":"#type-declaration"},
"#type-expression": {"displayText":"type expression","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"type expression","type":"dfn","url":"#type-expression"},
"#type-specifiers": {"displayText":"type specifiers","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"type specifiers","type":"dfn","url":"#type-specifiers"},
"#underlying-type": {"displayText":"underlying type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"underlying type","type":"dfn","url":"#underlying-type"},
"#underlying-value": {"displayText":"underlying value","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"underlying value","type":"dfn","url":"#underlying-value"},
"#uniform-shader-parameters": {"displayText":"uniform shader parameters","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"uniform shader parameters","type":"dfn","url":"#uniform-shader-parameters"},
"#unit-type": {"displayText":"unit type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"unit type","type":"dfn","url":"#unit-type"},
"#unordered": {"displayText":"unordered","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"unordered","type":"dfn","url":"#unordered"},
"#unspecialized": {"displayText":"unspecialized","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"unspecialized","type":"dfn","url":"#unspecialized"},
"#values": {"displayText":"values","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"values","type":"dfn","url":"#values"},
"#variable": {"displayText":"variable","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"variable","type":"dfn","url":"#variable"},
"#variable-declaration": {"displayText":"variable declaration","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"variable declaration","type":"dfn","url":"#variable-declaration"},
"#vector": {"displayText":"vector","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"vector","type":"dfn","url":"#vector"},
"#vector-type": {"displayText":"vector type","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"vector type","type":"dfn","url":"#vector-type"},
"#wave": {"displayText":"wave","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"wave","type":"dfn","url":"#wave"},
"#wave-size": {"displayText":"wave size","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"wave size","type":"dfn","url":"#wave-size"},
"#whitespace": {"displayText":"whitespace","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"whitespace","type":"dfn","url":"#whitespace"},
"#witness": {"displayText":"witness","export":true,"for_":[],"level":"1","normative":true,"shortname":"slang-language","spec":"slang-language-1","status":"local","text":"witness","type":"dfn","url":"#witness"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>